var Va=Object.defineProperty;var Ea=(s,l,a)=>l in s?Va(s,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[l]=a;var ce=(s,l,a)=>(Ea(s,typeof l!="symbol"?l+"":l,a),a);import{d as ke,r as m,t as Ge,F as aa,o as d,c as b,u as e,n as V,b as $,e as z,f as ee,_ as ge,k as Ue,m as Fe,O as Ra,l as Xe,P as Na,C as w,Q as re,R as Ce,s as $e,B as oe,w as Ae,a as n,I as q,S as Q,A as N,z as sa,j as va,K as pa,g as La,i as Ha,T as Le,q as ha,v as He,L as ja,U as Be,M as Ua,y as Xa,V as de,D as je,p as za,h as Ka,E as Ya,x as qa}from"./index-41eb4cf5.js";import{b as Qa,d as Ja,L as Za}from"./debounce-56efe328.js";let ma=[],Ca=[],ka=[],ga=[],ba=[],Ia=[];Ia=[{id:1,taken:!1,activated:"none",cost:["brick","wood","clay","paper"],valueCost:[1,1,1,2],power:["attack","points","break"],valuePower:[1,3,1]},{id:2,taken:!1,activated:"none",cost:["brick","wood","glass"],valueCost:[2,1,1],power:["attack","points","break"],valuePower:[1,3,2]},{id:3,taken:!1,activated:"none",cost:["brick","clay","paper"],valueCost:[2,2,1],power:["effect","points","break","cash"],valuePower:[1,3,3,3]},{id:4,taken:!1,activated:"none",cost:["brick","clay","glass"],valueCost:[1,1,2],power:["effect","points"],valuePower:[1,6]},{id:5,taken:!1,activated:"none",cost:["wood","glass","paper"],valueCost:[2,1,1],power:["effect","points","cash"],valuePower:[1,3,6]},{id:6,taken:!1,activated:"none",cost:["clay","glass","paper"],valueCost:[2,2,1],power:["effect","points"],valuePower:[2,2]},{id:7,taken:!1,activated:"none",cost:["wood","brick","clay"],valueCost:[2,1,1],power:["effect","points","materials"],valuePower:[1,2,2]},{id:8,taken:!1,activated:"none",cost:["wood","glass","paper"],valueCost:[3,1,1],power:["effect","points"],valuePower:[3,4]},{id:9,taken:!1,activated:"none",cost:["brick","paper"],valueCost:[3,1],power:["points"],valuePower:[9]},{id:10,taken:!1,activated:"none",cost:["wood","brick","paper"],valueCost:[1,1,2],power:["materials","points"],valuePower:[1,4]},{id:11,taken:!1,activated:"none",cost:["wood","brick","glass","paper"],valueCost:[1,1,1,1],power:["effect","cash"],valuePower:[1,12]},{id:12,taken:!1,activated:"none",cost:["clay","glass"],valueCost:[3,1],power:["attack","points"],valuePower:[2,3]}];ma=[{tier:"I",idImg:1,taken:"inGame",hide:!1,color:"brown",valueCost:[],cost:[],valuePower:[1],power:["wood"]},{tier:"I",idImg:2,taken:"inGame",hide:!1,color:"brown",valueCost:[1],cost:["cash"],valuePower:[1],power:["brick"]},{tier:"I",idImg:3,taken:"inGame",hide:!1,color:"brown",valueCost:[],cost:[],valuePower:[1],power:["clay"]},{tier:"I",idImg:4,taken:"inGame",hide:!1,color:"brown",valueCost:[1],cost:["cash"],valuePower:[1],power:["wood"]},{tier:"I",idImg:5,taken:"inGame",hide:!1,color:"brown",valueCost:[],cost:[],valuePower:[1],power:["brick"]},{tier:"I",idImg:6,taken:"inGame",hide:!1,color:"brown",valueCost:[1],cost:["cash"],valuePower:[1],power:["clay"]},{tier:"I",idImg:7,taken:"inGame",hide:!1,color:"grey",valueCost:[1],cost:["cash"],valuePower:[1],power:["glass"]},{tier:"I",idImg:8,taken:"inGame",hide:!1,color:"grey",valueCost:[1],cost:["cash"],valuePower:[1],power:["paper"]},{tier:"I",idImg:9,taken:"inGame",hide:!1,color:"red",valueCost:[1],cost:["wood"],valuePower:[1,1],power:["attack","specialChar"]},{tier:"I",idImg:10,taken:"inGame",hide:!1,color:"red",valueCost:[1],cost:["clay"],valuePower:[1,2],power:["attack","specialChar"]},{tier:"I",idImg:11,taken:"inGame",hide:!1,color:"red",valueCost:[2],cost:["cash"],valuePower:[1,3],power:["attack","specialChar"]},{tier:"I",idImg:12,taken:"inGame",hide:!1,color:"red",valueCost:[],cost:[],valuePower:[1],power:["attack"]},{tier:"I",idImg:13,taken:"inGame",hide:!1,color:"green",valueCost:[2],cost:["cash"],valuePower:[1,4],power:["artefact","specialChar"]},{tier:"I",idImg:14,taken:"inGame",hide:!1,color:"green",valueCost:[1],cost:["paper"],valuePower:[3,1],power:["artefact","points"]},{tier:"I",idImg:15,taken:"inGame",hide:!1,color:"green",valueCost:[2],cost:["cash"],valuePower:[2,5],power:["artefact","specialChar"]},{tier:"I",idImg:16,taken:"inGame",hide:!1,color:"green",valueCost:[1],cost:["glass"],valuePower:[4,1],power:["artefact","points"]},{tier:"I",idImg:17,taken:"inGame",hide:!1,color:"yellow",valueCost:[],cost:[],valuePower:[4,9],power:["cash","specialChar"]},{tier:"I",idImg:18,taken:"inGame",hide:!1,color:"yellow",valueCost:[3],cost:["cash"],valuePower:[2],power:["discount"]},{tier:"I",idImg:19,taken:"inGame",hide:!1,color:"yellow",valueCost:[3],cost:["cash"],valuePower:[1],power:["discount"]},{tier:"I",idImg:20,taken:"inGame",hide:!1,color:"yellow",valueCost:[3],cost:["cash"],valuePower:[3],power:["discount"]},{tier:"I",idImg:21,taken:"inGame",hide:!1,color:"blue",valueCost:[],cost:[],valuePower:[6,3],power:["specialChar","points"]},{tier:"I",idImg:22,taken:"inGame",hide:!1,color:"blue",valueCost:[],cost:[],valuePower:[7,3],power:["specialChar","points"]},{tier:"I",idImg:23,taken:"inGame",hide:!1,color:"blue",valueCost:[1],cost:["brick"],valuePower:[8,3],power:["specialChar","points"]}];Ca=[{tier:"II",idImg:24,taken:"inGame",hide:!1,color:"brown",valueCost:[2],cost:["cash"],valuePower:[2],power:["wood"]},{tier:"II",idImg:25,taken:"inGame",hide:!1,color:"brown",valueCost:[2],cost:["cash"],valuePower:[2],power:["brick"]},{tier:"II",idImg:26,taken:"inGame",hide:!1,color:"brown",valueCost:[2],cost:["cash"],valuePower:[2],power:["clay"]},{tier:"II",idImg:27,taken:"inGame",hide:!1,color:"grey",valueCost:[],cost:[],valuePower:[1],power:["glass"]},{tier:"II",idImg:28,taken:"inGame",hide:!1,color:"grey",valueCost:[],cost:[],valuePower:[1],power:["paper"]},{tier:"II",idImg:29,taken:"inGame",hide:!1,color:"red",valueCost:[1,1,1],cost:["specialChar","wood","clay"],valuePower:[1],power:["attack"]},{tier:"II",idImg:30,taken:"inGame",hide:!1,color:"red",valueCost:[2,3],cost:["specialChar","cash"],valuePower:[1],power:["attack"]},{tier:"II",idImg:31,taken:"inGame",hide:!1,color:"red",valueCost:[2],cost:["brick"],valuePower:[2],power:["attack"]},{tier:"II",idImg:32,taken:"inGame",hide:!1,color:"red",valueCost:[1,1,1],cost:["brick","wood","paper"],valuePower:[2,10],power:["attack","specialChar"]},{tier:"II",idImg:33,taken:"inGame",hide:!1,color:"red",valueCost:[2,1],cost:["clay","glass"],valuePower:[2,11],power:["attack","specialChar"]},{tier:"II",idImg:34,taken:"inGame",hide:!1,color:"green",valueCost:[2,1],cost:["wood","paper"],valuePower:[3,1,12],power:["artefact","points","specialChar"]},{tier:"II",idImg:35,taken:"inGame",hide:!1,color:"green",valueCost:[2,1],cost:["wood","glass"],valuePower:[4,1,13],power:["artefact","points","specialChar"]},{tier:"II",idImg:36,taken:"inGame",hide:!1,color:"green",valueCost:[5,2,1],cost:["specialChar","clay","brick"],valuePower:[2,2],power:["artefact","points"]},{tier:"II",idImg:37,taken:"inGame",hide:!1,color:"green",valueCost:[4,1,1,1],cost:["specialChar","brick","wood","glass"],valuePower:[1,2],power:["artefact","points"]},{tier:"II",idImg:38,taken:"inGame",hide:!1,color:"yellow",valueCost:[],cost:[],valuePower:[6,17],power:["cash","specialChar"]},{tier:"II",idImg:39,taken:"inGame",hide:!1,color:"yellow",valueCost:[3,1],cost:["cash","clay"],valuePower:[2],power:["materials"]},{tier:"II",idImg:40,taken:"inGame",hide:!1,color:"yellow",valueCost:[2,1,1],cost:["cash","paper","glass"],valuePower:[1],power:["materials"]},{tier:"II",idImg:41,taken:"inGame",hide:!1,color:"yellow",valueCost:[4],cost:["cash"],valuePower:[4],power:["discount"]},{tier:"II",idImg:42,taken:"inGame",hide:!1,color:"blue",valueCost:[7,1,1],cost:["specialChar","wood","paper"],valuePower:[4,15],power:["points","specialChar"]},{tier:"II",idImg:43,taken:"inGame",hide:!1,color:"blue",valueCost:[6,2],cost:["specialChar","clay"],valuePower:[4,14],power:["points","specialChar"]},{tier:"II",idImg:44,taken:"inGame",hide:!1,color:"blue",valueCost:[2,1],cost:["wood","glass"],valuePower:[5],power:["points"]},{tier:"II",idImg:45,taken:"inGame",hide:!1,color:"blue",valueCost:[8,3],cost:["specialChar","brick"],valuePower:[5],power:["points"]},{tier:"II",idImg:46,taken:"inGame",hide:!1,color:"blue",valueCost:[1,1],cost:["brick","wood"],valuePower:[4,16],power:["points","specialChar"]}];ka=[{tier:"III",idImg:47,taken:"inGame",hide:!1,color:"red",valueCost:[11,2,2],cost:["specialChar","clay","brick"],valuePower:[2],power:["attack"]},{tier:"III",idImg:48,taken:"inGame",hide:!1,color:"red",valueCost:[3,2],cost:["clay","wood"],valuePower:[3],power:["attack"]},{tier:"III",idImg:49,taken:"inGame",hide:!1,color:"red",valueCost:[10,3,1],cost:["specialChar","wood","glass"],valuePower:[2],power:["attack"]},{tier:"III",idImg:50,taken:"inGame",hide:!1,color:"red",valueCost:[3,2,1,1],cost:["specialChar","brick","clay","paper"],valuePower:[2],power:["attack"]},{tier:"III",idImg:51,taken:"inGame",hide:!1,color:"red",valueCost:[8],cost:["cash"],valuePower:[3],power:["attack"]},{tier:"III",idImg:52,taken:"inGame",hide:!1,color:"green",valueCost:[1,1,2],cost:["brick","wood","glass"],valuePower:[6,3],power:["artefact","points"]},{tier:"III",idImg:53,taken:"inGame",hide:!1,color:"green",valueCost:[12,1,1,1],cost:["specialChar","clay","paper","glass"],valuePower:[5,2],power:["artefact","points"]},{tier:"III",idImg:54,taken:"inGame",hide:!1,color:"green",valueCost:[2,1,1],cost:["wood","paper","glass"],valuePower:[6,3],power:["artefact","points"]},{tier:"III",idImg:55,taken:"inGame",hide:!1,color:"green",valueCost:[13,1,2],cost:["specialChar","brick","paper"],valuePower:[5,2],power:["artefact","points"]},{tier:"III",idImg:56,taken:"inGame",hide:!1,color:"yellow",valueCost:[18,1,1,1],cost:["specialChar","clay","brick","wood"],valuePower:[3,1],power:["points","cashBack"]},{tier:"III",idImg:57,taken:"inGame",hide:!1,color:"yellow",valueCost:[2],cost:["paper"],valuePower:[3,3],power:["points","cashBack"]},{tier:"III",idImg:58,taken:"inGame",hide:!1,color:"yellow",valueCost:[1,1,1],cost:["wood","glass","paper"],valuePower:[3,4],power:["points","cashBack"]},{tier:"III",idImg:59,taken:"inGame",hide:!1,color:"yellow",valueCost:[17,2,1],cost:["specialChar","clay","glass"],valuePower:[3,2],power:["points","cashBack"]},{tier:"III",idImg:60,taken:"inGame",hide:!1,color:"yellow",valueCost:[2,1],cost:["brick","glass"],valuePower:[3,5],power:["points","cashBack"]},{tier:"III",idImg:61,taken:"inGame",hide:!1,color:"blue",valueCost:[1,1,1,2],cost:["clay","brick","wood","glass"],valuePower:[7],power:["points"]},{tier:"III",idImg:62,taken:"inGame",hide:!1,color:"blue",valueCost:[14,2,2],cost:["specialChar","clay","wood"],valuePower:[6],power:["points"]},{tier:"III",idImg:63,taken:"inGame",hide:!1,color:"blue",valueCost:[15,1,1,2],cost:["specialChar","clay","wood","paper"],valuePower:[6],power:["points"]},{tier:"III",idImg:64,taken:"inGame",hide:!1,color:"blue",valueCost:[3,2],cost:["brick","wood"],valuePower:[7],power:["points"]},{tier:"III",idImg:65,taken:"inGame",hide:!1,color:"blue",valueCost:[16,2,1,1],cost:["specialChar","clay","brick","paper"],valuePower:[5],power:["points"]},{tier:"III",idImg:66,taken:"inGame",hide:!1,color:"blue",valueCost:[2,1],cost:["brick","glass"],valuePower:[5],power:["points"]}];ga=[{tier:"guild",idImg:67,taken:"inGame",hide:!1,color:"purple",valueCost:[1,1,1,1],cost:["clay","wood","paper","glass"],valuePower:[1],power:["guild"]},{tier:"guild",idImg:68,taken:"inGame",hide:!1,color:"purple",valueCost:[1,1,1,1],cost:["clay","brick","paper","glass"],valuePower:[2],power:["guild"]},{tier:"guild",idImg:69,taken:"inGame",hide:!1,color:"purple",valueCost:[2,1,1,1],cost:["brick","clay","wood","glass"],valuePower:[3],power:["guild"]},{tier:"guild",idImg:70,taken:"inGame",hide:!1,color:"purple",valueCost:[2,1,1],cost:["wood","clay","paper"],valuePower:[4],power:["guild"]},{tier:"guild",idImg:71,taken:"inGame",hide:!1,color:"purple",valueCost:[2,2],cost:["clay","wood"],valuePower:[5],power:["guild"]},{tier:"guild",idImg:72,taken:"inGame",hide:!1,color:"purple",valueCost:[2,2],cost:["brick","wood"],valuePower:[6],power:["guild"]},{tier:"guild",idImg:73,taken:"inGame",hide:!1,color:"purple",valueCost:[2,1,1],cost:["brick","clay","paper"],valuePower:[7],power:["guild"]}];ba=["artefact7","attack1","cash6n4special","cashBack","lowCostBlue","lowCostWonder","point4n6cash","point7","pointX3","repeatWonder"];const xa=[-200,-200,-135,-135,-135,-70,-70,-70,-70,-5,-5,-5,-5,-5,60,60,60,60,60,60],Pa=[-120,20,-190,-50,90,-260,-120,20,160,-330,-190,-50,90,230,-400,-260,-120,20,160,300],es=[-200,-200,-200,-200,-200,-200,-135,-135,-135,-135,-135,-70,-70,-70,-70,-5,-5,-5,60,60],as=[...Pa].reverse(),ss=[-265,-265,-210,-210,-210,-155,-155,-155,-155,-100,-100,-45,-45,-45,-45,10,10,10,65,65],rs=[-120,20,-190,-50,90,-260,-120,20,160,-190,90,160,20,-120,-260,90,-50,-190,20,-120],ts=[3,4,5,10,11,12,13,14];function xe(s,l){let a=[];return l==="I"?a=s.map((t,r)=>{const y=r+1;let I=0;return r<2?I=2:r<5?I=3:r<9?I=4:r<14?I=5:r<20&&(I=0),{...t,id:y,coversBy:I!==0?[y+I,y+I+1]:[],hide:!!ts.find(G=>G===y)}}):l==="II"?(a[0]={...s[0],id:1,coversBy:[7]},a[1]={...s[1],id:2,coversBy:[7,8]},a[2]={...s[2],id:3,coversBy:[8,9]},a[3]={...s[3],id:4,coversBy:[9,10]},a[4]={...s[4],id:5,coversBy:[10,11]},a[5]={...s[5],id:6,coversBy:[11]},a[6]={...s[6],id:7,coversBy:[12],hide:!0},a[7]={...s[7],id:8,coversBy:[12,13],hide:!0},a[8]={...s[8],id:9,coversBy:[13,14],hide:!0},a[9]={...s[9],id:10,coversBy:[14,15],hide:!0},a[10]={...s[10],id:11,coversBy:[15],hide:!0},a[11]={...s[11],id:12,coversBy:[16]},a[12]={...s[12],id:13,coversBy:[16,17]},a[13]={...s[13],id:14,coversBy:[17,18]},a[14]={...s[14],id:15,coversBy:[18]},a[15]={...s[15],id:16,coversBy:[19],hide:!0},a[16]={...s[16],id:17,coversBy:[19,20],hide:!0},a[17]={...s[17],id:18,coversBy:[20],hide:!0},a[18]={...s[18],id:19,coversBy:[]},a[19]={...s[19],id:20,coversBy:[]}):l==="III"&&(a[0]={...s[0],id:1,coversBy:[3,4]},a[1]={...s[1],id:2,coversBy:[4,5]},a[2]={...s[2],id:3,coversBy:[6,7],hide:!0},a[3]={...s[3],id:4,coversBy:[7,8],hide:!0},a[4]={...s[4],id:5,coversBy:[8,9],hide:!0},a[5]={...s[5],id:6,coversBy:[10]},a[6]={...s[6],id:7,coversBy:[10]},a[7]={...s[7],id:8,coversBy:[11]},a[8]={...s[8],id:9,coversBy:[11]},a[9]={...s[9],id:10,coversBy:[14,15],hide:!0},a[10]={...s[10],id:11,coversBy:[12,13],hide:!0},a[11]={...s[11],id:12,coversBy:[16]},a[12]={...s[12],id:13,coversBy:[16,17]},a[13]={...s[13],id:14,coversBy:[17,18]},a[14]={...s[14],id:15,coversBy:[18]},a[15]={...s[15],id:16,coversBy:[19],hide:!0},a[16]={...s[16],id:17,coversBy:[19,20],hide:!0},a[17]={...s[17],id:18,coversBy:[20],hide:!0},a[18]={...s[18],id:19,coversBy:[]},a[19]={...s[19],id:20,coversBy:[]}),a}const ya=(s,l)=>{const a={...l.resources};if(s.color==="brown")switch(s.power[0]){case"clay":a.clayValue+=s.valuePower[0];break;case"brick":a.brickValue+=s.valuePower[0];break;case"wood":a.woodValue+=s.valuePower[0];break}else if(s.color==="grey")switch(s.power[0]){case"paper":a.paperValue+=s.valuePower[0];break;case"glass":a.glassValue+=s.valuePower[0];break}else s.color==="yellow"?s.power.forEach((t,r)=>{if(t==="points"&&(l.points+=s.valuePower[r]),t==="discount")switch(s.valuePower[r]){case 1:a.clayOne=1;break;case 2:a.brickOne=1;break;case 3:a.woodOne=1;break;case 4:a.paperGlassOne=1;break}if(t==="materials")switch(s.valuePower[r]){case 1:a.materialsCBW+=1;break;case 2:a.materialsPG+=1;break}if(t==="specialChar"&&a.specialChars.push(s.valuePower[r]),t==="cash"&&(a.cash+=s.valuePower[r]),t==="cashBack")switch(s.valuePower[r]){case 1:a.cash+=l.wonderCards.filter(y=>y.activated!=="none").length*2;break;case 2:a.cash+=l.cards.yellow.length+1;break;case 3:a.cash+=l.cards.grey.length*3;break;case 4:a.cash+=l.cards.brown.length*2;break;case 5:a.cash+=l.cards.red.length;break}}):s.color==="red"?s.power.forEach((t,r)=>{t==="specialChar"&&a.specialChars.push(s.valuePower[r])}):s.color==="green"?s.power.forEach((t,r)=>{t==="specialChar"&&a.specialChars.push(s.valuePower[r]),t==="artefact"&&a.artefacts.push(s.valuePower[r]),t==="points"&&(l.points+=s.valuePower[r])}):s.color==="blue"?s.power.forEach((t,r)=>{t==="points"&&(l.points+=s.valuePower[r]),t==="specialChar"&&a.specialChars.push(s.valuePower[r])}):s.color;return a},fa=(s,l)=>{const a={...l};return a.wonderCards=a.wonderCards.map(t=>t.id===s.id?s:t),s.power.forEach((t,r)=>{if(t==="materials")switch(s.valuePower[r]){case 1:a.resources.materialsCBW+=1;break;case 2:a.resources.materialsPG+=1;break}else t==="cash"?a.resources.cash+=s.valuePower[r]:t==="points"&&(a.points+=s.valuePower[r])}),a},ls=ke({__name:"DuelGameCardComponent",props:{card:{},small:{type:Boolean},cash1P:{},cash2P:{},res1P:{},res2P:{}},setup(s){const l=s,a=m(0),t=m(0),r=m(0),y=m(0),I=m(0),G=m(0),f=m(0),c=m(0),o=m(0),h=m(0),j=m(0),M=m(0),L=m(0),F=m(0),X=m(0),U=m(0),p=m(0),te=m(0),Me=m(0),we=m(0),Z=m(0),ue=m(""),he=m(""),{card:H}=Ge(l);return aa(()=>{switch(H.value.power.forEach((le,K)=>{switch(le){case"points":a.value=H.value.valuePower[K];break;case"artefact":t.value=H.value.valuePower[K];break;case"attack":r.value=H.value.valuePower[K];break;case"clay":y.value=H.value.valuePower[K];break;case"brick":I.value=H.value.valuePower[K];break;case"wood":G.value=H.value.valuePower[K];break;case"paper":f.value=H.value.valuePower[K];break;case"glass":c.value=H.value.valuePower[K];break;case"cash":o.value=H.value.valuePower[K];break;case"specialChar":h.value=H.value.valuePower[K];break;case"discount":j.value=H.value.valuePower[K];break;case"materials":M.value=H.value.valuePower[K];break;case"cashBack":L.value=H.value.valuePower[K];break;case"guild":F.value=H.value.valuePower[K];break}}),H.value.cost.forEach((le,K)=>{switch(le){case"specialChar":X.value=H.value.valueCost[K];break;case"clay":U.value=H.value.valueCost[K];break;case"brick":p.value=H.value.valueCost[K];break;case"wood":te.value=H.value.valueCost[K];break;case"paper":Me.value=H.value.valueCost[K];break;case"glass":we.value=H.value.valueCost[K];break;case"cash":Z.value=H.value.valueCost[K];break}}),H.value.color){case"red":ue.value="rgb(255, 39, 39)";break;case"green":ue.value="rgb(14, 165, 14)";break;case"blue":ue.value="rgb(74, 74, 252)";break;case"yellow":ue.value="rgb(255, 255, 44)";break;case"brown":ue.value="rgb(197, 69, 69)";break;case"grey":ue.value="rgb(161, 161, 161)";break;case"purple":ue.value="rgb(192, 23, 192)";break}switch(H.value.tier){case"I":he.value="calc(var(--width-tier) * -10) calc(var(--height-tier) * -6)";break;case"II":he.value="calc(var(--width-tier) * -11) calc(var(--height-tier) * -6)";break;case"III":he.value="0 calc(var(--height-tier) * -7)";break;case"guild":he.value="calc(var(--width-tier) * -1) calc(var(--height-tier) * -7)";break}}),(le,K)=>{var O;return d(),b("div",{class:V(["card",`card${e(H).idImg}`,!e(H).hide||((O=e(H).coversBy)==null?void 0:O.length)===0?"":"hideCard",le.small&&"small"]),style:ee(`--reversBg:${he.value};`)},[e(H).taken==="inGame"&&le.cash1P!==void 0&&le.cash1P>=0?(d(),b("div",{key:0,class:V(["cashSum cashSumP1",le.res1P!==void 0&&le.cash1P>le.res1P&&"toHighPrice"])},$(le.cash1P),3)):z("",!0),e(H).taken==="inGame"&&le.cash2P!==void 0&&le.cash2P>=0?(d(),b("div",{key:1,class:V(["cashSum cashSumP2",le.res2P!==void 0&&le.cash2P>le.res2P&&"toHighPrice"])},$(le.cash2P),3)):z("",!0)],6)}}});const ie=ge(ls,[["__scopeId","data-v-bb958e0d"]]);class _a{constructor(l){ce(this,"pawn",0);ce(this,"coins",[]);ce(this,"punishment1",!0);ce(this,"punishment2",!0);ce(this,"punishment3",!0);ce(this,"punishment4",!0);Object.assign(this,l)}}class ze{constructor(l){ce(this,"_id",0);ce(this,"user",{});ce(this,"points",0);ce(this,"resources",{cash:7,clayValue:0,brickValue:0,woodValue:0,paperValue:0,glassValue:0,clayOne:0,brickOne:0,woodOne:0,paperGlassOne:0,materialsCBW:0,materialsPG:0,specialChars:[],artefacts:[],specialEffects:[],coins:[]});ce(this,"wonderCards",[]);ce(this,"cards",{red:[],green:[],blue:[],yellow:[],brown:[],grey:[],purple:[]});Object.assign(this,l)}get id(){return this._id}set setId(l){this._id=l}}const os=Ue(Xe,"gameDuel"),W=Fe(os,"table1");let wa;const Se=Ra("duelGameStore",{state:()=>({turn:"",tier:"prepare",move:0,pickCoin:"",pickCoinOfThree:"",pickCardFromGraveyard:"",destroyBrown:"",destroyGrey:"",tierOneCards:[],tierTwoCards:[],tierThreeCards:[],theRestOfCoins:[],wonderCards:[],graveyard:[],board:new _a,player1:new ze,player2:new ze,selectWondersForPlayers:[],selectWondersForPlayersMove:0,chooseWhoWillStart:!1,wonByArt:"",wonByAggressive:"",wonBySurr:"",selectedCard:{},selectedWonder:{},isLoading:!1}),getters:{},actions:{async subFirebaseConnect(s){wa=await Na(W,l=>{if(l.exists()){const{turn:a,tier:t,move:r,tierICards:y,tierIICards:I,tierIIICards:G,player1:f,player2:c,gameBoard:o,wonderCards:h,graveyard:j,theRestOfCoins:M,pickCoin:L,pickCoinOfThree:F,pickCardFromGraveyard:X,destroyBrown:U,destroyGrey:p,selectWondersForPlayers:te,selectWondersForPlayersMove:Me,chooseWhoWillStart:we,wonByArt:Z,wonByAggressive:ue,wonBySurr:he}=l.data();this.turn=a,this.tier=t,this.move=r,this.tierOneCards=y,this.tierTwoCards=I,this.tierThreeCards=G,this.player1=f,this.player2=c,this.board=o,this.wonderCards=h,this.graveyard=j,this.theRestOfCoins=M,this.pickCoin=L,this.pickCoinOfThree=F,this.pickCardFromGraveyard=X,this.destroyBrown=U,this.destroyGrey=p,this.selectWondersForPlayers=te,this.selectWondersForPlayersMove=Me,this.chooseWhoWillStart=we,this.wonByArt=Z,this.wonByAggressive=ue,this.wonBySurr=he}})},unSubFirebaseConnect(){wa()},unselectCard(){this.selectedCard={},this.selectedWonder={}},async upgradeTurnAndMove(s,l){if(l)await w(W,{turn:s});else if(this.move+1===60)await w(W,{tier:"end",move:re(1)});else if((this.move+1===20||this.move+1===40)&&!this.chooseWhoWillStart){let a=s;a=a===this.player1.user.uid?`${this.player2.user.uid}`:`${this.player1.user.uid}`,this.board.pawn>0?a=`${this.player1.user.uid}`:this.board.pawn<0&&(a=`${this.player2.user.uid}`),await w(W,{chooseWhoWillStart:!0,turn:a,move:re(1)})}else await w(W,{turn:s,move:re(1)})},async setPickCoin(s){await w(W,{pickCoin:s})},async setPickCoinOfThree(s){await w(W,{pickCoinOfThree:s})},async setPickCardFromGraveyard(s){await w(W,{pickCardFromGraveyard:s})},async setDestroyBrown(s){await w(W,{destroyBrown:s})},async setDestroyGrey(s){await w(W,{destroyGrey:s})},async setMovePawn(s,l){if(l===this.player1.user.uid)for(let a=0;a<s;a++){if(this.board.pawn<=-8){await w(W,{"gameBoard.pawn":re(-1),wonByAggressive:l}),console.log("%c END GAME - ATTACK -> ","background: #222; color: #bada55");return}await w(W,{"gameBoard.pawn":re(-1)}),this.board.pawn<=-6&&this.board.punishment1?await w(W,{"gameBoard.punishment1":!1,"player2.resources.cash":this.player2.resources.cash<=5?0:this.player2.resources.cash-=5}):this.board.pawn<=-3&&this.board.punishment2&&await w(W,{"gameBoard.punishment2":!1,"player2.resources.cash":this.player2.resources.cash<=2?0:this.player2.resources.cash-=2})}else for(let a=0;a<s;a++){if(this.board.pawn>=8){await w(W,{"gameBoard.pawn":re(1),wonByAggressive:l}),console.log("%c END GAME - ATTACK -> ","background: #222; color: #bada55");return}await w(W,{"gameBoard.pawn":re(1)}),this.board.pawn>=3&&this.board.punishment3?await w(W,{"gameBoard.punishment3":!1,"player1.resources.cash":this.player1.resources.cash<=2?0:this.player1.resources.cash-=2}):this.board.pawn>=6&&this.board.punishment4&&await w(W,{"gameBoard.punishment4":!1,"player1.resources.cash":this.player1.resources.cash<=5?0:this.player1.resources.cash-=5})}},async countArtefacts(s){let l=0;if(s===this.player1.user.uid){this.player1.resources.coins.find(t=>t==="artefact7")&&(l+=1);const a=this.player1.cards.green.map(t=>t.valuePower[0]);l+=[...new Set(a)].length}else{this.player2.resources.coins.find(t=>t==="artefact7")&&(l+=1);const a=this.player2.cards.green.map(t=>t.valuePower[0]);l+=[...new Set(a)].length}if(l>=6){await w(W,{wonByArt:s}),console.log("%c END GAME - ARTEFACT -> ","background: #222; color: #bada55");return}},async setCardTaken(s,l){let a={},t=!1,r=!1,y=!1,I=0,G=0;if(this.tier==="I"||l==="I"?(this.tierOneCards=this.$state.tierOneCards.map(f=>(f.id===this.selectedCard.id&&(a=f),{...f,taken:f.id===this.selectedCard.id?"inPlayerBoard":f.taken,coversBy:f!=null&&f.coversBy?f.coversBy.filter(c=>c!==this.selectedCard.id):[]})),await w(W,{tierICards:this.tierOneCards})):this.tier==="II"||l==="II"?(this.tierTwoCards=this.$state.tierTwoCards.map(f=>(f.id===this.selectedCard.id&&(a=f),{...f,taken:f.id===this.selectedCard.id?"inPlayerBoard":f.taken,coversBy:f!=null&&f.coversBy?f.coversBy.filter(c=>c!==this.selectedCard.id):[]})),await w(W,{tierIICards:this.tierTwoCards})):(this.tier==="III"||l==="III"||l==="guild")&&(this.tierThreeCards=this.$state.tierThreeCards.map(f=>(f.id===this.selectedCard.id&&(a=f),{...f,taken:f.id===this.selectedCard.id?"inPlayerBoard":f.taken,coversBy:f!=null&&f.coversBy?f.coversBy.filter(c=>c!==this.selectedCard.id):[]})),await w(W,{tierIIICards:this.tierThreeCards})),this.isLoading=!0,this.turn===this.player1.user.uid){this.player1.resources.coins.find(c=>c==="cash6n4special")&&s===0&&a.cost[0]==="specialChar"&&this.player1.resources.specialChars.find(c=>c===a.valueCost[0])&&(G=4);const f=ya(a,this.player1);if(this.player1.cards[a.color].push({...a,taken:"inPlayerBoard"}),a.color==="red"&&a.power.forEach((c,o)=>{c==="attack"&&(this.player1.resources.coins.find(h=>h==="attack1")?I=++a.valuePower[o]:I=a.valuePower[o],y=!0)}),a.color==="green"&&(r=!0,a.power.forEach((c,o)=>{if(c==="artefact"&&this.player1.resources.artefacts.length!==0){let h=0;this.player1.resources.artefacts.forEach(j=>{j===a.valuePower[o]&&h++}),h===2&&(t=!0)}})),a.color==="purple")switch(a.valuePower[0]){case 1:{const c=this.player1.cards.yellow.length,o=this.player2.cards.yellow.length,h=c>o?c:o;f.cash+=h;break}case 2:{const c=this.player1.cards.brown.length+this.player1.cards.grey.length,o=this.player2.cards.brown.length+this.player2.cards.grey.length,h=c>o?c:o;f.cash+=h;break}case 4:{const c=this.player1.cards.blue.length,o=this.player2.cards.blue.length,h=c>o?c:o;f.cash+=h;break}case 5:{const c=this.player1.cards.green.length,o=this.player2.cards.green.length,h=c>o?c:o;f.cash+=h;break}case 7:{const c=this.player1.cards.red.length,o=this.player2.cards.red.length,h=c>o?c:o;f.cash+=h;break}}if(await w(W,{"player1.points":this.player1.points,"player1.cards":this.player1.cards,"player1.resources":{...f,cash:f.cash+G-s}}),s>0&&this.player2.resources.coins.find(c=>c==="cashBack")){let c=s;a.cost.find((o,h)=>o==="cash"?(c-=a.valueCost[h],w(W,{"player2.resources.cash":re(c)}),!0):!1)}r&&await this.countArtefacts(`${this.player1.user.uid}`),y&&await this.setMovePawn(I,`${this.player1.user.uid}`),t&&await this.setPickCoin(`${this.player1.user.uid}`),this.wonByArt===""&&this.wonByAggressive===""&&this.pickCoin===""&&this.upgradeTurnAndMove(`${this.player2.user.uid}`)}else{this.player2.resources.coins.find(c=>c==="cash6n4special")&&s===0&&a.cost[0]==="specialChar"&&this.player2.resources.specialChars.find(c=>c===a.valueCost[0])&&(G=4);const f=ya(a,this.player2);if(this.player2.cards[a.color].push({...a,taken:"inPlayerBoard"}),a.color==="red"&&a.power.forEach((c,o)=>{c==="attack"&&(this.player2.resources.coins.find(h=>h==="attack1")?I=a.valuePower[o]+1:I=a.valuePower[o],y=!0)}),a.color==="green"&&(r=!0,a.power.forEach((c,o)=>{if(c==="artefact"&&this.player2.resources.artefacts.length!==0){let h=0;this.player2.resources.artefacts.forEach(j=>{j===a.valuePower[o]&&h++}),h===2&&(t=!0)}})),a.color==="purple")switch(a.valuePower[0]){case 1:{const c=this.player1.cards.yellow.length,o=this.player2.cards.yellow.length,h=c>o?c:o;f.cash+=h;break}case 2:{const c=this.player1.cards.brown.length+this.player1.cards.grey.length,o=this.player2.cards.brown.length+this.player1.cards.grey.length,h=c>o?c:o;f.cash+=h;break}case 4:{const c=this.player1.cards.blue.length,o=this.player2.cards.blue.length,h=c>o?c:o;f.cash+=h;break}case 5:{const c=this.player1.cards.green.length,o=this.player2.cards.green.length,h=c>o?c:o;f.cash+=h;break}case 7:{const c=this.player1.cards.red.length,o=this.player2.cards.red.length,h=c>o?c:o;f.cash+=h;break}}if(await w(W,{"player2.points":this.player2.points,"player2.cards":this.player2.cards,"player2.resources":{...f,cash:f.cash+G-s}}),s>0&&this.player1.resources.coins.find(c=>c==="cashBack")){let c=s;a.cost.find((o,h)=>o==="cash"?(c-=a.valueCost[h],w(W,{"player1.resources.cash":re(c)}),!0):!1)}r&&await this.countArtefacts(`${this.player2.user.uid}`),y&&await this.setMovePawn(I,`${this.player2.user.uid}`),t&&await this.setPickCoin(`${this.player2.user.uid}`),this.wonByArt===""&&this.wonByAggressive===""&&this.pickCoin===""&&(this.turn===this.player1.user.uid&&l?this.player1.resources.coins.find(c=>c==="repeatWonder")?this.upgradeTurnAndMove(`${this.player1.user.uid}`):this.upgradeTurnAndMove(`${this.player2.user.uid}`):this.turn===this.player2.user.uid&&l?this.player2.resources.coins.find(c=>c==="repeatWonder")?this.upgradeTurnAndMove(`${this.player2.user.uid}`):this.upgradeTurnAndMove(`${this.player1.user.uid}`):await this.upgradeTurnAndMove(`${this.player1.user.uid}`))}this.unselectCard(),this.isLoading=!1},async setCardGraveyard(s){var a;let l={};if(this.tier==="I"||s==="I"?(this.tierOneCards=this.$state.tierOneCards.map(t=>(t.id===this.selectedCard.id&&(l=t),{...t,taken:t.id===this.selectedCard.id?"graveyard":t.taken,coversBy:t!=null&&t.coversBy?t.coversBy.filter(r=>r!==this.selectedCard.id):[]})),await w(W,{tierICards:this.tierOneCards})):this.tier==="II"||s==="II"?(this.tierTwoCards=this.$state.tierTwoCards.map(t=>(t.id===this.selectedCard.id&&(l=t),{...t,taken:t.id===this.selectedCard.id?"graveyard":t.taken,coversBy:t!=null&&t.coversBy?t.coversBy.filter(r=>r!==this.selectedCard.id):[]})),await w(W,{tierIICards:this.tierTwoCards})):(this.tier==="III"||s==="III"||s==="guild")&&(this.tierThreeCards=this.$state.tierThreeCards.map(t=>(t.id===this.selectedCard.id&&(l=t),{...t,taken:t.id===this.selectedCard.id?"graveyard":t.taken,coversBy:t!=null&&t.coversBy?t.coversBy.filter(r=>r!==this.selectedCard.id):[]})),await w(W,{tierIIICards:this.tierThreeCards})),this.isLoading=!0,this.graveyard.push({...l,taken:"graveyard"}),s)if(this.turn===this.player1.user.uid){const t={...this.player2.resources};if(l.color==="brown"){switch(l.power[0]){case"clay":t.clayValue-=l.valuePower[0];break;case"brick":t.brickValue-=l.valuePower[0];break;case"wood":t.woodValue-=l.valuePower[0];break}await w(W,{"player2.resources":t,graveyard:this.graveyard,"player2.cards.brown":Ce({...l,taken:"inPlayerBoard"})})}else if(l.color==="grey"){switch(l.power[0]){case"paper":t.paperValue-=l.valuePower[0];break;case"glass":t.glassValue-=l.valuePower[0];break}await w(W,{"player2.resources":t,graveyard:this.graveyard,"player2.cards.grey":Ce({...l,taken:"inPlayerBoard"})})}this.player1.resources.coins.find(r=>r==="repeatWonder")?this.upgradeTurnAndMove(`${this.player1.user.uid}`):this.upgradeTurnAndMove(`${this.player2.user.uid}`)}else{const t={...this.player1.resources};if(l.color==="brown"){switch(l.power[0]){case"clay":t.clayValue-=l.valuePower[0];break;case"brick":t.brickValue-=l.valuePower[0];break;case"wood":t.woodValue-=l.valuePower[0];break}await w(W,{"player1.resources":t,graveyard:this.graveyard,"player1.cards.brown":Ce({...l,taken:"inPlayerBoard"})})}else if(l.color==="grey"){switch(l.power[0]){case"paper":t.paperValue-=l.valuePower[0];break;case"glass":t.glassValue-=l.valuePower[0];break}await w(W,{"player1.resources":t,graveyard:this.graveyard,"player1.cards.grey":Ce({...l,taken:"inPlayerBoard"})})}this.player2.resources.coins.find(r=>r==="repeatWonder")?this.upgradeTurnAndMove(`${this.player2.user.uid}`):this.upgradeTurnAndMove(`${this.player1.user.uid}`)}else if(this.turn===this.player1.user.uid){const t=2+this.player1.cards.yellow.length;await w(W,{"player1.resources.cash":re(t),graveyard:this.graveyard}),this.upgradeTurnAndMove(`${(a=this.player2.user)==null?void 0:a.uid}`)}else{const t=2+this.player2.cards.yellow.length;await w(W,{"player2.resources.cash":re(t),graveyard:this.graveyard}),this.upgradeTurnAndMove(`${this.player1.user.uid}`)}this.unselectCard(),this.isLoading=!1},async setCardToWonder(s){let l={},a={},t=!1,r=0,y=!1,I=!1,G=!1,f=!1,c=!1;if(this.tier==="I"?(this.tierOneCards=this.$state.tierOneCards.map(o=>(o.id===this.selectedCard.id&&(l=o),{...o,taken:o.id===this.selectedCard.id?"inWonder":o.taken,coversBy:o!=null&&o.coversBy?o.coversBy.filter(h=>h!==this.selectedCard.id):[]})),await w(W,{tierICards:this.tierOneCards})):this.tier==="II"?(this.tierTwoCards=this.$state.tierTwoCards.map(o=>(o.id===this.selectedCard.id&&(l=o),{...o,taken:o.id===this.selectedCard.id?"inWonder":o.taken,coversBy:o!=null&&o.coversBy?o.coversBy.filter(h=>h!==this.selectedCard.id):[]})),await w(W,{tierIICards:this.tierTwoCards})):this.tier==="III"&&(this.tierThreeCards=this.$state.tierThreeCards.map(o=>(o.id===this.selectedCard.id&&(l=o),{...o,taken:o.id===this.selectedCard.id?"inWonder":o.taken,coversBy:o!=null&&o.coversBy?o.coversBy.filter(h=>h!==this.selectedCard.id):[]})),await w(W,{tierIIICards:this.tierThreeCards})),a=this.selectedWonder,a.activated=l.tier,this.isLoading=!0,this.turn===this.player1.user.uid){const o=fa(a,this.player1);o.resources.cash-=s,o.resources.coins.find(M=>M==="repeatWonder")&&(y=!0),s>0&&this.player2.resources.coins.find(M=>M==="cashBack")&&w(W,{"player2.resources.cash":re(s)}),a.power.forEach(async(M,L)=>{M==="attack"?(t=!0,r=a.valuePower[L]):M==="break"?a.valuePower[L]===1?this.player2.cards.brown.length>0&&(I=!0):a.valuePower[L]===2?this.player2.cards.grey.length>0&&(G=!0):a.valuePower[L]===3&&await w(W,{"player2.resources.cash":this.player2.resources.cash<=3?0:re(-3)}):M==="effect"&&(a.valuePower[L]===1?y=!0:a.valuePower[L]===2?f=!0:a.valuePower[L]===3&&(c=!0))}),t&&this.setMovePawn(r,`${this.player1.user.uid}`),c&&await this.setPickCoinOfThree(`${this.player1.user.uid}`),f&&await this.setPickCardFromGraveyard(`${this.player1.user.uid}`),I&&await this.setDestroyBrown(`${this.player1.user.uid}`),G&&await this.setDestroyGrey(`${this.player1.user.uid}`);const h=o.wonderCards.filter(M=>M.activated!=="none"),j=this.player2.wonderCards.filter(M=>M.activated!=="none");h.length===3&&j.length===4?await w(W,{player1:{...o,wonderCards:h}}):h.length===4&&j.length===3?await w(W,{player1:o,"player2.wonderCards":j}):await w(W,{player1:o}),this.wonByArt===""&&this.wonByAggressive===""&&this.pickCardFromGraveyard===""&&this.pickCoinOfThree===""&&this.destroyBrown===""&&this.destroyGrey===""&&(y&&this.move!==19&&this.move!==39?this.upgradeTurnAndMove(`${this.player1.user.uid}`):this.upgradeTurnAndMove(`${this.player2.user.uid}`))}else{const o=fa(a,this.player2);o.resources.cash-=s,o.resources.coins.find(M=>M==="repeatWonder")&&(y=!0),s>0&&this.player1.resources.coins.find(M=>M==="cashBack")&&w(W,{"player1.resources.cash":re(s)}),a.power.forEach(async(M,L)=>{M==="attack"?(t=!0,r=a.valuePower[L]):M==="break"?a.valuePower[L]===1?this.player1.cards.brown.length>0&&(I=!0):a.valuePower[L]===2?this.player1.cards.grey.length>0&&(G=!0):a.valuePower[L]===3&&await w(W,{"player1.resources.cash":this.player1.resources.cash<=3?0:re(-3)}):M==="effect"&&(a.valuePower[L]===1?y=!0:a.valuePower[L]===2?f=!0:a.valuePower[L]===3&&(c=!0))}),t&&this.setMovePawn(r,`${this.player2.user.uid}`),c&&await this.setPickCoinOfThree(`${this.player2.user.uid}`),f&&await this.setPickCardFromGraveyard(`${this.player2.user.uid}`),I&&await this.setDestroyBrown(`${this.player2.user.uid}`),G&&await this.setDestroyGrey(`${this.player2.user.uid}`);const h=this.player1.wonderCards.filter(M=>M.activated!=="none"),j=o.wonderCards.filter(M=>M.activated!=="none");h.length===3&&j.length===4?await w(W,{"player1.wonderCards":h,player2:o}):h.length===4&&j.length===3?await w(W,{player2:{...o,wonderCards:j}}):await w(W,{player2:o}),this.wonByArt===""&&this.wonByAggressive===""&&this.pickCardFromGraveyard===""&&this.pickCoinOfThree===""&&this.destroyBrown===""&&this.destroyGrey===""&&(y&&this.move!==19&&this.move!==39?this.upgradeTurnAndMove(`${this.player2.user.uid}`):this.upgradeTurnAndMove(`${this.player1.user.uid}`))}this.unselectCard(),this.isLoading=!1}}}),is=ke({__name:"DuelGameLayOutTiersComponent",props:{card:{},x:{},y:{},reversColor:{},cash1P:{},cash2P:{},user:{}},setup(s){const l=s,a=Se(),{selectedCard:t,player1:r,player2:y}=$e(a),{card:I}=Ge(l);return(G,f)=>{var c,o,h;return e(I).taken==="inGame"?(d(),b("div",{key:0,class:V(["cardWrapper",((c=e(I).coversBy)==null?void 0:c.length)!==0&&e(I).hide&&"cardHide",((o=e(I).coversBy)==null?void 0:o.length)===0&&"canSelect",e(t).id===e(I).id&&"selected"]),style:ee(`--x:${G.x}%; --y:${G.y}%; --z:${e(I).id}; --reversCol:${G.reversColor}; cursor: ${((h=e(I).coversBy)==null?void 0:h.length)===0?"pointer":"default"};`)},[oe(ie,{card:e(I),cash1P:G.user.uid===e(r).user.uid?G.cash1P:G.cash2P,cash2P:G.user.uid===e(r).user.uid?G.cash2P:G.cash1P,res1P:G.user.uid===e(r).user.uid?e(r).resources.cash:e(y).resources.cash,res2P:G.user.uid===e(r).user.uid?e(y).resources.cash:e(r).resources.cash},null,8,["card","cash1P","cash2P","res1P","res2P"])],6)):(d(),b("div",{key:1,class:V(["cardWrapper","invisible"]),style:ee(`--x:${G.x}%; --y:${G.y}%; --z:-10;`)},[oe(ie,{card:e(I)},null,8,["card"])],4))}}});const ea=ge(is,[["__scopeId","data-v-04dc6c64"]]),ns=ke({__name:"DuelGameWonderComponent",props:{card:{},cash:{},resCash:{}},setup(s){const l=s,{card:a}=Ge(l),t=m(0),r=m(0),y=m(0),I=m(0),G=m(0),f=m(0),c=m(0),o=m(0),h=m(0),j=m(0),M=m(0);m(0);const L=m("");aa(()=>{a.value.power.forEach((X,U)=>{switch(X){case"effect":t.value=a.value.valuePower[U];break;case"cash":r.value=a.value.valuePower[U];break;case"break":y.value=a.value.valuePower[U];break;case"materials":I.value=a.value.valuePower[U];break;case"attack":G.value=a.value.valuePower[U];break;case"points":f.value=a.value.valuePower[U];break}}),a.value.cost.forEach((X,U)=>{switch(X){case"clay":c.value=a.value.valueCost[U];break;case"brick":o.value=a.value.valueCost[U];break;case"wood":h.value=a.value.valueCost[U];break;case"paper":j.value=a.value.valueCost[U];break;case"glass":M.value=a.value.valueCost[U];break}}),F()}),Ae(()=>a.value.activated,()=>{F()});function F(){switch(a.value.activated){case"I":L.value="calc(var(--width-tier) * -10) calc(var(--height-tier) * -6)";break;case"II":L.value="calc(var(--width-tier) * -11) calc(var(--height-tier) * -6)";break;case"III":L.value="0 calc(var(--height-tier) * -7)";break;case"guild":L.value="calc(var(--width-tier) * -1) calc(var(--height-tier) * -7)";break}}return(X,U)=>(d(),b("div",{class:V(["cardWrapper"]),style:ee(`--bg-position: ${L.value};`)},[n("div",{class:V(["card",`card${e(a).id}`])},null,2),n("div",{class:V(["tierCardForWonder",L.value!==""&&"getImg"])},null,2),e(a).taken&&e(a).activated==="none"?(d(),b("div",{key:0,class:V(["cashSum",X.resCash!==void 0&&X.cash!==void 0&&X.cash>X.resCash&&"toHighPrice"])},$(X.cash),3)):z("",!0)],4))}});const fe=ge(ns,[["__scopeId","data-v-0a5b06d9"]]),us=ke({__name:"DuelGameCoinComponent",props:{coin:{}},setup(s){const l=s,a=m(""),{coin:t}=Ge(l);return aa(()=>{switch(t.value){case"artefact7":a.value="7";break;case"attack1":a.value="1+";break;case"point7":a.value="7";break;case"pointX3":a.value="3x ";break;case"cash6n4special":a.value="6$+";break;case"lowCostWonder":a.value="$$";break;case"lowCostBlue":a.value="$$";break;case"cashBack":a.value="$";break;case"point4n6cash":a.value="6$";break;case"repeatWonder":a.value="";break;default:a.value=t.value;break}}),(r,y)=>(d(),b("span",{class:V(["boardSingleCoin",`${e(t)}`])},null,2))}});const Ke=ge(us,[["__scopeId","data-v-8db5947e"]]),cs={class:"duel"},ds={class:V(["punishment"])},vs=ke({__name:"DuelGameBoardDuelComponent",props:{isMyTurn:{type:Boolean},user:{}},emits:["coin-selected"],setup(s,{emit:l}){const a=s,t=Se(),{board:r,pickCoin:y,player2:I,wonByAggressive:G}=$e(t),{isMyTurn:f}=Ge(a);return(c,o)=>(d(),b("section",cs,[n("div",ds,[n("div",{class:V([c.user.uid!==e(I).user.uid?"punishment1":"punishment4"]),style:ee(e(r).punishment1?"":"opacity: 0;")},null,6),n("div",{class:V([c.user.uid!==e(I).user.uid?"punishment2":"punishment3"]),style:ee(e(r).punishment2?"":"opacity: 0;")},null,6),n("div",{class:V([c.user.uid!==e(I).user.uid?"punishment3":"punishment2"]),style:ee(e(r).punishment3?"":"opacity: 0;")},null,6),n("div",{class:V([c.user.uid!==e(I).user.uid?"punishment4":"punishment1"]),style:ee(e(r).punishment4?"":"opacity: 0;")},null,6)]),n("div",{class:V(["boardPawn",c.user.uid===e(I).user.uid&&"rotatePawnDuel"])},[n("div",{class:V(["pawn",e(G)!==""&&"pawnWin"]),style:ee(`--position:${e(r).pawn}`)},null,6)],2),n("div",{class:V(["boardCoins",e(f)&&e(y)!==""&&"selectCoin"])},[(d(!0),b(q,null,Q(e(r).coins,h=>(d(),N(Ke,{key:h,coin:h,style:ee(e(f)&&e(y)!==""&&"cursor: pointer;"),onClick:j=>e(f)&&e(y)!==""?l("coin-selected",h):null},null,8,["coin","style","onClick"]))),128))],2)]))}});const ps=ge(vs,[["__scopeId","data-v-789bdfdd"]]),hs=ke({__name:"DuelGameGraveyardComponent",props:{isMyTurn:{type:Boolean}},emits:["pick-card-from-graveyard"],setup(s,{emit:l}){const a=Se(),{graveyard:t,pickCardFromGraveyard:r}=$e(a);return(y,I)=>(d(),b("section",{class:V(["graveyard","customInput",y.isMyTurn&&e(r)!==""&&"selectFromGraveyard"]),style:ee(e(t).length>=24?"overflow-y: scroll;":"")},[(d(!0),b(q,null,Q(e(t),G=>(d(),N(ie,{key:G.id,card:G,small:"",style:ee(y.isMyTurn&&e(r)!==""&&"cursor: pointer;"),onClick:f=>y.isMyTurn&&e(r)!==""?l("pick-card-from-graveyard",G):null},null,8,["card","style","onClick"]))),128))],6))}});const ys=ge(hs,[["__scopeId","data-v-4e392cbe"]]),fs={class:"playerInfo"},ws={key:0,class:"surrenderPopUp"},ms={key:0,class:"animateHand"},Cs=["disabled"],ks={key:0,class:"animateHand"},gs=["disabled"],bs=ke({__name:"DuelGamePlayersInfoComponent",props:{user:{}},emits:["prepare-game-to-remove-from-db"],setup(s,{emit:l}){const a=s,t=Se(),{player1:r,player2:y,turn:I}=$e(t),{user:G}=Ge(a),f=m("Kick player"),c=m("Surrender"),o=m("Do you really want to give up?!"),h=m(90),j=m(90),M=m(!1);return(L,F)=>{const X=sa("ion-icon");return d(),b("section",fs,[M.value?(d(),b("div",ws,[n("p",null,$(o.value),1),n("div",null,[n("button",{class:V(["customInput","reverseInput"]),onClick:F[0]||(F[0]=async()=>(await l("prepare-game-to-remove-from-db",e(G)),M.value=!1))},$("Yes")),n("button",{class:V(["customInput","reverseInput"]),onClick:F[1]||(F[1]=()=>M.value=!1)},$("NO!"))])])):z("",!0),n("div",{class:V(["player1info","customInput",e(I)===e(r).user.uid&&"boldParagraf"])},[n("p",null,$(`Nick: ${e(r).user.displayName||e(r).user.email}`),1),n("p",null,$(`Timer: ${h.value}`),1),e(I)===e(r).user.uid?(d(),b("div",ms,[oe(X,{name:"time-sharp"})])):z("",!0),n("button",{disabled:e(y).user.uid===e(G).uid&&j.value>0,class:V(["customButton"]),onClick:F[2]||(F[2]=()=>e(r).user.uid===e(G).uid?M.value=!0:null)},$(e(r).user.uid===e(G).uid?c.value:f.value),9,Cs)],2),n("div",{class:V(["player2info","customInput",e(I)===e(y).user.uid&&"boldParagraf"])},[n("p",null,$(`Nick: ${e(y).user.displayName||e(y).user.email}`),1),n("p",null,$(`Timer: ${j.value}`),1),e(I)===e(y).user.uid?(d(),b("div",ks,[oe(X,{name:"time-sharp"})])):z("",!0),n("button",{disabled:e(r).user.uid===e(G).uid&&h.value>0,class:V(["customButton"]),onClick:F[3]||(F[3]=()=>e(y).user.uid===e(G).uid?M.value=!0:null)},$(e(y).user.uid===e(G).uid?c.value:f.value),9,gs)],2)])}}});const Is=ge(bs,[["__scopeId","data-v-e7f704e0"]]),Ps={class:"playerCardContainer"},_s={class:"playerCardColorContainer playerCard3"},Bs={class:"playerCardColorContainer playerCard4"},$s={class:"playerCardColorContainer playerCard5"},Gs={class:"countArt"},Ts={class:"playerCardColorContainer playerCard7"},Ws={class:"playerPointsContainer"},As={class:"playerResContainer"},Ss={key:0,class:"animateHand"},Ms={class:"cashPointsContainer"},Os={class:"cashSum"},Ds={class:"cashSum pointSum"},Fs={class:"playerCoins customInput"},Vs={class:"playerCardContainer"},Es={class:"playerCardColorContainer playerCard3"},Rs={class:"playerCardColorContainer playerCard4"},Ns={class:"playerCardColorContainer playerCard5"},Ls={class:"countArt"},Hs={class:"playerCardColorContainer playerCard7"},js={class:"playerPointsContainer"},Us={class:"playerResContainer"},Xs={key:0,class:"animateHand"},zs={class:"cashPointsContainer"},Ks={class:"cashSum"},Ys={class:"cashSum pointSum"},qs={class:"playerCoins customInput"},Qs=ke({__name:"DuelGamePlayersResComponent",props:{isMyTurn:{type:Boolean},user:{},selectWonderCard:{type:Boolean}},emits:["destrooy-enemy-card-selected"],setup(s,{emit:l}){const a=s,t=Se(),{player1:r,player2:y,turn:I,tier:G,destroyBrown:f,destroyGrey:c,wonByArt:o}=$e(t),{user:h}=Ge(a),j=va("showPrice"),M=va("wonderCardSelected");function L(F){if(F===r.value.user.uid){let X=0;r.value.resources.coins.find(p=>p==="artefact7")&&(X+=1);const U=r.value.cards.green.map(p=>p.valuePower[0]);return X+=[...new Set(U)].length}else{let X=0;y.value.resources.coins.find(p=>p==="artefact7")&&(X+=1);const U=y.value.cards.green.map(p=>p.valuePower[0]);return X+=[...new Set(U)].length}}return(F,X)=>{const U=sa("ion-icon");return d(),b(q,null,[n("section",{class:V(["wonders",e(h).uid===e(r).user.uid?"wonders1":"wonders2","customInput"])},[(d(!0),b(q,null,Q(e(r).wonderCards,p=>(d(),N(fe,{card:p,key:p.id,cash:e(j)(p,`${e(r).user.uid}`),resCash:e(r).resources.cash,class:V([F.selectWonderCard&&F.isMyTurn&&e(h).uid===e(r).user.uid&&e(j)(p,`${e(r).user.uid}`)<=e(r).resources.cash&&"selectWonderFromPlayer"]),onClick:te=>e(G)!=="prepare"&&F.selectWonderCard?e(M)(p,e(r).resources.cash):null},null,8,["card","cash","resCash","class","onClick"]))),128))],2),n("section",{class:V(["playerSection",e(h).uid===e(r).user.uid?"player1":"player2"])},[n("div",Ps,[n("div",{class:V(["playerCardColorContainer","playerCard1",e(h).uid===e(y).user.uid&&F.isMyTurn&&e(f)!==""&&"selectCardToDestroy"])},[(d(!0),b(q,null,Q(e(r).cards.brown,p=>(d(),N(ie,{key:p.id,card:p,small:"",style:ee(e(h).uid===e(y).user.uid&&F.isMyTurn&&e(f)!==""?"cursor: pointer;":""),onClick:te=>e(h).uid===e(y).user.uid&&F.isMyTurn&&e(f)!==""?l("destrooy-enemy-card-selected",p,"brown"):null},null,8,["card","style","onClick"]))),128))],2),n("div",{class:V(["playerCardColorContainer","playerCard2",e(h).uid===e(y).user.uid&&F.isMyTurn&&e(c)!==""&&"selectCardToDestroy"])},[(d(!0),b(q,null,Q(e(r).cards.grey,p=>(d(),N(ie,{key:p.id,card:p,small:"",style:ee(e(h).uid===e(y).user.uid&&F.isMyTurn&&e(c)!==""?"cursor: pointer;":""),onClick:te=>e(h).uid===e(y).user.uid&&F.isMyTurn&&e(c)!==""?l("destrooy-enemy-card-selected",p,"grey"):null},null,8,["card","style","onClick"]))),128))],2),n("div",_s,[(d(!0),b(q,null,Q(e(r).cards.yellow,p=>(d(),N(ie,{key:p.id,card:p,small:""},null,8,["card"]))),128))]),n("div",Bs,[(d(!0),b(q,null,Q(e(r).cards.blue,p=>(d(),N(ie,{key:p.id,card:p,small:""},null,8,["card"]))),128))]),n("div",$s,[(d(!0),b(q,null,Q(e(r).cards.red,p=>(d(),N(ie,{key:p.id,card:p,small:""},null,8,["card"]))),128))]),n("div",{class:V(["playerCardColorContainer","playerCard6",e(o)!==""&&"artWin"])},[n("div",Gs,$(L(`${e(r).user.uid}`)+"/6"),1),(d(!0),b(q,null,Q(e(r).cards.green.sort((p,te)=>p.valuePower[0]-te.valuePower[0]),p=>(d(),N(ie,{key:p.id,card:p,small:""},null,8,["card"]))),128))],2),n("div",Ts,[(d(!0),b(q,null,Q(e(r).cards.purple,p=>(d(),N(ie,{key:p.id,card:p,small:""},null,8,["card"]))),128))])]),n("div",Ws,[n("div",As,[e(I)===e(r).user.uid?(d(),b("div",Ss,[oe(U,{name:"time-sharp"})])):z("",!0),n("p",{style:ee(e(I)===e(r).user.uid?"font-weight: bold;":"")},$(`${e(r).user.displayName||e(r).user.email}`),5),n("p",{style:ee(e(I)===e(r).user.uid?"font-weight: bold;":"")},$("Status: online"),4),n("div",Ms,[n("div",Os,$(e(r).resources.cash),1),n("div",Ds,$(e(r).points),1)])]),n("div",Fs,[(d(!0),b(q,null,Q(e(r).resources.coins,p=>(d(),N(Ke,{key:p,coin:p},null,8,["coin"]))),128))])])],2),n("section",{class:V(["wonders",e(h).uid===e(r).user.uid?"wonders2":"wonders1","customInput"])},[(d(!0),b(q,null,Q(e(y).wonderCards,p=>(d(),N(fe,{card:p,key:p.id,cash:e(j)(p,`${e(y).user.uid}`),resCash:e(y).resources.cash,class:V([F.selectWonderCard&&F.isMyTurn&&e(h).uid===e(y).user.uid&&e(j)(p,`${e(y).user.uid}`)<=e(y).resources.cash&&"selectWonderFromPlayer"]),onClick:te=>e(G)!=="prepare"&&F.selectWonderCard?e(M)(p,e(y).resources.cash):null},null,8,["card","cash","resCash","class","onClick"]))),128))],2),n("section",{class:V(["playerSection",e(h).uid===e(r).user.uid?"player2":"player1"])},[n("div",Vs,[n("div",{class:V(["playerCardColorContainer","playerCard1",e(h).uid===e(r).user.uid&&F.isMyTurn&&e(f)!==""&&"selectCardToDestroy"])},[(d(!0),b(q,null,Q(e(y).cards.brown,p=>(d(),N(ie,{key:p.id,card:p,small:"",style:ee(e(h).uid===e(r).user.uid&&F.isMyTurn&&e(f)!==""?"cursor: pointer;":""),onClick:te=>e(h).uid===e(r).user.uid&&F.isMyTurn&&e(f)!==""?l("destrooy-enemy-card-selected",p,"brown"):null},null,8,["card","style","onClick"]))),128))],2),n("div",{class:V(["playerCardColorContainer","playerCard2",e(h).uid===e(r).user.uid&&F.isMyTurn&&e(c)!==""&&"selectCardToDestroy"])},[(d(!0),b(q,null,Q(e(y).cards.grey,p=>(d(),N(ie,{key:p.id,card:p,small:"",style:ee(e(h).uid===e(r).user.uid&&F.isMyTurn&&e(c)!==""?"cursor: pointer;":""),onClick:te=>e(h).uid===e(r).user.uid&&F.isMyTurn&&e(c)!==""?l("destrooy-enemy-card-selected",p,"grey"):null},null,8,["card","style","onClick"]))),128))],2),n("div",Es,[(d(!0),b(q,null,Q(e(y).cards.yellow,p=>(d(),N(ie,{key:p.id,card:p,small:""},null,8,["card"]))),128))]),n("div",Rs,[(d(!0),b(q,null,Q(e(y).cards.blue,p=>(d(),N(ie,{key:p.id,card:p,small:""},null,8,["card"]))),128))]),n("div",Ns,[(d(!0),b(q,null,Q(e(y).cards.red,p=>(d(),N(ie,{key:p.id,card:p,small:""},null,8,["card"]))),128))]),n("div",{class:V(["playerCardColorContainer","playerCard6",e(o)!==""&&"artWin"])},[n("div",Ls,$(L(`${e(y).user.uid}`)+"/6"),1),(d(!0),b(q,null,Q(e(y).cards.green.sort((p,te)=>p.valuePower[0]-te.valuePower[0]),p=>(d(),N(ie,{key:p.id,card:p,small:""},null,8,["card"]))),128))],2),n("div",Hs,[(d(!0),b(q,null,Q(e(y).cards.purple,p=>(d(),N(ie,{key:p.id,card:p,small:""},null,8,["card"]))),128))])]),n("div",js,[n("div",Us,[e(I)===e(y).user.uid?(d(),b("div",Xs,[oe(U,{name:"time-sharp"})])):z("",!0),n("p",{style:ee(e(I)===e(y).user.uid?"font-weight: bold;":"")},$(`${e(y).user.displayName||e(y).user.email}`),5),n("p",{style:ee(e(I)===e(y).user.uid?"font-weight: bold;":"")},$("Status: online"),4),n("div",zs,[n("div",Ks,$(e(y).resources.cash),1),n("div",Ys,$(e(y).points),1)])]),n("div",qs,[(d(!0),b(q,null,Q(e(y).resources.coins,p=>(d(),N(Ke,{key:p,coin:p},null,8,["coin"]))),128))])])],2)],64)}}});const Js=ge(Qs,[["__scopeId","data-v-6f9dd866"]]),Zs="/vue-project/assets/win-d87fbc05.mp3",xs="/vue-project/assets/lost-7a2664bb.mp3",Ye=s=>(za("data-v-c6d02750"),s=s(),Ka(),s),er={class:"header"},ar={class:"wrapper"},sr={key:0,class:"loading"},rr={key:1,class:"cards cardsWonder"},tr={key:0,class:"pickWonders"},lr={key:1,class:"pickWonders"},or={key:2,class:"cards cardsTier"},ir={key:3,class:"cards cardsTier"},nr={key:4,class:"cards cardsTier"},ur={key:5,class:"cards countPoints"},cr={class:"containerPoints customInput"},dr={class:"currentPoints"},vr={class:"cashPoints"},pr={class:"purplePoints"},hr=Ye(()=>n("div",{class:"miniCard"},null,-1)),yr={class:"coinsPoints"},fr=Ye(()=>n("div",{class:"miniCoin"},null,-1)),wr={class:"pawnPoints"},mr={class:"sumPoints"},Cr={class:"containerPoints customInput"},kr={class:"currentPoints"},gr={class:"cashPoints"},br={class:"purplePoints"},Ir=Ye(()=>n("div",{class:"miniCard"},null,-1)),Pr={class:"coinsPoints"},_r=Ye(()=>n("div",{class:"miniCoin"},null,-1)),Br={class:"pawnPoints"},$r={class:"sumPoints"},Gr={key:6,class:"playerAction"},Tr=["disabled"],Wr=["disabled"],Ar=["disabled"],Sr={key:7,class:"playerAction"},Mr={style:"font-weight: bold;"},Or={key:8,class:"playerAction"},Dr={style:"font-weight: bold;"},Fr={key:9,class:"playerAction"},Vr={style:"font-weight: bold;"},Er={key:10,class:"playerAction"},Rr={key:11,class:"playerAction"},Nr={key:12,class:"playerAction"},Lr={key:13,class:"playerAction"},Hr={key:14,class:"playerAction"},jr={key:15,class:"playerAction"},Ur={key:16,class:"playerAction"},Xr={key:17,class:"playerAction"},zr=ke({__name:"TheDuelGameBoard",setup(s){pa("showPrice",pe),pa("wonderCardSelected",Aa);const l=m("Duel Game"),a=m("Buy"),t=m("Sell"),r=m("Build Wonder"),y=m("Go Back"),I=m("Who Starts?"),G=m("Pick Coin!"),f=m("Pick one Coin of three!"),c=m("Pick card from graveyard!"),o=m("Pick Wonder!"),h=m("Destroy Enemy Card!"),j=m("Winner By Artefacts: "),M=m("Winner By Aggressive: "),L=m("Winner By Surrender: "),F=m(new Audio(Qa)),X=m(new Audio(Zs)),U=m(new Audio(xs)),p=m(0),te=m(0),Me=m(20),we=m(Ja(function(){De.push("/feed")},Me.value*1e3)),Z=Se(),ue=La(),{duel:he}=$e(ue),{tierOneCards:H,tierTwoCards:le,tierThreeCards:K,wonderCards:O,graveyard:Kr,player1:P,player2:S,board:ve,turn:ye,tier:me,move:Ie,theRestOfCoins:qe,pickCoin:Qe,pickCoinOfThree:Je,pickCardFromGraveyard:ra,destroyBrown:ta,destroyGrey:la,selectWondersForPlayers:oa,selectWondersForPlayersMove:ia,chooseWhoWillStart:Ve,wonByArt:Pe,wonByAggressive:_e,wonBySurr:Oe,selectedCard:ne,selectedWonder:Ee,isLoading:E}=$e(Z),na=Ue(Xe,"users"),Ba=Ue(Xe,"gameStatus"),ua=Fe(Ba,"Duel"),$a=Ue(Xe,"gameDuel"),J=Fe($a,"table1"),ae=m({}),De=Ha(),se=m(!1),Te=m(!1),Y=Le(()=>ye.value===ae.value.uid),ca=Le(()=>{var u,i,C,A;return((u=O.value[0])==null?void 0:u.taken)&&((i=O.value[1])==null?void 0:i.taken)&&((C=O.value[2])==null?void 0:C.taken)&&((A=O.value[3])==null?void 0:A.taken)}),We=Le(()=>{var u;return(u=ne.value)!=null&&u.id?pe(ne.value,`${ae.value.uid}`):-1}),Ga=Le(()=>{if(!Y.value||!ne.value.id)return!1;if(ae.value.uid===P.value.user.uid)if(P.value.wonderCards.find(u=>u.activated==="none")){let u=!1;return P.value.wonderCards.forEach(i=>{let C=pe(i,`${ae.value.uid}`);i.activated==="none"&&C<=P.value.resources.cash&&(u=!0)}),u}else return!1;else if(S.value.wonderCards.find(u=>u.activated==="none")){let u=!1;return S.value.wonderCards.forEach(i=>{let C=pe(i,`${ae.value.uid}`);i.activated==="none"&&C<=S.value.resources.cash&&(u=!0)}),u}else return!1});Ae([()=>Ee.value,()=>ne.value],()=>{var u,i;(!((u=Ee.value)!=null&&u.id)||!((i=ne.value)!=null&&i.id))&&(Te.value=!1)}),Ae(()=>S.value.wonderCards,async()=>{E.value=!0,S.value.wonderCards.length===4&&Ie.value===0&&(await w(J,{tier:"I"}),se.value=!0),E.value=!1}),Ae(()=>Ie.value,async()=>{se.value=!0,ye.value===ae.value.uid&&F.value.play(),Ie.value>=20&&Ie.value<40&&(E.value=!0,await w(J,{tier:"II"}),Ve.value&&Y.value&&(se.value=!1),E.value=!1),Ie.value>=40&&Ie.value<=60&&(E.value=!0,await w(J,{tier:"III"}),Ve.value&&Y.value&&(se.value=!1),E.value=!1),Ie.value===60&&(E.value=!0,se.value=!1,await w(J,{tier:"end"}),E.value=!1)}),Ae(()=>me.value,()=>{me.value==="end"&&(p.value=P.value.points+Math.floor(P.value.resources.cash/3)+(ve.value.pawn<=-6&&10||ve.value.pawn<=-3&&5||ve.value.pawn<=-1&&2||0)+Ne(P.value.resources.coins)+Re(P.value.cards.purple.map(u=>u.valuePower[0])),te.value=S.value.points+Math.floor(S.value.resources.cash/3)+(ve.value.pawn>=6&&10||ve.value.pawn>=3&&5||ve.value.pawn>=1&&2||0)+Ne(S.value.resources.coins)+Re(S.value.cards.purple.map(u=>u.valuePower[0])))}),Ae([()=>Pe.value,()=>_e.value,()=>Oe.value],async([u,i,C])=>{if(C!==""||u!==""||i!==""){C!==""&&(C===ae.value.uid?X.value.play():U.value.play()),u!==""&&(u===ae.value.uid?X.value.play():U.value.play()),i!==""&&(i===ae.value.uid?X.value.play():U.value.play());const A=he.value.players.map(g=>g.uid);await w(ua,{isStarted:!1,players:[]}),A.forEach(async g=>{await w(Fe(na,g),{game:"",readyToGame:!1,online:"online",timestamp:Ya()})}),await qa(J),we.value()}}),ha(async()=>{await ue.subFirebaseConnect()}),ha(async()=>{var k,x,D;E.value=!0;let u=!1;const i=await He(ua);if(await ja().then(async _=>{if(_)if(i.exists()){const v=i.data().players.find(T=>T.uid===_.uid);v?(ae.value={uid:v.uid,email:v.email,displayName:v.displayName,game:v.game,readyToGame:v.readyToGame,timestamp:v.timestamp,online:v.online},(v.game!=="Duel"||!v.readyToGame)&&(E.value=!1,u=!0)):(E.value=!1,u=!0)}else{const v=await He(Fe(na,_.uid));v.exists()?v.data().game!=="Duel"&&(E.value=!1,u=!0):(E.value=!1,u=!0)}}),u)return De.push("/feed"),null;const C=Be(ba,10),A=Be(Ia,8),g=await He(J);if(g.exists())console.log("Document data:",g.data()),!((k=g.data())!=null&&k.player2.user.uid)&&((x=g.data())==null||x.player1.user.uid,ae.value.uid);else{if(i.exists()&&i.data().players[0].uid===ae.value.uid){const v=i.data().players;await Ua(J,{player1:{...new ze,user:v[0]},player2:{...new ze,user:v[1]},selectWondersForPlayers:[v[0].uid,v[1].uid,v[1].uid,v[0].uid,v[1].uid,v[0].uid,v[0].uid,v[1].uid,v[0].uid],selectWondersForPlayersMove:0,chooseWhoWillStart:!1,turn:ae.value.uid,gameBoard:{...new _a,coins:[C[0],C[1],C[2],C[3],C[4]]},tierICards:xe(Be(ma,20),"I"),tierIICards:xe(Be(Ca,20),"II"),tierIIICards:xe(Be([...Be(ka,17),...Be(ga,3)],20),"III"),wonderCards:A,graveyard:[],theRestOfCoins:[C[5],C[6],C[7],C[8],C[9]],tier:"prepare",move:0,pickCoin:"",pickCoinOfThree:"",pickCardFromGraveyard:"",destroyBrown:"",destroyGrey:"",wonByArt:"",wonByAggressive:"",wonBySurr:""})}const _=await He(J);_.exists()?console.log("Document data second time:",_.data()):console.log("No such document!")}await Z.subFirebaseConnect(`${ae.value.uid}`),(me.value!=="prepare"||((D=g.data())==null?void 0:D.tier)!=="prepare")&&(se.value=!0),Qe.value!==""&&Y.value?(se.value=!1,ne.value={}):Je.value!==""&&Y.value?(se.value=!1,ne.value={}):ra.value!==""&&Y.value?(se.value=!1,ne.value={}):(ta.value!==""||la.value!=="")&&Y.value?(se.value=!1,ne.value={}):(Pe.value!==""||_e.value!==""||Oe.value!=="")&&(se.value=!1,ne.value={}),E.value=!1}),Xa(async()=>{we.value.cancel(),Z.unSubFirebaseConnect(),ue.unSubFirebaseConnect()});async function da(u){E.value=!0,await Z.upgradeTurnAndMove(`${u}`,!0),await w(J,{chooseWhoWillStart:!1}),se.value=!0,E.value=!1}function pe(u,i){if(!(u!=null&&u.id))return-1;let C=0,A=[],g=[],k=[],x=!1;const D=P.value.resources,_=S.value.resources;return P.value.user.uid===i?(A=[{type:"clay",val:D.clayOne?1:2+_.clayValue},{type:"brick",val:D.brickOne?1:2+_.brickValue},{type:"wood",val:D.woodOne?1:2+_.woodValue}],A=A.sort((v,T)=>T.val-v.val),g=[{type:"paper",val:D.paperGlassOne?1:2+_.paperValue},{type:"glass",val:D.paperGlassOne?1:2+_.glassValue}],g=g.sort((v,T)=>T.val-v.val),u.cost.forEach((v,T)=>{if(v==="specialChar")D.specialChars.find(B=>{if(B===u.valueCost[T])return x=!0,!0});else if(v==="cash")C+=u.valueCost[T];else if(v==="clay"){let B=u.valueCost[T]-D.clayValue;if(B<=0)return null;for(let R=0;R<B;R++)k.push("clay")}else if(v==="brick"){let B=u.valueCost[T]-D.brickValue;if(B<=0)return null;for(let R=0;R<B;R++)k.push("brick")}else if(v==="wood"){let B=u.valueCost[T]-D.woodValue;if(B<=0)return null;for(let R=0;R<B;R++)k.push("wood")}else if(v==="paper"){let B=u.valueCost[T]-D.paperValue;if(B<=0)return null;for(let R=0;R<B;R++)k.push("paper")}else if(v==="glass"){let B=u.valueCost[T]-D.glassValue;if(B<=0)return null;for(let R=0;R<B;R++)k.push("glass")}})):(A=[{type:"clay",val:_.clayOne?1:2+D.clayValue},{type:"brick",val:_.brickOne?1:2+D.brickValue},{type:"wood",val:_.woodOne?1:2+D.woodValue}],A=A.sort((v,T)=>T.val-v.val),g=[{type:"paper",val:_.paperGlassOne?1:2+D.paperValue},{type:"glass",val:_.paperGlassOne?1:2+D.glassValue}],g=g.sort((v,T)=>T.val-v.val),u.cost.forEach((v,T)=>{if(v==="specialChar")_.specialChars.find(B=>{if(B===u.valueCost[T])return x=!0,!0});else if(v==="cash")C+=u.valueCost[T];else if(v==="clay"){let B=u.valueCost[T]-_.clayValue;if(B<=0)return null;for(let R=0;R<B;R++)k.push("clay")}else if(v==="brick"){let B=u.valueCost[T]-_.brickValue;if(B<=0)return null;for(let R=0;R<B;R++)k.push("brick")}else if(v==="wood"){let B=u.valueCost[T]-_.woodValue;if(B<=0)return null;for(let R=0;R<B;R++)k.push("wood")}else if(v==="paper"){let B=u.valueCost[T]-_.paperValue;if(B<=0)return null;for(let R=0;R<B;R++)k.push("paper")}else if(v==="glass"){let B=u.valueCost[T]-_.glassValue;if(B<=0)return null;for(let R=0;R<B;R++)k.push("glass")}})),k=Ta(k,A,g,i),(u==null?void 0:u.color)==="blue"&&(P.value.user.uid===i?P.value.resources.coins.find(v=>v==="lowCostBlue")&&(k.shift(),k.shift()):S.value.resources.coins.find(v=>v==="lowCostBlue")&&(k.shift(),k.shift())),u!=null&&u.activated&&(P.value.user.uid===i?P.value.resources.coins.find(v=>v==="lowCostWonder")&&(k.shift(),k.shift()):S.value.resources.coins.find(v=>v==="lowCostWonder")&&(k.shift(),k.shift())),k.forEach(v=>{var T,B;C+=((T=A.find(({type:R})=>R===v))==null?void 0:T.val)||((B=g.find(({type:R})=>R===v))==null?void 0:B.val)||0}),x?0:C}function Ta(u,i,C,A){let g=u;const k=P.value.resources,x=S.value.resources;if(P.value.user.uid===A){for(let D=0;D<k.materialsCBW;D++){let _=!1,v=0;g.find((T,B)=>T===i[0].type?(_=!0,v=B,!0):!1),_?g.splice(v,1):(g.find((T,B)=>T===i[1].type?(_=!0,v=B,!0):!1),_?g.splice(v,1):(g.find((T,B)=>T===i[2].type?(_=!0,v=B,!0):!1),_&&g.splice(v,1)))}for(let D=0;D<k.materialsPG;D++){let _=!1,v=0;g.find((T,B)=>T===C[0].type?(_=!0,v=B,!0):!1),_?g.splice(v,1):(g.find((T,B)=>T===C[1].type?(_=!0,v=B,!0):!1),_&&g.splice(v,1))}}else{for(let D=0;D<x.materialsCBW;D++){let _=!1,v=0;g.find((T,B)=>T===i[0].type?(_=!0,v=B,!0):!1),_?g.splice(v,1):(g.find((T,B)=>T===i[1].type?(_=!0,v=B,!0):!1),_?g.splice(v,1):(g.find((T,B)=>T===i[2].type?(_=!0,v=B,!0):!1),_&&g.splice(v,1)))}for(let D=0;D<x.materialsPG;D++){let _=!1,v=0;g.find((T,B)=>T===C[0].type?(_=!0,v=B,!0):!1),_?g.splice(v,1):(g.find((T,B)=>T===C[1].type?(_=!0,v=B,!0):!1),_&&g.splice(v,1))}}return g}const be=async u=>{if(!Y.value||Oe.value!=="")return null;E.value=!0;let i={};const C=O.value.map(A=>A.id===u?(i={...A,taken:!0},i):A);ye.value===P.value.user.uid?(await w(J,{player1:{...P.value,wonderCards:[...P.value.wonderCards,{...i}]},wonderCards:C,selectWondersForPlayersMove:re(1)}),Z.upgradeTurnAndMove(`${oa.value[ia.value]}`,!0)):(await w(J,{player2:{...S.value,wonderCards:[...S.value.wonderCards,{...i}]},wonderCards:C,selectWondersForPlayersMove:re(1)}),Z.upgradeTurnAndMove(`${oa.value[ia.value]}`,!0)),E.value=!1},Ze=u=>{if(!Y.value||Ve.value||Pe.value||_e.value)return null;if(ne.value={},Ee.value={},Te.value=!1,!(u.coversBy&&u.coversBy.length>0)){if(u.taken!=="inGame")return;ne.value=u}},Wa=()=>{if(!Y.value)return null;Te.value=!0};function Aa(u,i){if(!Y.value)return null;let C=pe(u,`${ae.value.uid}`);if(C>i)return null;Ee.value=u,se.value=!1,Z.setCardToWonder(C)}const Sa=async u=>{E.value=!0,se.value=!1;let i=0;switch(u){case"point4n6cash":i+=6;break;case"cash6n4special":i+=6;break}ye.value===P.value.user.uid?(await w(J,{"gameBoard.coins":Ce(u),"player1.resources.coins":je(u),pickCoin:""}),i!==0&&await w(J,{"player1.resources.cash":re(6)})):(await w(J,{"gameBoard.coins":Ce(u),"player2.resources.coins":je(u),pickCoin:""}),i!==0&&await w(J,{"player2.resources.cash":re(6)})),Z.countArtefacts(ye.value),Pe.value===""&&_e.value===""&&Qe.value===""&&Z.upgradeTurnAndMove(ye.value===P.value.user.uid?`${S.value.user.uid}`:`${P.value.user.uid}`),E.value=!1},Ma=async u=>{E.value=!0,se.value=!1;let i=0;switch(u){case"point4n6cash":i+=6;break;case"cash6n4special":i+=6;break}ye.value===P.value.user.uid?(await w(J,{"gameBoard.coins":Ce(u),"player1.resources.coins":je(u),pickCoinOfThree:""}),i!==0&&await w(J,{"player1.resources.cash":re(6)})):(await w(J,{"gameBoard.coins":Ce(u),"player2.resources.coins":je(u),pickCoinOfThree:""}),i!==0&&await w(J,{"player2.resources.cash":re(6)})),Z.countArtefacts(ye.value),Pe.value===""&&_e.value===""&&Je.value===""&&(ye.value===P.value.user.uid?P.value.resources.coins.find(C=>C==="repeatWonder")?Z.upgradeTurnAndMove(`${P.value.user.uid}`):Z.upgradeTurnAndMove(`${S.value.user.uid}`):S.value.resources.coins.find(C=>C==="repeatWonder")?Z.upgradeTurnAndMove(`${S.value.user.uid}`):Z.upgradeTurnAndMove(`${P.value.user.uid}`)),E.value=!1},Oa=async u=>{E.value=!0,se.value=!1,await w(J,{graveyard:Ce(u),pickCardFromGraveyard:""}),ne.value=u,await Z.setCardTaken(0,u.tier),E.value=!1},Da=async(u,i)=>{E.value=!0,se.value=!1,i==="brown"?await w(J,{destroyBrown:""}):await w(J,{destroyGrey:""}),ne.value=u,await Z.setCardGraveyard(u.tier),E.value=!1},Re=u=>{let i=0;return u.forEach(C=>{if(C===1){const A=P.value.cards.yellow.length,g=S.value.cards.yellow.length;i+=A>g?A:g}if(C===2){const A=P.value.cards.brown.length+P.value.cards.grey.length,g=S.value.cards.brown.length+S.value.cards.grey.length;i+=A>g?A:g}if(C===3){const A=P.value.wonderCards.length,g=S.value.wonderCards.length;i+=A>g?A*2:g*2}if(C===4){const A=P.value.cards.blue.length,g=S.value.cards.blue.length;i+=A>g?A:g}if(C===5){const A=P.value.cards.green.length,g=S.value.cards.green.length;i+=A>g?A:g}if(C===1){const A=Math.floor(P.value.resources.cash/3),g=Math.floor(S.value.resources.cash/3);i+=A>g?A:g}if(C===7){const A=P.value.cards.red.length,g=S.value.cards.red.length;i+=A>g?A:g}}),i},Ne=u=>{let i=0;return u.forEach(C=>{C==="point4n6cash"&&(i+=4),C==="point7"&&(i+=7),C==="pointX3"&&(i+=3*u.length)}),i};async function Fa(u){var C;const i=(C=he.value.players.find(A=>A.uid!==u.uid))==null?void 0:C.uid;await w(J,{wonBySurr:i}),se.value=!1}return(u,i)=>{var A,g;const C=sa("ion-icon");return d(),b("main",null,[n("header",er,[n("h1",null,$(l.value),1)]),n("section",ar,[e(E)?(d(),b("div",sr,[oe(Za)])):z("",!0),oe(ps,{isMyTurn:Y.value,user:ae.value,onCoinSelected:Sa},null,8,["isMyTurn","user"]),oe(ys,{isMyTurn:Y.value,onPickCardFromGraveyard:Oa},null,8,["isMyTurn"]),oe(Is,{user:ae.value,onPrepareGameToRemoveFromDb:Fa},null,8,["user"]),oe(Js,{user:ae.value,selectWonderCard:Te.value,isMyTurn:Y.value,onDestrooyEnemyCardSelected:Da},null,8,["user","selectWonderCard","isMyTurn"]),e(me)==="prepare"?(d(),b("section",rr,[ca.value?z("",!0):(d(),b("div",tr,[e(O)[0]&&!e(O)[0].taken?(d(),N(fe,{key:0,card:e(O)[0],onClick:i[0]||(i[0]=k=>be(e(O)[0].id))},null,8,["card"])):z("",!0),e(O)[1]&&!e(O)[1].taken?(d(),N(fe,{key:1,card:e(O)[1],onClick:i[1]||(i[1]=k=>be(e(O)[1].id))},null,8,["card"])):z("",!0),e(O)[2]&&!e(O)[2].taken?(d(),N(fe,{key:2,card:e(O)[2],onClick:i[2]||(i[2]=k=>be(e(O)[2].id))},null,8,["card"])):z("",!0),e(O)[3]&&!e(O)[3].taken?(d(),N(fe,{key:3,card:e(O)[3],onClick:i[3]||(i[3]=k=>be(e(O)[3].id))},null,8,["card"])):z("",!0)])),ca.value?(d(),b("div",lr,[e(O)[4]&&!e(O)[4].taken?(d(),N(fe,{key:0,card:e(O)[4],onClick:i[4]||(i[4]=k=>be(e(O)[4].id))},null,8,["card"])):z("",!0),e(O)[5]&&!e(O)[5].taken?(d(),N(fe,{key:1,card:e(O)[5],onClick:i[5]||(i[5]=k=>be(e(O)[5].id))},null,8,["card"])):z("",!0),e(O)[6]&&!e(O)[6].taken?(d(),N(fe,{key:2,card:e(O)[6],onClick:i[6]||(i[6]=k=>be(e(O)[6].id))},null,8,["card"])):z("",!0),e(O)[7]&&!e(O)[7].taken?(d(),N(fe,{key:3,card:e(O)[7],onClick:i[7]||(i[7]=k=>be(e(O)[7].id))},null,8,["card"])):z("",!0)])):z("",!0)])):z("",!0),e(me)==="I"?(d(),b("section",or,[(d(!0),b(q,null,Q(e(H),(k,x)=>{var D,_;return d(),N(ea,{key:x,card:k,user:ae.value,x:e(Pa)[x],y:e(xa)[x],reversColor:"rgb(145, 19, 19)",cash1P:((D=k.coversBy)==null?void 0:D.length)===0?pe(k,`${e(P).user.uid}`):-1,cash2P:((_=k.coversBy)==null?void 0:_.length)===0?pe(k,`${e(S).user.uid}`):-1,onClick:v=>Ze(k)},null,8,["card","user","x","y","reversColor","cash1P","cash2P","onClick"])}),128))])):z("",!0),e(me)==="II"?(d(),b("section",ir,[(d(!0),b(q,null,Q(e(le),(k,x)=>{var D,_;return d(),N(ea,{key:x,card:k,user:ae.value,x:e(as)[x],y:e(es)[x],reversColor:"rgb(58, 59, 160)",cash1P:((D=k.coversBy)==null?void 0:D.length)===0?pe(k,`${e(P).user.uid}`):-1,cash2P:((_=k.coversBy)==null?void 0:_.length)===0?pe(k,`${e(S).user.uid}`):-1,onClick:v=>Ze(k)},null,8,["card","user","x","y","reversColor","cash1P","cash2P","onClick"])}),128))])):z("",!0),e(me)==="III"?(d(),b("section",nr,[(d(!0),b(q,null,Q(e(K),(k,x)=>{var D,_;return d(),N(ea,{key:x,card:k,user:ae.value,x:e(rs)[x],y:e(ss)[x],reversColor:k.tier==="guild"?"rgb(107, 36, 128)":"rgb(175, 85, 202)",cash1P:((D=k.coversBy)==null?void 0:D.length)===0?pe(k,`${e(P).user.uid}`):-1,cash2P:((_=k.coversBy)==null?void 0:_.length)===0?pe(k,`${e(S).user.uid}`):-1,onClick:v=>Ze(k)},null,8,["card","user","x","y","reversColor","cash1P","cash2P","onClick"])}),128))])):z("",!0),e(me)==="end"?(d(),b("section",ur,[n("p",{style:ee(p.value>te.value?"font-weight: bold;":"")},[de($(`${e(P).user.displayName||e(P).user.email}`),1),p.value>te.value?(d(),N(C,{key:0,class:"animateHand",name:"thumbs-up-sharp"})):z("",!0)],4),n("div",cr,[n("div",dr,[oe(C,{name:"ribbon-sharp"}),de($(`:${e(P).points}`),1)]),n("div",vr,$(`$:${Math.floor(e(P).resources.cash/3)}`),1),n("div",pr,[hr,de(" "+$(`:${Re(e(P).cards.purple.map(k=>k.valuePower[0]))}`),1)]),n("div",yr,[fr,de(" "+$(`:${Ne(e(P).resources.coins)}`),1)]),n("div",wr,[oe(C,{name:"skull-sharp"}),de($(`:${e(ve).pawn<=-6&&10||e(ve).pawn<=-3&&5||e(ve).pawn<=-1&&2||0}`),1)]),n("div",mr,$(`= ${p.value}`),1)]),n("p",{style:ee(te.value>p.value?"font-weight: bold;":"")},[de($(`${e(S).user.displayName||e(S).user.email}`),1),te.value>p.value?(d(),N(C,{key:0,class:"animateHand",name:"thumbs-up-sharp"})):z("",!0)],4),n("div",Cr,[n("div",kr,[oe(C,{name:"ribbon-sharp"}),de($(`:${e(S).points}`),1)]),n("div",gr,$(`$:${Math.floor(e(S).resources.cash/3)}`),1),n("div",br,[Ir,de(" "+$(`:${Re(e(S).cards.purple.map(k=>k.valuePower[0]))}`),1)]),n("div",Pr,[_r,de(" "+$(`:${Ne(e(S).resources.coins)}`),1)]),n("div",Br,[oe(C,{name:"skull-sharp"}),de($(`:${e(ve).pawn>=6&&10||e(ve).pawn>=3&&5||e(ve).pawn>=1&&2||0}`),1)]),n("div",$r,$(`= ${te.value}`),1)])])):z("",!0),se.value&&((A=e(ne))!=null&&A.id)&&!e(E)?(d(),b("section",Gr,[n("button",{disabled:We.value<0||!Y.value||(e(ye)===e(P).user.uid?We.value>e(P).resources.cash:We.value>e(S).resources.cash),class:"customButton",onClick:i[8]||(i[8]=()=>Y.value?(e(Z).setCardTaken(We.value),Te.value=!1,se.value=!1):null)},$(`${a.value} ${We.value>=0?We.value:""}`),9,Tr),n("button",{disabled:!((g=e(ne))!=null&&g.id),class:"customButton",onClick:i[9]||(i[9]=()=>Y.value?(e(Z).setCardGraveyard(),Te.value=!1,se.value=!1):null)},$(t.value),9,Wr),n("button",{disabled:!Ga.value,class:"customButton",onClick:i[10]||(i[10]=()=>Y.value?Wa():null)},$(r.value),9,Ar)])):e(Pe)!==""?(d(),b("section",Sr,[n("p",Mr,[de($(j.value+`${e(Pe)===e(P).user.uid?e(P).user.displayName||e(P).user.email:e(S).user.displayName||e(S).user.email}`),1),oe(C,{class:"animateHand",name:"thumbs-up-sharp"})]),n("button",{class:"customButton",onClick:i[11]||(i[11]=()=>(we.value.cancel(),e(De).push("/feed")))},$(y.value),1)])):e(_e)!==""?(d(),b("section",Or,[n("p",Dr,[de($(M.value+`${e(_e)===e(P).user.uid?e(P).user.displayName||e(P).user.email:e(S).user.displayName||e(S).user.email}`),1),oe(C,{class:"animateHand",name:"thumbs-up-sharp"})]),n("button",{class:"customButton",onClick:i[12]||(i[12]=()=>(we.value.cancel(),e(De).push("/feed")))},$(y.value),1)])):e(Oe)!==""?(d(),b("section",Fr,[n("p",Vr,[de($(L.value+`${e(Oe)===e(P).user.uid?e(P).user.displayName||e(P).user.email:e(S).user.displayName||e(S).user.email}`),1),oe(C,{class:"animateHand",name:"thumbs-up-sharp"})]),n("button",{class:"customButton",onClick:i[13]||(i[13]=()=>(we.value.cancel(),e(De).push("/feed")))},$(y.value),1)])):Y.value&&e(Ve)&&!e(E)?(d(),b("section",Er,[n("button",{class:"customButton",onClick:i[14]||(i[14]=async()=>await da(`${e(P).user.uid}`))},$(e(P).user.displayName),1),n("p",null,$(` ${I.value} `),1),n("button",{class:"customButton",onClick:i[15]||(i[15]=async()=>await da(`${e(S).user.uid}`))},$(e(S).user.displayName),1)])):Y.value&&e(Qe)!==""&&!e(E)?(d(),b("section",Rr,[n("p",null,$(G.value),1)])):Y.value&&e(Je)!==""&&!e(E)?(d(),b("section",Nr,[n("p",null,$(f.value),1),(d(),b(q,null,Q(3,k=>oe(Ke,{class:V("selectCardOfThreeBorder"),key:e(qe)[k],coin:e(qe)[k],onClick:x=>Ma(e(qe)[k])},null,8,["coin","onClick"])),64))])):Y.value&&e(ra)!==""&&!e(E)?(d(),b("section",Lr,[n("p",null,$(c.value),1)])):Y.value&&e(ta)!==""&&!e(E)?(d(),b("section",Hr,[n("p",null,$(h.value),1)])):Y.value&&e(la)!==""&&!e(E)?(d(),b("section",jr,[n("p",null,$(h.value),1)])):Y.value&&e(me)==="prepare"&&!e(E)?(d(),b("section",Ur,[n("p",null,$(o.value),1)])):(d(),b("section",Xr))])])}}});const Jr=ge(zr,[["__scopeId","data-v-c6d02750"]]);export{Jr as default};
