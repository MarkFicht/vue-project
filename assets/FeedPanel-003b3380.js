import{d as I,r as n,g as K,s as Q,t as V,w as D,c as _,a as o,b as i,n as O,u as p,e as L,f as ee,o as m,p as ae,h as se,_ as w,i as j,j as te,k as N,l as $,m as g,q as le,v as X,x as J,y as re,z as ne,A as C,B as A,C as h,D as oe,E as z,F as H,G as Y,H as ue,I as ie,J as ce,K as de,L as pe,M as me,N as ye}from"./index-963d61d2.js";import{b as fe,d as ve,L as q}from"./debounce-e49fa7a6.js";const he=y=>(ae("data-v-3ebfeb81"),y=y(),se(),y),ge=he(()=>o("div",{class:"box"},null,-1)),be={class:"box"},_e=["disabled"],Ue={class:"circle"},Se=I({__name:"TheCardComponent",props:{header:{},currentUser:{},video:{},desc:{},color:{},routeTo:{},maxPlayers:{}},emits:["click-lobby"],setup(y,{emit:r}){const u=y,c=n("Go to Lobby"),f=n("Exit Lobby"),U=K(),{duel:k,gems:R,reflex:S}=Q(U),{currentUser:a}=V(u),s=n({id:u.header,status:"Free",players:[]});return D(()=>k.value.players,e=>{s.value.id==="Duel"&&(s.value.players=e,e.length===0?s.value.status="Free":e.length===u.maxPlayers?s.value.status="Busy":s.value.status="Lobby")}),D(()=>R.value.players,e=>{s.value.id==="Gems"&&(s.value.players=e,e.length===0?s.value.status="Free":e.length===u.maxPlayers?s.value.status="Busy":s.value.status="Lobby")}),D(()=>S.value.players,e=>{s.value.id==="Reflex"&&(s.value.players=e,e.length===0?s.value.status="Free":e.length===u.maxPlayers?s.value.status="Busy":s.value.status="Lobby")}),(e,v)=>(m(),_("div",{class:O(["card"]),style:ee(`${e.color}`)},[ge,o("div",be,[o("h2",null,i(s.value.id),1),o("p",null,i(e.desc),1),s.value.players.length<u.maxPlayers||e.maxPlayers===0?(m(),_("button",{key:0,disabled:e.maxPlayers===0,class:O(["cardButton",s.value.players.find(G=>G.uid===p(a).uid)?"cardButtonLobby":""]),onClick:v[0]||(v[0]=()=>r("click-lobby"))},i(e.maxPlayers===0?"Soon":s.value.players.find(G=>G.uid===p(a).uid)?f.value:c.value),11,_e)):L("",!0)]),o("div",Ue,[o("h2",null,i(u.header),1),o("p",null,i(e.maxPlayers===0?"-":s.value.status),1),o("p",null,i(e.maxPlayers===0?"-":`${s.value.players.length}/${e.maxPlayers}`),1)])],4))}}),E=w(Se,[["__scopeId","data-v-3ebfeb81"]]),Ge="/vue-project/assets/bell-notification-79064171.mp3",Te={class:"gameContainer"},Ce={key:0,class:"infoAboutPlayers"},ke={key:0,class:"containerApproveButtons"},xe=I({__name:"TheGame",props:{header:{},currentUser:{}},setup(y){const r=y,u=j(),{colors:c}=te("indicatorNavi"),f=n("Accept"),U=n("Cancel"),k=n("Redirect to"),R=n("Approval"),S=K(),{duel:a}=Q(S),s=N($,"gameStatus"),e=g(s,"Duel"),v=N($,"users"),G=N($,"gameDuel"),B=g(G,"table1"),d=n(new Audio(Ge)),b=n(new Audio(fe)),x=n(ve(function(){u.push("/feed/duel-game")},2*1e3));D(()=>a.value.players,async(t,l)=>{t.length===2&&l.length!==t.length&&d.value.play(),t.length===2&&t.find(T=>T.uid===r.currentUser.uid)&&!t.find(T=>!T.readyToGame)&&await h(e,{isStarted:!0})}),D(()=>a.value.isStarted,async t=>{a.value.isStarted===!1&&J(B),a.value.players.find(l=>l.uid===r.currentUser.uid)&&!a.value.players.find(l=>!l.readyToGame)&&(b.value.play(),x.value())}),le(async()=>{await S.subFirebaseConnect();const t=await X(e);if(t.exists()){const l=t.data().players;t.data().isStarted===!1&&J(B),l.find(P=>P.uid===r.currentUser.uid)&&!l.find(P=>!P.readyToGame)&&(b.value.play(),x.value())}}),re(async()=>{S.unSubFirebaseConnect(),x.value.cancel()});async function Z(){if(a.value.players.find(t=>t.uid===r.currentUser.uid)){await h(g(v,r.currentUser.uid),{game:"",readyToGame:!1,online:"online",timestamp:z()});const t=a.value.players.filter(l=>l.uid!==r.currentUser.uid?l:null);await h(e,{players:t})}else await h(g(v,r.currentUser.uid),{game:"Duel",readyToGame:!1,online:"online",timestamp:z()}),await h(e,{players:oe({...r.currentUser,game:"Duel",readyToGame:!1})})}async function M(){if(a.value.players.length===2&&a.value.players.find(t=>t.uid===r.currentUser.uid)){await h(g(v,r.currentUser.uid),{readyToGame:!0});const t=a.value.players.map(l=>l.uid===r.currentUser.uid?{...l,readyToGame:!0}:{...l});await h(e,{players:t})}}async function W(){if(a.value.players.length===2&&a.value.players.find(t=>t.uid===r.currentUser.uid)){a.value.players.forEach(async({uid:l})=>{l===r.currentUser.uid?await h(g(v,l),{game:"",readyToGame:!1}):await h(g(v,l),{readyToGame:!1})});const t=a.value.players.filter(l=>l.uid!==r.currentUser.uid?l:null).map(l=>({...l,readyToGame:!1}));await h(e,{players:t})}}return(t,l)=>{var P;const T=ne("ion-icon");return m(),_("section",Te,[p(a).players.length===2&&p(a).players.find(F=>F.uid===t.currentUser.uid)?(m(),_("div",Ce,[o("p",null,i(p(a).isStarted?k.value+": Duel":R.value+": Duel"),1),o("div",null,[o("p",null,i(p(a).players[0].displayName||p(a).players[0].email)+i(": "),1),p(a).players[0].readyToGame?(m(),C(T,{key:1,class:"animateHand",name:"thumbs-up-sharp",style:"margin-left: 10px;"})):(m(),C(q,{key:0,small:"",style:"margin-left: 10px;"}))]),o("div",null,[o("p",null,i(p(a).players[1].displayName||p(a).players[1].email)+i(": "),1),p(a).players[1].readyToGame?(m(),C(T,{key:1,class:"animateHand",name:"thumbs-up-sharp",style:"margin-left: 10px;"})):(m(),C(q,{key:0,small:"",style:"margin-left: 10px;"}))]),(P=p(a).players.find(F=>F.uid===t.currentUser.uid))!=null&&P.readyToGame?L("",!0):(m(),_("div",ke,[o("button",{onClick:M},i(f.value),1),o("button",{onClick:W},i(U.value),1)]))])):L("",!0),A(E,{header:"Duel",currentUser:t.currentUser,desc:"A board game inspired by a strategy game called '7 Wonders of the World'",video:"Video soon!",color:p(c)[0],"route-to":"/feed/duel-game","max-players":2,onClickLobby:Z,onClickAccept:M,onClickCancel:W},null,8,["currentUser","color"]),A(E,{header:"Gems",currentUser:t.currentUser,desc:"A board game inspired by a strategy game called 'Splendor'",video:"'IN PROGRESS - Video soon!'",color:p(c)[1],"route-to":"/feed/splendor-game","max-players":0},null,8,["currentUser","color"]),A(E,{header:"Reflex",currentUser:t.currentUser,desc:"Game written from 0 in canvasJS. Cooperation against zombies",video:"'IN PROGRESS - Video soon!'",color:p(c)[2],"route-to":"/feed/reflex-game","max-players":0},null,8,["currentUser","desc","color"])])}}}),Pe=w(xe,[["__scopeId","data-v-4586c78f"]]),Le=I({__name:"TheSettings",props:{header:{}},setup(y){const r=y,u=n(!1);let c;return H(()=>{c=Y(),ue(c,f=>{f?u.value=!0:u.value=!1})}),(f,U)=>(m(),_("h2",null,i(r.header),1))}}),Re=w(Le,[["__scopeId","data-v-9a33a386"]]),De=I({__name:"TheLogout",props:{header:{}},setup(y){const r=y,u=j();let c;H(()=>{c=Y()});const f=()=>{ce(c).then(()=>{u.push("/")})};return(U,k)=>(m(),_(ie,null,[o("h2",null,i(r.header),1),o("button",{class:O("customButton"),onClick:f},"log out")],64))}}),Ie=w(De,[["__scopeId","data-v-4b372c8a"]]),we={class:"header"},Be={class:"wrapper"},Ne=I({__name:"FeedPanel",setup(y){const r=n("Feed Panel"),u=n("Games"),c=n("Settings"),f=n("log Out"),U=n("game-controller-outline"),k=n("settings-outline"),R=n("log-out-outline"),S=j(),a=N($,"users"),s=n({}),e=n(u.value),v=n([{name:`${u.value}`,ionIconClass:U.value,to:"/feed/games"},{name:`${c.value}`,ionIconClass:k.value,to:"/feed/settings"},{name:`${f.value}`,ionIconClass:R.value,to:"/feed/logout"}]),G=d=>e.value=d,B=n(["--clr:#2196f3;","--clr:#008a1b;","--clr:#dc1dff;","--clr:#f3218b;","--clr:#d56f1d;"]);return de("indicatorNavi",{activeLink:e,routes:v,updateActiveLink:G,colors:B}),H(async()=>{await pe().then(async d=>{s.value={uid:d.uid,email:d.email||"",displayName:d.displayName||""};const b=await X(g(a,d.uid));if(b.exists())s.value=b.data();else{const x={uid:d.uid,email:d.email||"",displayName:d.displayName||"",game:"",readyToGame:!1,online:"online",timestamp:z()};s.value=x,await me(g(a,d.uid),{...x})}}),v.value.find(({name:d,to:b})=>b===S.currentRoute.value.path?(e.value=d,!0):!1)}),(d,b)=>(m(),_("main",null,[o("header",we,[o("h1",null,i(r.value),1)]),o("section",Be,[e.value===u.value?(m(),C(Pe,{key:0,header:u.value,currentUser:s.value},null,8,["header","currentUser"])):L("",!0),e.value===c.value?(m(),C(Re,{key:1,header:c.value,currentUser:s.value},null,8,["header","currentUser"])):L("",!0),e.value===f.value?(m(),C(Ie,{key:2,header:f.value,currentUser:s.value},null,8,["header","currentUser"])):L("",!0)]),A(ye)]))}}),Fe=w(Ne,[["__scopeId","data-v-5fe8a4ef"]]);export{Fe as default};
