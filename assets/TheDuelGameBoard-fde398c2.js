var Ea=Object.defineProperty;var Va=(s,c,a)=>c in s?Ea(s,c,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[c]=a;var we=(s,c,a)=>(Va(s,typeof c!="symbol"?c+"":c,a),a);import{h as ze,k as qe,K as Na,j as Qe,L as La,y as C,M as K,N as Te,s as We,d as Pe,r as h,t as Re,B as na,o as p,c as g,u as e,n as _,b,e as U,f as ae,_ as _e,x as ue,w as Ge,a as n,F as z,O as Q,v as M,q as la,i as Ha,l as ha,P as He,Q as ja,R as Ua,G as Xa,g as Ya,S as Ze,m as xe,H as Ka,T as Fe,I as za,p as qa,A as ea}from"./index-106c7414.js";import{b as Qa,d as Ja,g as Za,L as xa}from"./debounce-009dd2c0.js";let ya=[],fa=[],wa=[],ma=[],Ca=[],ka=[];ka=[{id:1,taken:!1,activated:"none",cost:["brick","wood","clay","paper"],valueCost:[1,1,1,2],power:["attack","points","break"],valuePower:[1,3,1]},{id:2,taken:!1,activated:"none",cost:["brick","wood","glass"],valueCost:[2,1,1],power:["attack","points","break"],valuePower:[1,3,2]},{id:3,taken:!1,activated:"none",cost:["brick","clay","paper"],valueCost:[2,2,1],power:["effect","points","break","cash"],valuePower:[1,3,3,3]},{id:4,taken:!1,activated:"none",cost:["brick","clay","glass"],valueCost:[1,1,2],power:["effect","points"],valuePower:[1,6]},{id:5,taken:!1,activated:"none",cost:["wood","glass","paper"],valueCost:[2,1,1],power:["effect","points","cash"],valuePower:[1,3,6]},{id:6,taken:!1,activated:"none",cost:["clay","glass","paper"],valueCost:[2,2,1],power:["effect","points"],valuePower:[2,2]},{id:7,taken:!1,activated:"none",cost:["wood","brick","clay"],valueCost:[2,1,1],power:["effect","points","materials"],valuePower:[1,2,2]},{id:8,taken:!1,activated:"none",cost:["wood","glass","paper"],valueCost:[3,1,1],power:["effect","points"],valuePower:[3,4]},{id:9,taken:!1,activated:"none",cost:["brick","paper"],valueCost:[3,1],power:["points"],valuePower:[9]},{id:10,taken:!1,activated:"none",cost:["wood","brick","paper"],valueCost:[1,1,2],power:["materials","points"],valuePower:[1,4]},{id:11,taken:!1,activated:"none",cost:["wood","brick","glass","paper"],valueCost:[1,1,1,1],power:["effect","cash"],valuePower:[1,12]},{id:12,taken:!1,activated:"none",cost:["clay","glass"],valueCost:[3,1],power:["attack","points"],valuePower:[2,3]}];ya=[{tier:"I",idImg:1,taken:"inGame",hide:!1,color:"brown",valueCost:[],cost:[],valuePower:[1],power:["wood"]},{tier:"I",idImg:2,taken:"inGame",hide:!1,color:"brown",valueCost:[1],cost:["cash"],valuePower:[1],power:["brick"]},{tier:"I",idImg:3,taken:"inGame",hide:!1,color:"brown",valueCost:[],cost:[],valuePower:[1],power:["clay"]},{tier:"I",idImg:4,taken:"inGame",hide:!1,color:"brown",valueCost:[1],cost:["cash"],valuePower:[1],power:["wood"]},{tier:"I",idImg:5,taken:"inGame",hide:!1,color:"brown",valueCost:[],cost:[],valuePower:[1],power:["brick"]},{tier:"I",idImg:6,taken:"inGame",hide:!1,color:"brown",valueCost:[1],cost:["cash"],valuePower:[1],power:["clay"]},{tier:"I",idImg:7,taken:"inGame",hide:!1,color:"grey",valueCost:[1],cost:["cash"],valuePower:[1],power:["glass"]},{tier:"I",idImg:8,taken:"inGame",hide:!1,color:"grey",valueCost:[1],cost:["cash"],valuePower:[1],power:["paper"]},{tier:"I",idImg:9,taken:"inGame",hide:!1,color:"red",valueCost:[1],cost:["wood"],valuePower:[1,1],power:["attack","specialChar"]},{tier:"I",idImg:10,taken:"inGame",hide:!1,color:"red",valueCost:[1],cost:["clay"],valuePower:[1,2],power:["attack","specialChar"]},{tier:"I",idImg:11,taken:"inGame",hide:!1,color:"red",valueCost:[2],cost:["cash"],valuePower:[1,3],power:["attack","specialChar"]},{tier:"I",idImg:12,taken:"inGame",hide:!1,color:"red",valueCost:[],cost:[],valuePower:[1],power:["attack"]},{tier:"I",idImg:13,taken:"inGame",hide:!1,color:"green",valueCost:[2],cost:["cash"],valuePower:[1,4],power:["artefact","specialChar"]},{tier:"I",idImg:14,taken:"inGame",hide:!1,color:"green",valueCost:[1],cost:["paper"],valuePower:[3,1],power:["artefact","points"]},{tier:"I",idImg:15,taken:"inGame",hide:!1,color:"green",valueCost:[2],cost:["cash"],valuePower:[2,5],power:["artefact","specialChar"]},{tier:"I",idImg:16,taken:"inGame",hide:!1,color:"green",valueCost:[1],cost:["glass"],valuePower:[4,1],power:["artefact","points"]},{tier:"I",idImg:17,taken:"inGame",hide:!1,color:"yellow",valueCost:[],cost:[],valuePower:[4,9],power:["cash","specialChar"]},{tier:"I",idImg:18,taken:"inGame",hide:!1,color:"yellow",valueCost:[3],cost:["cash"],valuePower:[2],power:["discount"]},{tier:"I",idImg:19,taken:"inGame",hide:!1,color:"yellow",valueCost:[3],cost:["cash"],valuePower:[1],power:["discount"]},{tier:"I",idImg:20,taken:"inGame",hide:!1,color:"yellow",valueCost:[3],cost:["cash"],valuePower:[3],power:["discount"]},{tier:"I",idImg:21,taken:"inGame",hide:!1,color:"blue",valueCost:[],cost:[],valuePower:[6,3],power:["specialChar","points"]},{tier:"I",idImg:22,taken:"inGame",hide:!1,color:"blue",valueCost:[],cost:[],valuePower:[7,3],power:["specialChar","points"]},{tier:"I",idImg:23,taken:"inGame",hide:!1,color:"blue",valueCost:[1],cost:["brick"],valuePower:[8,3],power:["specialChar","points"]}];fa=[{tier:"II",idImg:24,taken:"inGame",hide:!1,color:"brown",valueCost:[2],cost:["cash"],valuePower:[2],power:["wood"]},{tier:"II",idImg:25,taken:"inGame",hide:!1,color:"brown",valueCost:[2],cost:["cash"],valuePower:[2],power:["brick"]},{tier:"II",idImg:26,taken:"inGame",hide:!1,color:"brown",valueCost:[2],cost:["cash"],valuePower:[2],power:["clay"]},{tier:"II",idImg:27,taken:"inGame",hide:!1,color:"grey",valueCost:[],cost:[],valuePower:[1],power:["glass"]},{tier:"II",idImg:28,taken:"inGame",hide:!1,color:"grey",valueCost:[],cost:[],valuePower:[1],power:["paper"]},{tier:"II",idImg:29,taken:"inGame",hide:!1,color:"red",valueCost:[1,1,1],cost:["specialChar","wood","clay"],valuePower:[1],power:["attack"]},{tier:"II",idImg:30,taken:"inGame",hide:!1,color:"red",valueCost:[2,3],cost:["specialChar","cash"],valuePower:[1],power:["attack"]},{tier:"II",idImg:31,taken:"inGame",hide:!1,color:"red",valueCost:[2],cost:["brick"],valuePower:[2],power:["attack"]},{tier:"II",idImg:32,taken:"inGame",hide:!1,color:"red",valueCost:[1,1,1],cost:["brick","wood","paper"],valuePower:[2,10],power:["attack","specialChar"]},{tier:"II",idImg:33,taken:"inGame",hide:!1,color:"red",valueCost:[2,1],cost:["clay","glass"],valuePower:[2,11],power:["attack","specialChar"]},{tier:"II",idImg:34,taken:"inGame",hide:!1,color:"green",valueCost:[1,2],cost:["wood","paper"],valuePower:[3,1,12],power:["artefact","points","specialChar"]},{tier:"II",idImg:35,taken:"inGame",hide:!1,color:"green",valueCost:[1,2],cost:["wood","glass"],valuePower:[4,1,13],power:["artefact","points","specialChar"]},{tier:"II",idImg:36,taken:"inGame",hide:!1,color:"green",valueCost:[5,2,1],cost:["specialChar","clay","brick"],valuePower:[2,2],power:["artefact","points"]},{tier:"II",idImg:37,taken:"inGame",hide:!1,color:"green",valueCost:[4,1,1,1],cost:["specialChar","brick","wood","glass"],valuePower:[1,2],power:["artefact","points"]},{tier:"II",idImg:38,taken:"inGame",hide:!1,color:"yellow",valueCost:[],cost:[],valuePower:[6,17],power:["cash","specialChar"]},{tier:"II",idImg:39,taken:"inGame",hide:!1,color:"yellow",valueCost:[3,1],cost:["cash","clay"],valuePower:[2],power:["materials"]},{tier:"II",idImg:40,taken:"inGame",hide:!1,color:"yellow",valueCost:[2,1,1],cost:["cash","paper","glass"],valuePower:[1],power:["materials"]},{tier:"II",idImg:41,taken:"inGame",hide:!1,color:"yellow",valueCost:[4],cost:["cash"],valuePower:[4],power:["discount"]},{tier:"II",idImg:42,taken:"inGame",hide:!1,color:"blue",valueCost:[7,1,1],cost:["specialChar","wood","paper"],valuePower:[4,15],power:["points","specialChar"]},{tier:"II",idImg:43,taken:"inGame",hide:!1,color:"blue",valueCost:[6,2],cost:["specialChar","clay"],valuePower:[4,14],power:["points","specialChar"]},{tier:"II",idImg:44,taken:"inGame",hide:!1,color:"blue",valueCost:[2,1],cost:["wood","glass"],valuePower:[5],power:["points"]},{tier:"II",idImg:45,taken:"inGame",hide:!1,color:"blue",valueCost:[8,3],cost:["specialChar","brick"],valuePower:[5],power:["points"]},{tier:"II",idImg:46,taken:"inGame",hide:!1,color:"blue",valueCost:[1,1],cost:["brick","wood"],valuePower:[4,16],power:["points","specialChar"]}];wa=[{tier:"III",idImg:47,taken:"inGame",hide:!1,color:"red",valueCost:[11,2,2],cost:["specialChar","clay","brick"],valuePower:[2],power:["attack"]},{tier:"III",idImg:48,taken:"inGame",hide:!1,color:"red",valueCost:[3,2],cost:["clay","wood"],valuePower:[3],power:["attack"]},{tier:"III",idImg:49,taken:"inGame",hide:!1,color:"red",valueCost:[10,3,1],cost:["specialChar","wood","glass"],valuePower:[2],power:["attack"]},{tier:"III",idImg:50,taken:"inGame",hide:!1,color:"red",valueCost:[3,2,1,1],cost:["specialChar","brick","clay","paper"],valuePower:[2],power:["attack"]},{tier:"III",idImg:51,taken:"inGame",hide:!1,color:"red",valueCost:[8],cost:["cash"],valuePower:[3],power:["attack"]},{tier:"III",idImg:52,taken:"inGame",hide:!1,color:"green",valueCost:[1,1,2],cost:["brick","wood","glass"],valuePower:[6,3],power:["artefact","points"]},{tier:"III",idImg:53,taken:"inGame",hide:!1,color:"green",valueCost:[12,1,1,1],cost:["specialChar","clay","paper","glass"],valuePower:[5,2],power:["artefact","points"]},{tier:"III",idImg:54,taken:"inGame",hide:!1,color:"green",valueCost:[2,1,1],cost:["wood","paper","glass"],valuePower:[6,3],power:["artefact","points"]},{tier:"III",idImg:55,taken:"inGame",hide:!1,color:"green",valueCost:[13,1,2],cost:["specialChar","brick","paper"],valuePower:[5,2],power:["artefact","points"]},{tier:"III",idImg:56,taken:"inGame",hide:!1,color:"yellow",valueCost:[18,1,1,1],cost:["specialChar","clay","brick","wood"],valuePower:[3,1],power:["points","cashBack"]},{tier:"III",idImg:57,taken:"inGame",hide:!1,color:"yellow",valueCost:[2],cost:["paper"],valuePower:[3,3],power:["points","cashBack"]},{tier:"III",idImg:58,taken:"inGame",hide:!1,color:"yellow",valueCost:[1,1,1],cost:["wood","glass","paper"],valuePower:[3,4],power:["points","cashBack"]},{tier:"III",idImg:59,taken:"inGame",hide:!1,color:"yellow",valueCost:[17,2,1],cost:["specialChar","clay","glass"],valuePower:[3,2],power:["points","cashBack"]},{tier:"III",idImg:60,taken:"inGame",hide:!1,color:"yellow",valueCost:[2,1],cost:["brick","glass"],valuePower:[3,5],power:["points","cashBack"]},{tier:"III",idImg:61,taken:"inGame",hide:!1,color:"blue",valueCost:[1,1,1,2],cost:["clay","brick","wood","glass"],valuePower:[7],power:["points"]},{tier:"III",idImg:62,taken:"inGame",hide:!1,color:"blue",valueCost:[14,2,2],cost:["specialChar","clay","wood"],valuePower:[6],power:["points"]},{tier:"III",idImg:63,taken:"inGame",hide:!1,color:"blue",valueCost:[15,1,1,2],cost:["specialChar","clay","wood","paper"],valuePower:[6],power:["points"]},{tier:"III",idImg:64,taken:"inGame",hide:!1,color:"blue",valueCost:[3,2],cost:["brick","wood"],valuePower:[7],power:["points"]},{tier:"III",idImg:65,taken:"inGame",hide:!1,color:"blue",valueCost:[16,2,1,1],cost:["specialChar","clay","brick","paper"],valuePower:[5],power:["points"]},{tier:"III",idImg:66,taken:"inGame",hide:!1,color:"blue",valueCost:[2,1],cost:["brick","glass"],valuePower:[5],power:["points"]}];ma=[{tier:"guild",idImg:67,taken:"inGame",hide:!1,color:"purple",valueCost:[1,1,1,1],cost:["clay","wood","paper","glass"],valuePower:[1],power:["guild"]},{tier:"guild",idImg:68,taken:"inGame",hide:!1,color:"purple",valueCost:[1,1,1,1],cost:["clay","brick","paper","glass"],valuePower:[2],power:["guild"]},{tier:"guild",idImg:69,taken:"inGame",hide:!1,color:"purple",valueCost:[2,1,1,1],cost:["brick","clay","wood","glass"],valuePower:[3],power:["guild"]},{tier:"guild",idImg:70,taken:"inGame",hide:!1,color:"purple",valueCost:[2,1,1],cost:["wood","clay","paper"],valuePower:[4],power:["guild"]},{tier:"guild",idImg:71,taken:"inGame",hide:!1,color:"purple",valueCost:[2,2],cost:["clay","wood"],valuePower:[5],power:["guild"]},{tier:"guild",idImg:72,taken:"inGame",hide:!1,color:"purple",valueCost:[2,2],cost:["brick","wood"],valuePower:[6],power:["guild"]},{tier:"guild",idImg:73,taken:"inGame",hide:!1,color:"purple",valueCost:[2,1,1],cost:["brick","clay","paper"],valuePower:[7],power:["guild"]}];Ca=["artefact7","attack1","cash6n4special","cashBack","lowCostBlue","lowCostWonder","point4n6cash","point7","pointX3","repeatWonder"];const es=[-140,-140,-100,-100,-100,-60,-60,-60,-60,-20,-20,-20,-20,-20,20,20,20,20,20,20],ga=[-105,5,-160,-50,60,-215,-105,5,115,-270,-160,-50,60,170,-325,-215,-105,5,115,225],as=[-140,-140,-140,-140,-140,-140,-100,-100,-100,-100,-100,-60,-60,-60,-60,-20,-20,-20,20,20],ss=[...ga].reverse(),rs=[-180,-180,-140,-140,-140,-100,-100,-100,-100,-60,-60,-20,-20,-20,-20,20,20,20,60,60],ls=[-105,5,-160,-50,60,-215,-105,5,115,-160,60,-215,-105,5,115,-160,-50,60,-105,5],ts=[3,4,5,10,11,12,13,14];class ba{constructor(c){we(this,"pawn",0);we(this,"coins",[]);we(this,"punishment1",!0);we(this,"punishment2",!0);we(this,"punishment3",!0);we(this,"punishment4",!0);Object.assign(this,c)}}class sa{constructor(c){we(this,"_id",0);we(this,"user",{});we(this,"points",0);we(this,"resources",{cash:7,clayValue:0,brickValue:0,woodValue:0,paperValue:0,glassValue:0,clayOne:0,brickOne:0,woodOne:0,paperGlassOne:0,materialsCBW:0,materialsPG:0,specialChars:[],artefacts:[],specialEffects:[],coins:[]});we(this,"wonderCards",[]);we(this,"cards",{red:[],green:[],blue:[],yellow:[],brown:[],grey:[],purple:[]});Object.assign(this,c)}get id(){return this._id}set setId(c){this._id=c}}const os=ze(Qe,"gameDuel"),G=qe(os,"table1");let da;const Oe=Na("duelGameStore",{state:()=>({turn:"",tier:"prepare",move:0,pickCoin:"",pickCoinOfThree:"",pickCardFromGraveyard:"",destroyBrown:"",destroyGrey:"",tierOneCards:[],tierTwoCards:[],tierThreeCards:[],theRestOfCoins:[],wonderCards:[],graveyard:[],board:new ba,player1:new sa,player2:new sa,selectWondersForPlayers:[],selectWondersForPlayersMove:0,chooseWhoWillStart:!1,wonByArt:"",wonByAggressive:"",wonBySurr:"",wonByPoints:"",selectedCard:{},selectedWonder:{},isLoading:!1,endGameAnimationEnd:!1}),getters:{},actions:{async subFirebaseConnect(s){da=await La(G,c=>{if(c.exists()){const{turn:a,tier:t,move:r,tierICards:u,tierIICards:k,tierIIICards:m,player1:d,player2:l,gameBoard:o,wonderCards:i,graveyard:I,theRestOfCoins:f,pickCoin:$,pickCoinOfThree:X,pickCardFromGraveyard:V,destroyBrown:v,destroyGrey:q,selectWondersForPlayers:ye,selectWondersForPlayersMove:be,chooseWhoWillStart:ce,wonByArt:R,wonByAggressive:ee,wonBySurr:re,wonByPoints:D}=c.data();this.turn=a,this.tier=t,this.move=r,this.tierOneCards=u,this.tierTwoCards=k,this.tierThreeCards=m,this.player1=d,this.player2=l,this.board=o,this.wonderCards=i,this.graveyard=I,this.theRestOfCoins=f,this.pickCoin=$,this.pickCoinOfThree=X,this.pickCardFromGraveyard=V,this.destroyBrown=v,this.destroyGrey=q,this.selectWondersForPlayers=ye,this.selectWondersForPlayersMove=be,this.chooseWhoWillStart=ce,this.wonByArt=R,this.wonByAggressive=ee,this.wonBySurr=re,this.wonByPoints=D}})},unSubFirebaseConnect(){da()},unselectCard(){this.selectedCard={},this.selectedWonder={}},async upgradeTurnAndMove(s,c,a){if(c)await C(G,{turn:s});else if(this.move+1===60&&this.wonByAggressive===""&&this.wonByArt===""&&this.wonBySurr==="")await C(G,{tier:"end",move:K(1)});else if((this.move+1===20||this.move+1===40)&&!this.chooseWhoWillStart){let t=s;t=t===this.player1.user.uid?`${this.player2.user.uid}`:`${this.player1.user.uid}`,this.board.pawn>0||a&&a>0?t=`${this.player1.user.uid}`:(this.board.pawn<0||a&&a<0)&&(t=`${this.player2.user.uid}`),await C(G,{chooseWhoWillStart:!0,turn:t,move:K(1)})}else await C(G,{turn:s,move:K(1)})},async setPickCoin(s){await C(G,{pickCoin:s})},async setPickCoinOfThree(s){await C(G,{pickCoinOfThree:s})},async setPickCardFromGraveyard(s){await C(G,{pickCardFromGraveyard:s})},async setDestroyBrown(s){await C(G,{destroyBrown:s})},async setDestroyGrey(s){await C(G,{destroyGrey:s})},async setMovePawn(s,c){let a=0;if(c===this.player1.user.uid){const t=setInterval(async()=>{this.board.pawn<-7&&(clearInterval(t),await C(G,{"gameBoard.pawn":K(-1),wonByAggressive:c}),console.log("%c END GAME - ATTACK -> ","background: #222; color: #bada55")),this.board.punishment1&&this.board.pawn<=-5?await C(G,{"gameBoard.punishment1":!1,"gameBoard.pawn":K(-1),"player2.resources.cash":this.player2.resources.cash<=5?0:this.player2.resources.cash-=5}):this.board.punishment2&&this.board.pawn<=-2?await C(G,{"gameBoard.punishment2":!1,"gameBoard.pawn":K(-1),"player2.resources.cash":this.player2.resources.cash<=2?0:this.player2.resources.cash-=2}):await C(G,{"gameBoard.pawn":K(-1)}),a++,a>=s&&clearInterval(t)},333)}else{const t=setInterval(async()=>{this.board.pawn>7&&(clearInterval(t),await C(G,{"gameBoard.pawn":K(1),wonByAggressive:c}),console.log("%c END GAME - ATTACK -> ","background: #222; color: #bada55")),this.board.punishment3&&this.board.pawn>=2?await C(G,{"gameBoard.punishment3":!1,"gameBoard.pawn":K(1),"player1.resources.cash":this.player1.resources.cash<=5?0:this.player1.resources.cash-=5}):this.board.punishment4&&this.board.pawn>=5?await C(G,{"gameBoard.punishment4":!1,"gameBoard.pawn":K(1),"player1.resources.cash":this.player1.resources.cash<=2?0:this.player1.resources.cash-=2}):await C(G,{"gameBoard.pawn":K(1)}),a++,a>=s&&clearInterval(t)},333)}},async countArtefacts(s){let c=0;if(s===this.player1.user.uid){this.player1.resources.coins.find(t=>t==="artefact7")&&(c+=1);const a=this.player1.cards.green.map(t=>t.valuePower[0]);c+=[...new Set(a)].length}else{this.player2.resources.coins.find(t=>t==="artefact7")&&(c+=1);const a=this.player2.cards.green.map(t=>t.valuePower[0]);c+=[...new Set(a)].length}if(c>=6){await C(G,{wonByArt:s}),console.log("%c END GAME - ARTEFACT -> ","background: #222; color: #bada55");return}},async setCardTaken(s,c){let a={},t=!1,r=!1,u=!1,k=0,m=0;if(c==="I"||this.tier==="I"?(this.tierOneCards=this.$state.tierOneCards.map(d=>(d.id===this.selectedCard.id&&(a=d),{...d,taken:d.id===this.selectedCard.id?"inPlayerBoard":d.taken,coversBy:d!=null&&d.coversBy?d.coversBy.filter(l=>l!==this.selectedCard.id):[]})),await C(G,{tierICards:this.tierOneCards})):c==="II"||this.tier==="II"?(this.tierTwoCards=this.$state.tierTwoCards.map(d=>(d.id===this.selectedCard.id&&(a=d),{...d,taken:d.id===this.selectedCard.id?"inPlayerBoard":d.taken,coversBy:d!=null&&d.coversBy?d.coversBy.filter(l=>l!==this.selectedCard.id):[]})),await C(G,{tierIICards:this.tierTwoCards})):(c==="III"||c==="guild"||this.tier==="III")&&(this.tierThreeCards=this.$state.tierThreeCards.map(d=>(d.id===this.selectedCard.id&&(a=d),{...d,taken:d.id===this.selectedCard.id?"inPlayerBoard":d.taken,coversBy:d!=null&&d.coversBy?d.coversBy.filter(l=>l!==this.selectedCard.id):[]})),await C(G,{tierIIICards:this.tierThreeCards})),this.isLoading=!0,this.turn===this.player1.user.uid){this.player1.resources.coins.find(l=>l==="cash6n4special")&&s===0&&a.cost[0]==="specialChar"&&this.player1.resources.specialChars.find(l=>l===a.valueCost[0])&&(m=4);const d=va(a,this.player1);if(this.player1.cards[a.color].push({...a,taken:"inPlayerBoard"}),a.color==="red"&&a.power.forEach((l,o)=>{l==="attack"&&(this.player1.resources.coins.find(i=>i==="attack1")?k=++a.valuePower[o]:k=a.valuePower[o],u=!0)}),a.color==="green"&&(r=!0,a.power.forEach((l,o)=>{if(l==="artefact"&&this.player1.resources.artefacts.length!==0){let i=0;this.player1.resources.artefacts.forEach(I=>{I===a.valuePower[o]&&i++}),i===2&&(t=!0)}})),a.color==="purple")switch(a.valuePower[0]){case 1:{const l=this.player1.cards.yellow.length,o=this.player2.cards.yellow.length,i=l>o?l:o;d.cash+=i;break}case 2:{const l=this.player1.cards.brown.length+this.player1.cards.grey.length,o=this.player2.cards.brown.length+this.player2.cards.grey.length,i=l>o?l:o;d.cash+=i;break}case 4:{const l=this.player1.cards.blue.length,o=this.player2.cards.blue.length,i=l>o?l:o;d.cash+=i;break}case 5:{const l=this.player1.cards.green.length,o=this.player2.cards.green.length,i=l>o?l:o;d.cash+=i;break}case 7:{const l=this.player1.cards.red.length,o=this.player2.cards.red.length,i=l>o?l:o;d.cash+=i;break}}if(await C(G,{"player1.points":this.player1.points,"player1.cards":this.player1.cards,"player1.resources":{...d,cash:d.cash+m-s}}),s>0&&this.player2.resources.coins.find(l=>l==="cashBack")){let l=s;a.cost.find((o,i)=>o==="cash"?(l-=a.valueCost[i],!0):!1),C(G,{"player2.resources.cash":K(l)})}r&&await this.countArtefacts(`${this.player1.user.uid}`),u&&await this.setMovePawn(k,`${this.player1.user.uid}`),t&&await this.setPickCoin(`${this.player1.user.uid}`),this.wonByArt===""&&this.wonByAggressive===""&&this.pickCoin===""&&(this.turn===this.player1.user.uid&&c?(this.move+1===20||this.move+1===40)&&k!==0?await this.upgradeTurnAndMove(`${this.player2.user.uid}`,!1,this.board.pawn+k):this.player1.resources.coins.find(l=>l==="repeatWonder")&&(this.move+1!==20||this.move+1!==40)?this.upgradeTurnAndMove(`${this.player1.user.uid}`):this.upgradeTurnAndMove(`${this.player2.user.uid}`):this.turn===this.player2.user.uid&&c?this.player2.resources.coins.find(l=>l==="repeatWonder")&&(this.move+1!==20||this.move+1!==40)?this.upgradeTurnAndMove(`${this.player2.user.uid}`):this.upgradeTurnAndMove(`${this.player1.user.uid}`):await this.upgradeTurnAndMove(`${this.player2.user.uid}`))}else{this.player2.resources.coins.find(l=>l==="cash6n4special")&&s===0&&a.cost[0]==="specialChar"&&this.player2.resources.specialChars.find(l=>l===a.valueCost[0])&&(m=4);const d=va(a,this.player2);if(this.player2.cards[a.color].push({...a,taken:"inPlayerBoard"}),a.color==="red"&&a.power.forEach((l,o)=>{l==="attack"&&(this.player2.resources.coins.find(i=>i==="attack1")?k=a.valuePower[o]+1:k=a.valuePower[o],u=!0)}),a.color==="green"&&(r=!0,a.power.forEach((l,o)=>{if(l==="artefact"&&this.player2.resources.artefacts.length!==0){let i=0;this.player2.resources.artefacts.forEach(I=>{I===a.valuePower[o]&&i++}),i===2&&(t=!0)}})),a.color==="purple")switch(a.valuePower[0]){case 1:{const l=this.player1.cards.yellow.length,o=this.player2.cards.yellow.length,i=l>o?l:o;d.cash+=i;break}case 2:{const l=this.player1.cards.brown.length+this.player1.cards.grey.length,o=this.player2.cards.brown.length+this.player1.cards.grey.length,i=l>o?l:o;d.cash+=i;break}case 4:{const l=this.player1.cards.blue.length,o=this.player2.cards.blue.length,i=l>o?l:o;d.cash+=i;break}case 5:{const l=this.player1.cards.green.length,o=this.player2.cards.green.length,i=l>o?l:o;d.cash+=i;break}case 7:{const l=this.player1.cards.red.length,o=this.player2.cards.red.length,i=l>o?l:o;d.cash+=i;break}}if(await C(G,{"player2.points":this.player2.points,"player2.cards":this.player2.cards,"player2.resources":{...d,cash:d.cash+m-s}}),s>0&&this.player1.resources.coins.find(l=>l==="cashBack")){let l=s;a.cost.find((o,i)=>o==="cash"?(l-=a.valueCost[i],!0):!1),C(G,{"player1.resources.cash":K(l)})}r&&await this.countArtefacts(`${this.player2.user.uid}`),u&&await this.setMovePawn(k,`${this.player2.user.uid}`),t&&await this.setPickCoin(`${this.player2.user.uid}`),this.wonByArt===""&&this.wonByAggressive===""&&this.pickCoin===""&&((this.move+1===20||this.move+1===40)&&k!==0?await this.upgradeTurnAndMove(`${this.player1.user.uid}`,!1,this.board.pawn-k):this.turn===this.player1.user.uid&&c?this.player1.resources.coins.find(l=>l==="repeatWonder")&&(this.move+1!==20||this.move+1!==40)?this.upgradeTurnAndMove(`${this.player1.user.uid}`):this.upgradeTurnAndMove(`${this.player2.user.uid}`):this.turn===this.player2.user.uid&&c?this.player2.resources.coins.find(l=>l==="repeatWonder")&&(this.move+1!==20||this.move+1!==40)?this.upgradeTurnAndMove(`${this.player2.user.uid}`):this.upgradeTurnAndMove(`${this.player1.user.uid}`):await this.upgradeTurnAndMove(`${this.player1.user.uid}`))}this.unselectCard(),this.isLoading=!1},async setCardGraveyard(s){var a;let c={};if(s==="I"||this.tier==="I"?(this.tierOneCards=this.$state.tierOneCards.map(t=>(t.id===this.selectedCard.id&&(c=t),{...t,taken:t.id===this.selectedCard.id?"graveyard":t.taken,coversBy:t!=null&&t.coversBy?t.coversBy.filter(r=>r!==this.selectedCard.id):[]})),await C(G,{tierICards:this.tierOneCards})):s==="II"||this.tier==="II"?(this.tierTwoCards=this.$state.tierTwoCards.map(t=>(t.id===this.selectedCard.id&&(c=t),{...t,taken:t.id===this.selectedCard.id?"graveyard":t.taken,coversBy:t!=null&&t.coversBy?t.coversBy.filter(r=>r!==this.selectedCard.id):[]})),await C(G,{tierIICards:this.tierTwoCards})):(s==="III"||s==="guild"||this.tier==="III")&&(this.tierThreeCards=this.$state.tierThreeCards.map(t=>(t.id===this.selectedCard.id&&(c=t),{...t,taken:t.id===this.selectedCard.id?"graveyard":t.taken,coversBy:t!=null&&t.coversBy?t.coversBy.filter(r=>r!==this.selectedCard.id):[]})),await C(G,{tierIIICards:this.tierThreeCards})),this.isLoading=!0,this.graveyard.push({...c,taken:"graveyard"}),s)if(this.turn===this.player1.user.uid){const t={...this.player2.resources};if(c.color==="brown"){switch(c.power[0]){case"clay":t.clayValue-=c.valuePower[0];break;case"brick":t.brickValue-=c.valuePower[0];break;case"wood":t.woodValue-=c.valuePower[0];break}await C(G,{"player2.resources":t,graveyard:this.graveyard,"player2.cards.brown":Te({...c,taken:"inPlayerBoard"})})}else if(c.color==="grey"){switch(c.power[0]){case"paper":t.paperValue-=c.valuePower[0];break;case"glass":t.glassValue-=c.valuePower[0];break}await C(G,{"player2.resources":t,graveyard:this.graveyard,"player2.cards.grey":Te({...c,taken:"inPlayerBoard"})})}this.player1.resources.coins.find(r=>r==="repeatWonder")&&(this.move+1!==20||this.move+1!==40)?this.upgradeTurnAndMove(`${this.player1.user.uid}`):this.upgradeTurnAndMove(`${this.player2.user.uid}`)}else{const t={...this.player1.resources};if(c.color==="brown"){switch(c.power[0]){case"clay":t.clayValue-=c.valuePower[0];break;case"brick":t.brickValue-=c.valuePower[0];break;case"wood":t.woodValue-=c.valuePower[0];break}await C(G,{"player1.resources":t,graveyard:this.graveyard,"player1.cards.brown":Te({...c,taken:"inPlayerBoard"})})}else if(c.color==="grey"){switch(c.power[0]){case"paper":t.paperValue-=c.valuePower[0];break;case"glass":t.glassValue-=c.valuePower[0];break}await C(G,{"player1.resources":t,graveyard:this.graveyard,"player1.cards.grey":Te({...c,taken:"inPlayerBoard"})})}this.player2.resources.coins.find(r=>r==="repeatWonder")&&(this.move+1!==20||this.move+1!==40)?this.upgradeTurnAndMove(`${this.player2.user.uid}`):this.upgradeTurnAndMove(`${this.player1.user.uid}`)}else if(this.turn===this.player1.user.uid){const t=2+this.player1.cards.yellow.length;await C(G,{"player1.resources.cash":K(t),graveyard:this.graveyard}),this.upgradeTurnAndMove(`${(a=this.player2.user)==null?void 0:a.uid}`)}else{const t=2+this.player2.cards.yellow.length;await C(G,{"player2.resources.cash":K(t),graveyard:this.graveyard}),this.upgradeTurnAndMove(`${this.player1.user.uid}`)}this.unselectCard(),this.isLoading=!1},async setCardToWonder(s){let c={},a={},t=!1,r=0,u=!1,k=!1,m=!1,d=!1,l=!1;if(this.tier==="I"?(this.tierOneCards=this.$state.tierOneCards.map(o=>(o.id===this.selectedCard.id&&(c=o),{...o,taken:o.id===this.selectedCard.id?"inWonder":o.taken,coversBy:o!=null&&o.coversBy?o.coversBy.filter(i=>i!==this.selectedCard.id):[]})),await C(G,{tierICards:this.tierOneCards})):this.tier==="II"?(this.tierTwoCards=this.$state.tierTwoCards.map(o=>(o.id===this.selectedCard.id&&(c=o),{...o,taken:o.id===this.selectedCard.id?"inWonder":o.taken,coversBy:o!=null&&o.coversBy?o.coversBy.filter(i=>i!==this.selectedCard.id):[]})),await C(G,{tierIICards:this.tierTwoCards})):this.tier==="III"&&(this.tierThreeCards=this.$state.tierThreeCards.map(o=>(o.id===this.selectedCard.id&&(c=o),{...o,taken:o.id===this.selectedCard.id?"inWonder":o.taken,coversBy:o!=null&&o.coversBy?o.coversBy.filter(i=>i!==this.selectedCard.id):[]})),await C(G,{tierIIICards:this.tierThreeCards})),a=this.selectedWonder,a.activated=c.tier,this.isLoading=!0,this.turn===this.player1.user.uid){const o=pa(a,this.player1);o.resources.cash-=s,o.resources.coins.find(f=>f==="repeatWonder")&&(u=!0),s>0&&this.player2.resources.coins.find(f=>f==="cashBack")&&C(G,{"player2.resources.cash":K(s)}),a.power.forEach(async(f,$)=>{f==="attack"?(t=!0,r=a.valuePower[$]):f==="break"?a.valuePower[$]===1?this.player2.cards.brown.length>0&&(k=!0):a.valuePower[$]===2?this.player2.cards.grey.length>0&&(m=!0):a.valuePower[$]===3&&await C(G,{"player2.resources.cash":this.player2.resources.cash<=3?0:K(-3)}):f==="effect"&&(a.valuePower[$]===1?u=!0:a.valuePower[$]===2?d=!0:a.valuePower[$]===3&&(l=!0))}),t&&this.setMovePawn(r,`${this.player1.user.uid}`),l&&await this.setPickCoinOfThree(`${this.player1.user.uid}`),d&&await this.setPickCardFromGraveyard(`${this.player1.user.uid}`),k&&await this.setDestroyBrown(`${this.player1.user.uid}`),m&&await this.setDestroyGrey(`${this.player1.user.uid}`);const i=o.wonderCards.filter(f=>f.activated!=="none"),I=this.player2.wonderCards.filter(f=>f.activated!=="none");i.length===3&&I.length===4?await C(G,{player1:{...o,wonderCards:i}}):i.length===4&&I.length===3?await C(G,{player1:o,"player2.wonderCards":I}):await C(G,{player1:o}),this.wonByArt===""&&this.wonByAggressive===""&&this.pickCardFromGraveyard===""&&this.pickCoinOfThree===""&&this.destroyBrown===""&&this.destroyGrey===""&&(u&&this.move!==19&&this.move!==39?this.upgradeTurnAndMove(`${this.player1.user.uid}`):this.upgradeTurnAndMove(`${this.player2.user.uid}`))}else{const o=pa(a,this.player2);o.resources.cash-=s,o.resources.coins.find(f=>f==="repeatWonder")&&(u=!0),s>0&&this.player1.resources.coins.find(f=>f==="cashBack")&&C(G,{"player1.resources.cash":K(s)}),a.power.forEach(async(f,$)=>{f==="attack"?(t=!0,r=a.valuePower[$]):f==="break"?a.valuePower[$]===1?this.player1.cards.brown.length>0&&(k=!0):a.valuePower[$]===2?this.player1.cards.grey.length>0&&(m=!0):a.valuePower[$]===3&&await C(G,{"player1.resources.cash":this.player1.resources.cash<=3?0:K(-3)}):f==="effect"&&(a.valuePower[$]===1?u=!0:a.valuePower[$]===2?d=!0:a.valuePower[$]===3&&(l=!0))}),t&&this.setMovePawn(r,`${this.player2.user.uid}`),l&&await this.setPickCoinOfThree(`${this.player2.user.uid}`),d&&await this.setPickCardFromGraveyard(`${this.player2.user.uid}`),k&&await this.setDestroyBrown(`${this.player2.user.uid}`),m&&await this.setDestroyGrey(`${this.player2.user.uid}`);const i=this.player1.wonderCards.filter(f=>f.activated!=="none"),I=o.wonderCards.filter(f=>f.activated!=="none");i.length===3&&I.length===4?await C(G,{"player1.wonderCards":i,player2:o}):i.length===4&&I.length===3?await C(G,{player2:{...o,wonderCards:I}}):await C(G,{player2:o}),this.wonByArt===""&&this.wonByAggressive===""&&this.pickCardFromGraveyard===""&&this.pickCoinOfThree===""&&this.destroyBrown===""&&this.destroyGrey===""&&(u&&this.move!==19&&this.move!==39?this.upgradeTurnAndMove(`${this.player2.user.uid}`):this.upgradeTurnAndMove(`${this.player1.user.uid}`))}this.unselectCard(),this.isLoading=!1}}}),is=Oe(),{player1:De,player2:aa}=We(is);function oa(s,c){let a=[];return c==="I"?a=s.map((t,r)=>{const u=r+1;let k=0;return r<2?k=2:r<5?k=3:r<9?k=4:r<14?k=5:r<20&&(k=0),{...t,id:u,coversBy:k!==0?[u+k,u+k+1]:[],hide:!!ts.find(m=>m===u)}}):c==="II"?(a[0]={...s[0],id:1,coversBy:[7]},a[1]={...s[1],id:2,coversBy:[7,8]},a[2]={...s[2],id:3,coversBy:[8,9]},a[3]={...s[3],id:4,coversBy:[9,10]},a[4]={...s[4],id:5,coversBy:[10,11]},a[5]={...s[5],id:6,coversBy:[11]},a[6]={...s[6],id:7,coversBy:[12],hide:!0},a[7]={...s[7],id:8,coversBy:[12,13],hide:!0},a[8]={...s[8],id:9,coversBy:[13,14],hide:!0},a[9]={...s[9],id:10,coversBy:[14,15],hide:!0},a[10]={...s[10],id:11,coversBy:[15],hide:!0},a[11]={...s[11],id:12,coversBy:[16]},a[12]={...s[12],id:13,coversBy:[16,17]},a[13]={...s[13],id:14,coversBy:[17,18]},a[14]={...s[14],id:15,coversBy:[18]},a[15]={...s[15],id:16,coversBy:[19],hide:!0},a[16]={...s[16],id:17,coversBy:[19,20],hide:!0},a[17]={...s[17],id:18,coversBy:[20],hide:!0},a[18]={...s[18],id:19,coversBy:[]},a[19]={...s[19],id:20,coversBy:[]}):c==="III"&&(a[0]={...s[0],id:1,coversBy:[3,4]},a[1]={...s[1],id:2,coversBy:[4,5]},a[2]={...s[2],id:3,coversBy:[6,7],hide:!0},a[3]={...s[3],id:4,coversBy:[7,8],hide:!0},a[4]={...s[4],id:5,coversBy:[8,9],hide:!0},a[5]={...s[5],id:6,coversBy:[10]},a[6]={...s[6],id:7,coversBy:[10]},a[7]={...s[7],id:8,coversBy:[11]},a[8]={...s[8],id:9,coversBy:[11]},a[9]={...s[9],id:10,coversBy:[12,13],hide:!0},a[10]={...s[10],id:11,coversBy:[14,15],hide:!0},a[11]={...s[11],id:12,coversBy:[16]},a[12]={...s[12],id:13,coversBy:[16,17]},a[13]={...s[13],id:14,coversBy:[17,18]},a[14]={...s[14],id:15,coversBy:[18]},a[15]={...s[15],id:16,coversBy:[19],hide:!0},a[16]={...s[16],id:17,coversBy:[19,20],hide:!0},a[17]={...s[17],id:18,coversBy:[20],hide:!0},a[18]={...s[18],id:19,coversBy:[]},a[19]={...s[19],id:20,coversBy:[]}),a}const va=(s,c)=>{const a={...c.resources};if(s.color==="brown")switch(s.power[0]){case"clay":a.clayValue+=s.valuePower[0];break;case"brick":a.brickValue+=s.valuePower[0];break;case"wood":a.woodValue+=s.valuePower[0];break}else if(s.color==="grey")switch(s.power[0]){case"paper":a.paperValue+=s.valuePower[0];break;case"glass":a.glassValue+=s.valuePower[0];break}else s.color==="yellow"?s.power.forEach((t,r)=>{if(t==="points"&&(c.points+=s.valuePower[r]),t==="discount")switch(s.valuePower[r]){case 1:a.clayOne=1;break;case 2:a.brickOne=1;break;case 3:a.woodOne=1;break;case 4:a.paperGlassOne=1;break}if(t==="materials")switch(s.valuePower[r]){case 1:a.materialsCBW+=1;break;case 2:a.materialsPG+=1;break}if(t==="specialChar"&&a.specialChars.push(s.valuePower[r]),t==="cash"&&(a.cash+=s.valuePower[r]),t==="cashBack")switch(s.valuePower[r]){case 1:a.cash+=c.wonderCards.filter(u=>u.activated!=="none").length*2;break;case 2:a.cash+=c.cards.yellow.length+1;break;case 3:a.cash+=c.cards.grey.length*3;break;case 4:a.cash+=c.cards.brown.length*2;break;case 5:a.cash+=c.cards.red.length;break}}):s.color==="red"?s.power.forEach((t,r)=>{t==="specialChar"&&a.specialChars.push(s.valuePower[r])}):s.color==="green"?s.power.forEach((t,r)=>{t==="specialChar"&&a.specialChars.push(s.valuePower[r]),t==="artefact"&&a.artefacts.push(s.valuePower[r]),t==="points"&&(c.points+=s.valuePower[r])}):s.color==="blue"?s.power.forEach((t,r)=>{t==="points"&&(c.points+=s.valuePower[r]),t==="specialChar"&&a.specialChars.push(s.valuePower[r])}):s.color;return a},pa=(s,c)=>{const a={...c};return a.wonderCards=a.wonderCards.map(t=>t.id===s.id?s:t),s.power.forEach((t,r)=>{if(t==="materials")switch(s.valuePower[r]){case 1:a.resources.materialsCBW+=1;break;case 2:a.resources.materialsPG+=1;break}else t==="cash"?a.resources.cash+=s.valuePower[r]:t==="points"&&(a.points+=s.valuePower[r])}),a};function he(s,c){if(!(s!=null&&s.id))return-1;let a=0,t=[],r=[],u=[],k=!1;const m=De.value.resources,d=aa.value.resources;return De.value.user.uid===c?(t=[{type:"clay",val:m.clayOne?1:2+d.clayValue},{type:"brick",val:m.brickOne?1:2+d.brickValue},{type:"wood",val:m.woodOne?1:2+d.woodValue}],t=t.sort((l,o)=>o.val-l.val),r=[{type:"paper",val:m.paperGlassOne?1:2+d.paperValue},{type:"glass",val:m.paperGlassOne?1:2+d.glassValue}],r=r.sort((l,o)=>o.val-l.val),s.cost.forEach((l,o)=>{if(l==="specialChar")m.specialChars.find(i=>{if(i===s.valueCost[o])return k=!0,!0});else if(l==="cash")a+=s.valueCost[o];else if(l==="clay"){const i=s.valueCost[o]-m.clayValue;if(i<=0)return null;for(let I=0;I<i;I++)u.push("clay")}else if(l==="brick"){const i=s.valueCost[o]-m.brickValue;if(i<=0)return null;for(let I=0;I<i;I++)u.push("brick")}else if(l==="wood"){const i=s.valueCost[o]-m.woodValue;if(i<=0)return null;for(let I=0;I<i;I++)u.push("wood")}else if(l==="paper"){const i=s.valueCost[o]-m.paperValue;if(i<=0)return null;for(let I=0;I<i;I++)u.push("paper")}else if(l==="glass"){const i=s.valueCost[o]-m.glassValue;if(i<=0)return null;for(let I=0;I<i;I++)u.push("glass")}})):(t=[{type:"clay",val:d.clayOne?1:2+m.clayValue},{type:"brick",val:d.brickOne?1:2+m.brickValue},{type:"wood",val:d.woodOne?1:2+m.woodValue}],t=t.sort((l,o)=>o.val-l.val),r=[{type:"paper",val:d.paperGlassOne?1:2+m.paperValue},{type:"glass",val:d.paperGlassOne?1:2+m.glassValue}],r=r.sort((l,o)=>o.val-l.val),s.cost.forEach((l,o)=>{if(l==="specialChar")d.specialChars.find(i=>{if(i===s.valueCost[o])return k=!0,!0});else if(l==="cash")a+=s.valueCost[o];else if(l==="clay"){const i=s.valueCost[o]-d.clayValue;if(i<=0)return null;for(let I=0;I<i;I++)u.push("clay")}else if(l==="brick"){const i=s.valueCost[o]-d.brickValue;if(i<=0)return null;for(let I=0;I<i;I++)u.push("brick")}else if(l==="wood"){const i=s.valueCost[o]-d.woodValue;if(i<=0)return null;for(let I=0;I<i;I++)u.push("wood")}else if(l==="paper"){const i=s.valueCost[o]-d.paperValue;if(i<=0)return null;for(let I=0;I<i;I++)u.push("paper")}else if(l==="glass"){const i=s.valueCost[o]-d.glassValue;if(i<=0)return null;for(let I=0;I<i;I++)u.push("glass")}})),u=ns(u,t,r,c),(s==null?void 0:s.color)==="blue"&&(De.value.user.uid===c?De.value.resources.coins.find(l=>l==="lowCostBlue")&&(u.shift(),u.shift()):aa.value.resources.coins.find(l=>l==="lowCostBlue")&&(u.shift(),u.shift())),s!=null&&s.activated&&(De.value.user.uid===c?De.value.resources.coins.find(l=>l==="lowCostWonder")&&(u.shift(),u.shift()):aa.value.resources.coins.find(l=>l==="lowCostWonder")&&(u.shift(),u.shift())),u.forEach(l=>{var o,i;a+=((o=t.find(({type:I})=>I===l))==null?void 0:o.val)||((i=r.find(({type:I})=>I===l))==null?void 0:i.val)||0}),k?0:a}function ns(s,c,a,t){const r=s,u=De.value.resources,k=aa.value.resources;if(De.value.user.uid===t){for(let m=0;m<u.materialsCBW;m++){let d=!1,l=0;r.find((o,i)=>o===c[0].type?(d=!0,l=i,!0):!1),d?r.splice(l,1):(r.find((o,i)=>o===c[1].type?(d=!0,l=i,!0):!1),d?r.splice(l,1):(r.find((o,i)=>o===c[2].type?(d=!0,l=i,!0):!1),d&&r.splice(l,1)))}for(let m=0;m<u.materialsPG;m++){let d=!1,l=0;r.find((o,i)=>o===a[0].type?(d=!0,l=i,!0):!1),d?r.splice(l,1):(r.find((o,i)=>o===a[1].type?(d=!0,l=i,!0):!1),d&&r.splice(l,1))}}else{for(let m=0;m<k.materialsCBW;m++){let d=!1,l=0;r.find((o,i)=>o===c[0].type?(d=!0,l=i,!0):!1),d?r.splice(l,1):(r.find((o,i)=>o===c[1].type?(d=!0,l=i,!0):!1),d?r.splice(l,1):(r.find((o,i)=>o===c[2].type?(d=!0,l=i,!0):!1),d&&r.splice(l,1)))}for(let m=0;m<k.materialsPG;m++){let d=!1,l=0;r.find((o,i)=>o===a[0].type?(d=!0,l=i,!0):!1),d?r.splice(l,1):(r.find((o,i)=>o===a[1].type?(d=!0,l=i,!0):!1),d&&r.splice(l,1))}}return r}const us=Pe({__name:"DuelGameCardComponent",props:{card:{},small:{type:Boolean},cash1P:{},cash2P:{},res1P:{},res2P:{}},setup(s){const c=s,a=h(0),t=h(0),r=h(0),u=h(0),k=h(0),m=h(0),d=h(0),l=h(0),o=h(0),i=h(0),I=h(0),f=h(0),$=h(0),X=h(0),V=h(0),v=h(0),q=h(0),ye=h(0),be=h(0),ce=h(0),R=h(0),ee=h(""),re=h(""),{card:D}=Re(c);return na(()=>{switch(D.value.power.forEach((A,N)=>{switch(A){case"points":a.value=D.value.valuePower[N];break;case"artefact":t.value=D.value.valuePower[N];break;case"attack":r.value=D.value.valuePower[N];break;case"clay":u.value=D.value.valuePower[N];break;case"brick":k.value=D.value.valuePower[N];break;case"wood":m.value=D.value.valuePower[N];break;case"paper":d.value=D.value.valuePower[N];break;case"glass":l.value=D.value.valuePower[N];break;case"cash":o.value=D.value.valuePower[N];break;case"specialChar":i.value=D.value.valuePower[N];break;case"discount":I.value=D.value.valuePower[N];break;case"materials":f.value=D.value.valuePower[N];break;case"cashBack":$.value=D.value.valuePower[N];break;case"guild":X.value=D.value.valuePower[N];break}}),D.value.cost.forEach((A,N)=>{switch(A){case"specialChar":V.value=D.value.valueCost[N];break;case"clay":v.value=D.value.valueCost[N];break;case"brick":q.value=D.value.valueCost[N];break;case"wood":ye.value=D.value.valueCost[N];break;case"paper":be.value=D.value.valueCost[N];break;case"glass":ce.value=D.value.valueCost[N];break;case"cash":R.value=D.value.valueCost[N];break}}),D.value.color){case"red":ee.value="rgb(255, 39, 39)";break;case"green":ee.value="rgb(14, 165, 14)";break;case"blue":ee.value="rgb(74, 74, 252)";break;case"yellow":ee.value="rgb(255, 255, 44)";break;case"brown":ee.value="rgb(197, 69, 69)";break;case"grey":ee.value="rgb(161, 161, 161)";break;case"purple":ee.value="rgb(192, 23, 192)";break}switch(D.value.tier){case"I":re.value="calc(var(--width-tier) * -10) calc(var(--height-tier) * -6)";break;case"II":re.value="calc(var(--width-tier) * -11) calc(var(--height-tier) * -6)";break;case"III":re.value="0 calc(var(--height-tier) * -7)";break;case"guild":re.value="calc(var(--width-tier) * -1) calc(var(--height-tier) * -7)";break}}),(A,N)=>{var Ae;return p(),g("div",{class:_(["card",`card${e(D).idImg}`,!e(D).hide||((Ae=e(D).coversBy)==null?void 0:Ae.length)===0?"":"hideCard",A.small&&"small"]),style:ae(`--reversBg:${re.value};`)},[e(D).taken==="inGame"&&A.cash1P!==void 0&&A.cash1P>=0?(p(),g("div",{key:0,class:_(["cashSum cashSumP1",A.res1P!==void 0&&A.cash1P>A.res1P&&"toHighPrice"])},b(A.cash1P),3)):U("",!0),e(D).taken==="inGame"&&A.cash2P!==void 0&&A.cash2P>=0?(p(),g("div",{key:1,class:_(["cashSum cashSumP2",A.res2P!==void 0&&A.cash2P>A.res2P&&"toHighPrice"])},b(A.cash2P),3)):U("",!0)],6)}}});const oe=_e(us,[["__scopeId","data-v-efdd48b9"]]),cs=Pe({__name:"DuelGameLayOutTiersComponent",props:{card:{},x:{},y:{},cash1P:{},cash2P:{},user:{}},setup(s){const c=Oe(),{selectedCard:a,player1:t,player2:r}=We(c);return(u,k)=>{var m,d,l;return p(),g("div",{class:_(["cardWrapper",u.card.taken==="inGame"?"":"invisible",((m=u.card.coversBy)==null?void 0:m.length)!==0&&u.card.hide&&"cardHide",((d=u.card.coversBy)==null?void 0:d.length)===0&&"canSelect",e(a).id===u.card.id&&"selected"]),style:ae(`--x:${u.x}%; --y:${u.y}%; --z:${u.card.id}; cursor: ${((l=u.card.coversBy)==null?void 0:l.length)===0?"pointer":"default"};`)},[ue(oe,{card:u.card,cash1P:u.card.taken==="inGame"?u.user.uid===e(t).user.uid?u.cash1P:u.cash2P:void 0,cash2P:u.card.taken==="inGame"?u.user.uid===e(t).user.uid?u.cash2P:u.cash1P:void 0,res1P:u.card.taken==="inGame"?u.user.uid===e(t).user.uid?e(t).resources.cash:e(r).resources.cash:void 0,res2P:u.card.taken==="inGame"?u.user.uid===e(t).user.uid?e(r).resources.cash:e(t).resources.cash:void 0},null,8,["card","cash1P","cash2P","res1P","res2P"])],6)}}});const ia=_e(cs,[["__scopeId","data-v-4c203467"]]),ds=Pe({__name:"DuelGameWonderComponent",props:{card:{},cash:{},resCash:{}},setup(s){const c=s,{card:a}=Re(c),t=h(0),r=h(0),u=h(0),k=h(0),m=h(0),d=h(0),l=h(0),o=h(0),i=h(0),I=h(0),f=h(0);h(0);const $=h("");na(()=>{a.value.power.forEach((V,v)=>{switch(V){case"effect":t.value=a.value.valuePower[v];break;case"cash":r.value=a.value.valuePower[v];break;case"break":u.value=a.value.valuePower[v];break;case"materials":k.value=a.value.valuePower[v];break;case"attack":m.value=a.value.valuePower[v];break;case"points":d.value=a.value.valuePower[v];break}}),a.value.cost.forEach((V,v)=>{switch(V){case"clay":l.value=a.value.valueCost[v];break;case"brick":o.value=a.value.valueCost[v];break;case"wood":i.value=a.value.valueCost[v];break;case"paper":I.value=a.value.valueCost[v];break;case"glass":f.value=a.value.valueCost[v];break}}),X()}),Ge(()=>a.value.activated,()=>{X()});function X(){switch(a.value.activated){case"I":$.value="calc(var(--width-tier) * -10) calc(var(--height-tier) * -6)";break;case"II":$.value="calc(var(--width-tier) * -11) calc(var(--height-tier) * -6)";break;case"III":$.value="0 calc(var(--height-tier) * -7)";break;case"guild":$.value="calc(var(--width-tier) * -1) calc(var(--height-tier) * -7)";break}}return(V,v)=>(p(),g("div",{class:_(["cardWrapper"]),style:ae(`--bg-position: ${$.value};`)},[n("div",{class:_(["card",`card${e(a).id}`])},null,2),n("div",{class:_(["tierCardForWonder",$.value!==""&&"getImg"])},null,2),e(a).taken&&e(a).activated==="none"?(p(),g("div",{key:0,class:_(["cashSum",V.resCash!==void 0&&V.cash!==void 0&&V.cash>V.resCash&&"toHighPrice"])},b(V.cash),3)):U("",!0)],4))}});const Ie=_e(ds,[["__scopeId","data-v-d45b3928"]]),vs=Pe({__name:"DuelGameCoinComponent",props:{coin:{}},setup(s){const c=s,a=h(""),{coin:t}=Re(c);return na(()=>{switch(t.value){case"artefact7":a.value="7";break;case"attack1":a.value="1+";break;case"point7":a.value="7";break;case"pointX3":a.value="3x ";break;case"cash6n4special":a.value="6$+";break;case"lowCostWonder":a.value="$$";break;case"lowCostBlue":a.value="$$";break;case"cashBack":a.value="$";break;case"point4n6cash":a.value="6$";break;case"repeatWonder":a.value="";break;default:a.value=t.value;break}}),(r,u)=>(p(),g("span",{class:_(["boardSingleCoin",`${e(t)}`])},null,2))}});const ra=_e(vs,[["__scopeId","data-v-1d3419af"]]),ps={class:"duel"},hs={class:_(["punishment"])},ys=Pe({__name:"DuelGameBoardDuelComponent",props:{isMyTurn:{type:Boolean},user:{}},emits:["coin-selected"],setup(s,{emit:c}){const a=s,t=Oe(),{board:r,pickCoin:u,player2:k,wonByAggressive:m}=We(t),{isMyTurn:d}=Re(a);return(l,o)=>(p(),g("section",ps,[n("div",hs,[n("div",{class:_([l.user.uid!==e(k).user.uid?"punishment1":"punishment4"]),style:ae(e(r).punishment1?"":"opacity: 0;")},null,6),n("div",{class:_([l.user.uid!==e(k).user.uid?"punishment2":"punishment3"]),style:ae(e(r).punishment2?"":"opacity: 0;")},null,6),n("div",{class:_([l.user.uid!==e(k).user.uid?"punishment3":"punishment2"]),style:ae(e(r).punishment3?"":"opacity: 0;")},null,6),n("div",{class:_([l.user.uid!==e(k).user.uid?"punishment4":"punishment1"]),style:ae(e(r).punishment4?"":"opacity: 0;")},null,6)]),n("div",{class:_(["boardPawn",l.user.uid===e(k).user.uid&&"rotatePawnDuel"])},[n("div",{class:_(["pawn",e(m)!==""&&"pawnWin"]),style:ae(`--position:${e(r).pawn}`)},null,6)],2),n("div",{class:_(["boardCoins",e(u)!==""&&"selectCoin"])},[(p(!0),g(z,null,Q(e(r).coins,i=>(p(),M(ra,{key:i,coin:i,style:ae(e(d)&&e(u)!==""&&"cursor: pointer;"),onClick:I=>e(d)&&e(u)!==""?c("coin-selected",i):null},null,8,["coin","style","onClick"]))),128))],2)]))}});const fs=_e(ys,[["__scopeId","data-v-7097ba64"]]),ws={class:_(["graveyard","customInput"])},ms=Pe({__name:"DuelGameGraveyardComponent",props:{isMyTurn:{type:Boolean}},emits:["pick-card-from-graveyard"],setup(s,{emit:c}){const a=Oe(),{graveyard:t,pickCardFromGraveyard:r}=We(a);return(u,k)=>(p(),g("section",ws,[n("div",{class:_([e(t).length>=16&&"addScrollbar",e(r)!==""&&"selectFromGraveyard",u.isMyTurn&&"addCursorPointer"])},[(p(!0),g(z,null,Q(e(t),m=>(p(),M(oe,{key:m.id,card:m,small:"",style:ae(u.isMyTurn&&e(r)!==""&&"cursor: pointer;"),onClick:d=>u.isMyTurn&&e(r)!==""?c("pick-card-from-graveyard",m):null},null,8,["card","style","onClick"]))),128))],2)]))}});const Cs=_e(ms,[["__scopeId","data-v-040d994f"]]),ks={class:"playerInfoContainer"},gs={key:0,class:"surrenderPopUp"},bs={key:0,class:"animateHand"},Is=["disabled"],Ps={key:0,class:"animateHand"},_s=["disabled"],Bs=Pe({__name:"DuelGamePlayersInfoComponent",props:{user:{}},emits:["prepare-game-to-remove-from-db"],setup(s,{emit:c}){const a=s,t=Oe(),{player1:r,player2:u,turn:k}=We(t),{user:m}=Re(a),d=h("Kick player"),l=h("Surrender"),o=h("Do you really want to give up?!"),i=h(90),I=h(90),f=h(!1);return($,X)=>{const V=la("ion-icon");return p(),g("section",ks,[f.value?(p(),g("div",gs,[n("p",null,b(o.value),1),n("div",null,[n("button",{class:_(["customInput","reverseInput"]),onClick:X[0]||(X[0]=async()=>(await c("prepare-game-to-remove-from-db",e(m)),f.value=!1))},b("Yes")),n("button",{class:_(["customInput","reverseInput"]),onClick:X[1]||(X[1]=()=>f.value=!1)},b("NO!"))])])):U("",!0),n("div",{class:_(["player1info","customInput",e(k)===e(r).user.uid&&"boldParagraf"])},[n("p",null,b(`${e(r).user.displayName||e(r).user.email}`),1),n("p",null,b(`Timer: ${i.value}`),1),e(k)===e(r).user.uid?(p(),g("div",bs,[ue(V,{name:"time-sharp"})])):U("",!0),n("button",{disabled:e(u).user.uid===e(m).uid&&I.value>0,class:_(["customButton"]),onClick:X[2]||(X[2]=()=>e(r).user.uid===e(m).uid?f.value=!0:null)},b(e(r).user.uid===e(m).uid?l.value:d.value),9,Is)],2),n("div",{class:_(["player2info","customInput",e(k)===e(u).user.uid&&"boldParagraf"])},[n("p",null,b(`${e(u).user.displayName||e(u).user.email}`),1),n("p",null,b(`Timer: ${I.value}`),1),e(k)===e(u).user.uid?(p(),g("div",Ps,[ue(V,{name:"time-sharp"})])):U("",!0),n("button",{disabled:e(r).user.uid===e(m).uid&&i.value>0,class:_(["customButton"]),onClick:X[3]||(X[3]=()=>e(u).user.uid===e(m).uid?f.value=!0:null)},b(e(u).user.uid===e(m).uid?l.value:d.value),9,_s)],2)])}}});const $s=_e(Bs,[["__scopeId","data-v-ce59c057"]]),Gs={class:"playerCardsContainer"},Ts={class:"playerCardColorContainer playerCard3"},Ws={class:"playerCardColorContainer playerCard4"},As={class:"playerCardColorContainer playerCard5"},Ss={class:"playerCardColorContainer playerCard7"},Ds={class:"playerCashPointsContainer"},Os={key:0,class:"animateHand"},Ms={class:"cashPointsContainer"},Fs={class:"cashSum"},Rs={class:"cashSum pointSum"},Es={class:"playerCoins customInput"},Vs={class:"playerCardsContainer"},Ns={class:"playerCardColorContainer playerCard3"},Ls={class:"playerCardColorContainer playerCard4"},Hs={class:"playerCardColorContainer playerCard5"},js={class:"playerCardColorContainer playerCard7"},Us={class:"playerCashPointsContainer"},Xs={key:0,class:"animateHand"},Ys={class:"cashPointsContainer"},Ks={class:"cashSum"},zs={class:"cashSum pointSum"},qs={class:"playerCoins customInput"},Qs=Pe({__name:"DuelGamePlayersResComponent",props:{isMyTurn:{type:Boolean},user:{},selectWonderCard:{type:Boolean}},emits:["destrooy-enemy-card-selected"],setup(s,{emit:c}){const a=s,t=Oe(),{player1:r,player2:u,turn:k,tier:m,destroyBrown:d,destroyGrey:l,wonByArt:o}=We(t),{user:i}=Re(a),I=Ha("wonderCardSelected");function f($){if($===r.value.user.uid){let X=0;r.value.resources.coins.find(v=>v==="artefact7")&&(X+=1);const V=r.value.cards.green.map(v=>v.valuePower[0]);return X+=[...new Set(V)].length}else{let X=0;u.value.resources.coins.find(v=>v==="artefact7")&&(X+=1);const V=u.value.cards.green.map(v=>v.valuePower[0]);return X+=[...new Set(V)].length}}return($,X)=>{const V=la("ion-icon");return p(),g(z,null,[n("section",{class:_(["wonders",e(i).uid===e(r).user.uid?"wonders1":"wonders2"])},[(p(!0),g(z,null,Q(e(r).wonderCards,v=>(p(),M(Ie,{card:v,key:v.id,cash:e(he)(v,`${e(r).user.uid}`),resCash:e(r).resources.cash,class:_([$.selectWonderCard&&$.isMyTurn&&e(i).uid===e(r).user.uid&&e(he)(v,`${e(r).user.uid}`)<=e(r).resources.cash&&"selectWonderFromPlayer"]),onClick:q=>e(m)!=="prepare"&&$.selectWonderCard?e(I)(v,e(r).resources.cash):null},null,8,["card","cash","resCash","class","onClick"]))),128))],2),n("section",{class:_(["playerCardsTierSection",e(i).uid===e(r).user.uid?"playerCardsTierSection1":"playerCardsTierSection2"])},[n("div",Gs,[n("div",{class:_(["playerCardColorContainer","playerCard1",e(d)===e(u).user.uid&&e(d)!==""&&"selectCardToDestroy"])},[(p(!0),g(z,null,Q(e(r).cards.brown,v=>(p(),M(oe,{key:v.id,card:v,small:"",style:ae(e(i).uid===e(u).user.uid&&$.isMyTurn&&e(d)!==""?"cursor: pointer;":""),onClick:q=>e(i).uid===e(u).user.uid&&$.isMyTurn&&e(d)!==""?c("destrooy-enemy-card-selected",v,"brown"):null},null,8,["card","style","onClick"]))),128))],2),n("div",{class:_(["playerCardColorContainer","playerCard2",e(l)===e(u).user.uid&&e(l)!==""&&"selectCardToDestroy"])},[(p(!0),g(z,null,Q(e(r).cards.grey,v=>(p(),M(oe,{key:v.id,card:v,small:"",style:ae(e(i).uid===e(u).user.uid&&$.isMyTurn&&e(l)!==""?"cursor: pointer;":""),onClick:q=>e(i).uid===e(u).user.uid&&$.isMyTurn&&e(l)!==""?c("destrooy-enemy-card-selected",v,"grey"):null},null,8,["card","style","onClick"]))),128))],2),n("div",Ts,[(p(!0),g(z,null,Q(e(r).cards.yellow,v=>(p(),M(oe,{key:v.id,card:v,small:""},null,8,["card"]))),128))]),n("div",Ws,[(p(!0),g(z,null,Q(e(r).cards.blue,v=>(p(),M(oe,{key:v.id,card:v,small:""},null,8,["card"]))),128))]),n("div",As,[(p(!0),g(z,null,Q(e(r).cards.red,v=>(p(),M(oe,{key:v.id,card:v,small:""},null,8,["card"]))),128))]),n("div",{class:_(["playerCardColorContainer","playerCard6",e(o)!==""&&e(o)===e(r).user.uid&&"artWin"])},[n("div",{class:_(["countArt",e(i).uid===e(r).user.uid?"":"reverseCountArt"])},b(f(`${e(r).user.uid}`)+"/6"),3),(p(!0),g(z,null,Q(e(r).cards.green.sort((v,q)=>v.valuePower[0]-q.valuePower[0]),v=>(p(),M(oe,{key:v.id,card:v,small:""},null,8,["card"]))),128))],2),n("div",Ss,[(p(!0),g(z,null,Q(e(r).cards.purple,v=>(p(),M(oe,{key:v.id,card:v,small:""},null,8,["card"]))),128))])])],2),n("section",{class:_(["playerResContainer",e(i).uid===e(r).user.uid?"playerResContainer1":"playerResContainer2"])},[n("div",Ds,[e(k)===e(r).user.uid?(p(),g("div",Os,[ue(V,{name:"time-sharp"})])):U("",!0),n("p",{style:ae(e(k)===e(r).user.uid?"font-weight: bold;":"")},b(`${e(r).user.displayName||e(r).user.email}`),5),n("p",{style:ae(e(k)===e(r).user.uid?"font-weight: bold;":"")},b("Status: online"),4),n("div",Ms,[n("div",Fs,b(e(r).resources.cash),1),n("div",Rs,b(e(r).points),1)])]),n("div",Es,[(p(!0),g(z,null,Q(e(r).resources.coins,v=>(p(),M(ra,{key:v,coin:v},null,8,["coin"]))),128))])],2),n("section",{class:_(["wonders",e(i).uid===e(r).user.uid?"wonders2":"wonders1"])},[(p(!0),g(z,null,Q(e(u).wonderCards,v=>(p(),M(Ie,{card:v,key:v.id,cash:e(he)(v,`${e(u).user.uid}`),resCash:e(u).resources.cash,class:_([$.selectWonderCard&&$.isMyTurn&&e(i).uid===e(u).user.uid&&e(he)(v,`${e(u).user.uid}`)<=e(u).resources.cash&&"selectWonderFromPlayer"]),onClick:q=>e(m)!=="prepare"&&$.selectWonderCard?e(I)(v,e(u).resources.cash):null},null,8,["card","cash","resCash","class","onClick"]))),128))],2),n("section",{class:_(["playerCardsTierSection",e(i).uid===e(r).user.uid?"playerCardsTierSection2":"playerCardsTierSection1"])},[n("div",Vs,[n("div",{class:_(["playerCardColorContainer","playerCard1",e(d)===e(r).user.uid&&e(d)!==""&&"selectCardToDestroy"])},[(p(!0),g(z,null,Q(e(u).cards.brown,v=>(p(),M(oe,{key:v.id,card:v,small:"",style:ae(e(i).uid===e(r).user.uid&&$.isMyTurn&&e(d)!==""?"cursor: pointer;":""),onClick:q=>e(i).uid===e(r).user.uid&&$.isMyTurn&&e(d)!==""?c("destrooy-enemy-card-selected",v,"brown"):null},null,8,["card","style","onClick"]))),128))],2),n("div",{class:_(["playerCardColorContainer","playerCard2",e(l)===e(r).user.uid&&e(l)!==""&&"selectCardToDestroy"])},[(p(!0),g(z,null,Q(e(u).cards.grey,v=>(p(),M(oe,{key:v.id,card:v,small:"",style:ae(e(i).uid===e(r).user.uid&&$.isMyTurn&&e(l)!==""?"cursor: pointer;":""),onClick:q=>e(i).uid===e(r).user.uid&&$.isMyTurn&&e(l)!==""?c("destrooy-enemy-card-selected",v,"grey"):null},null,8,["card","style","onClick"]))),128))],2),n("div",Ns,[(p(!0),g(z,null,Q(e(u).cards.yellow,v=>(p(),M(oe,{key:v.id,card:v,small:""},null,8,["card"]))),128))]),n("div",Ls,[(p(!0),g(z,null,Q(e(u).cards.blue,v=>(p(),M(oe,{key:v.id,card:v,small:""},null,8,["card"]))),128))]),n("div",Hs,[(p(!0),g(z,null,Q(e(u).cards.red,v=>(p(),M(oe,{key:v.id,card:v,small:""},null,8,["card"]))),128))]),n("div",{class:_(["playerCardColorContainer","playerCard6",e(o)!==""&&e(o)===e(u).user.uid&&"artWin"])},[n("div",{class:_(["countArt",e(i).uid===e(r).user.uid?"reverseCountArt":""])},b(f(`${e(u).user.uid}`)+"/6"),3),(p(!0),g(z,null,Q(e(u).cards.green.sort((v,q)=>v.valuePower[0]-q.valuePower[0]),v=>(p(),M(oe,{key:v.id,card:v,small:""},null,8,["card"]))),128))],2),n("div",js,[(p(!0),g(z,null,Q(e(u).cards.purple,v=>(p(),M(oe,{key:v.id,card:v,small:""},null,8,["card"]))),128))])])],2),n("section",{class:_(["playerResContainer",e(i).uid===e(r).user.uid?"playerResContainer2":"playerResContainer1"])},[n("div",Us,[e(k)===e(u).user.uid?(p(),g("div",Xs,[ue(V,{name:"time-sharp"})])):U("",!0),n("p",{style:ae(e(k)===e(u).user.uid?"font-weight: bold;":"")},b(`${e(u).user.displayName||e(u).user.email}`),5),n("p",{style:ae(e(k)===e(u).user.uid?"font-weight: bold;":"")},b("Status: online"),4),n("div",Ys,[n("div",Ks,b(e(u).resources.cash),1),n("div",zs,b(e(u).points),1)])]),n("div",qs,[(p(!0),g(z,null,Q(e(u).resources.coins,v=>(p(),M(ra,{key:v,coin:v},null,8,["coin"]))),128))])],2)],64)}}});const Js=_e(Qs,[["__scopeId","data-v-76380c08"]]),Ia=""+new URL("win-d87fbc05.mp3",import.meta.url).href,Pa=""+new URL("lost-7a2664bb.mp3",import.meta.url).href,se=s=>(ja("data-v-d29fcd10"),s=s(),Ua(),s),Zs={class:"countPoints"},xs={class:"containerPoints customInput"},er={class:"wonderPoints"},ar=se(()=>n("div",{class:"cashSum wonderCard"},null,-1)),sr={class:"bluePoints"},rr=se(()=>n("div",{class:"cashSum blueCard"},null,-1)),lr={class:"yellowPoints"},tr=se(()=>n("div",{class:"cashSum yellowCard"},null,-1)),or={class:"greenPoints"},ir=se(()=>n("div",{class:"cashSum greenCard"},null,-1)),nr={class:"cashPoints"},ur=se(()=>n("div",{class:"cashSum cashCard"},null,-1)),cr={class:"purplePoints"},dr=se(()=>n("div",{class:"cashSum purpleCard"},null,-1)),vr={class:"coinsPoints"},pr=se(()=>n("div",{class:"cashSum miniCoin"},null,-1)),hr={class:"pawnPoints"},yr=se(()=>n("div",{class:"cashSum attackImg"},null,-1)),fr={class:"sumPoints"},wr=se(()=>n("div",{class:"cashSum pointsImg"},null,-1)),mr={class:"containerPoints customInput"},Cr={class:"wonderPoints"},kr=se(()=>n("div",{class:"cashSum wonderCard"},null,-1)),gr={class:"bluePoints"},br=se(()=>n("div",{class:"cashSum blueCard"},null,-1)),Ir={class:"yellowPoints"},Pr=se(()=>n("div",{class:"cashSum yellowCard"},null,-1)),_r={class:"greenPoints"},Br=se(()=>n("div",{class:"cashSum greenCard"},null,-1)),$r={class:"cashPoints"},Gr=se(()=>n("div",{class:"cashSum cashCard"},null,-1)),Tr={class:"purplePoints"},Wr=se(()=>n("div",{class:"cashSum purpleCard"},null,-1)),Ar={class:"coinsPoints"},Sr=se(()=>n("div",{class:"cashSum miniCoin"},null,-1)),Dr={class:"pawnPoints"},Or=se(()=>n("div",{class:"cashSum attackImg"},null,-1)),Mr={class:"sumPoints"},Fr=se(()=>n("div",{class:"cashSum pointsImg"},null,-1)),Rr=Pe({__name:"DuelGameEndGameComponent",props:{user:{}},setup(s){const c=s,a=Oe(),{player1:t,player2:r,tier:u,board:k,endGameAnimationEnd:m}=We(a),d=ze(Qe,"gameDuel"),l=qe(d,"table1");Re(c);const o=h(0),i=h(0),I=h(!1),f=h(0),$=h(new Audio(Ia)),X=h(new Audio(Pa));$.value.volume=.66,X.value.volume=.66;const V=h(0),v=h(0),q=h(0),ye=h(0),be=h(0),ce=h(0),R=h(0),ee=h(0),re=h(0),D=h(0),A=h(0),N=h(0),Ae=h(0),Be=h(0),B=h(0),Je=h(0),W=h(0),F=h(0),je=h(0),de=h(0),fe=h(0),le=h(0),Se=h(0),Ee=h(0);Ge(u,async()=>{u.value==="end"&&(J(),await Me())}),Ge([()=>I.value],()=>{Ve()}),ha(async()=>{J(),await Me()});const Ve=()=>{if(be.value===0&&W.value===0)Ue();else{const T=setInterval(()=>{clearInterval(T);const O=setInterval(()=>{ce.value<be.value?(f.value=1,ce.value++,o.value++):F.value<W.value?(f.value=2,F.value++,i.value++):(f.value=0,Ue(),clearInterval(O))},50)},1300)}},Ue=()=>{if(R.value===0&&je.value===0)Xe();else{const T=setInterval(()=>{clearInterval(T);const O=setInterval(()=>{ee.value<R.value?(f.value=3,ee.value++,o.value++):de.value<je.value?(f.value=4,de.value++,i.value++):(f.value=0,Xe(),clearInterval(O))},50)},555)}},Xe=()=>{if(re.value===0&&fe.value===0)Ye();else{const T=setInterval(()=>{clearInterval(T);const O=setInterval(()=>{D.value<re.value?(f.value=5,D.value++,o.value++):le.value<fe.value?(f.value=6,le.value++,i.value++):(f.value=0,Ye(),clearInterval(O))},50)},555)}},Ye=()=>{if(A.value===0&&Se.value===0)Ke();else{const T=setInterval(()=>{clearInterval(T);const O=setInterval(()=>{N.value<A.value?(f.value=7,N.value++,o.value++):Ee.value<Se.value?(f.value=8,le.value++,i.value++):(f.value=0,Ke(),clearInterval(O))},50)},555)}},Ke=()=>{const T=setInterval(()=>{if(clearInterval(T),o.value>i.value)f.value=9;else if(o.value<i.value)f.value=10;else if(o.value===i.value){f.value=11;const O=setInterval(()=>{clearInterval(O),v.value>Be.value?f.value=12:Be.value>v.value&&(f.value=13)},777)}},777);m.value=!0},J=()=>{V.value=me(t.value.wonderCards),v.value=te(t.value.cards.blue),q.value=te(t.value.cards.yellow),ye.value=te(t.value.cards.green),o.value=V.value+v.value+q.value+ye.value,be.value=Math.floor(t.value.resources.cash/3),R.value=Ce(t.value.cards.purple.map(T=>T.valuePower[0])),re.value=ke(t.value.resources.coins),A.value=k.value.pawn<=-6&&10||k.value.pawn<=-3&&5||k.value.pawn<=-1&&2||0,Ae.value=me(r.value.wonderCards),Be.value=te(r.value.cards.blue),B.value=te(r.value.cards.yellow),Je.value=te(r.value.cards.green),i.value=Ae.value+Be.value+B.value+Je.value,W.value=Math.floor(r.value.resources.cash/3),je.value=Ce(r.value.cards.purple.map(T=>T.valuePower[0])),fe.value=ke(r.value.resources.coins),Se.value=k.value.pawn>=6&&10||k.value.pawn>=3&&5||k.value.pawn>=1&&2||0,I.value=!0},Me=async()=>{const T=o.value+be.value+R.value+re.value+A.value,O=i.value+W.value+je.value+fe.value+Se.value;T>O?await C(l,{wonByPoints:t.value.user.uid}):T<O?await C(l,{wonByPoints:r.value.user.uid}):v.value>Be.value?await C(l,{wonByPoints:t.value.user.uid}):v.value<Be.value?await C(l,{wonByPoints:r.value.user.uid}):await C(l,{wonByPoints:"draw"})},me=T=>{let O=0;return T.forEach(P=>{P.power.find((H,Y)=>H==="points"?(P.activated!=="none"&&(O+=P.valuePower[Y]),!0):null)}),O},te=T=>{let O=0;return T.forEach(P=>{P.power.find((H,Y)=>H==="points"?(O+=P.valuePower[Y],!0):null)}),O},Ce=T=>{let O=0;return T.forEach(P=>{if(P===1){const H=t.value.cards.yellow.length,Y=r.value.cards.yellow.length;O+=H>Y?H:Y}if(P===2){const H=t.value.cards.brown.length+t.value.cards.grey.length,Y=r.value.cards.brown.length+r.value.cards.grey.length;O+=H>Y?H:Y}if(P===3){const H=t.value.wonderCards.length,Y=r.value.wonderCards.length;O+=H>Y?H*2:Y*2}if(P===4){const H=t.value.cards.blue.length,Y=r.value.cards.blue.length;O+=H>Y?H:Y}if(P===5){const H=t.value.cards.green.length,Y=r.value.cards.green.length;O+=H>Y?H:Y}if(P===6){const H=Math.floor(t.value.resources.cash/3),Y=Math.floor(r.value.resources.cash/3);O+=H>Y?H:Y}if(P===7){const H=t.value.cards.red.length,Y=r.value.cards.red.length;O+=H>Y?H:Y}}),O},ke=T=>{let O=0;return T.forEach(P=>{P==="point4n6cash"&&(O+=4),P==="point7"&&(O+=7),P==="pointX3"&&(O+=3*T.length)}),O};return(T,O)=>{const P=la("ion-icon");return p(),g("section",Zs,[n("p",{style:ae(f.value===9||f.value===12?"font-weight: bold;":"")},[He(b(`${e(t).user.displayName||e(t).user.email}`),1),f.value===9||f.value===12?(p(),M(P,{key:0,class:"animateHand marginLeft",name:"thumbs-up-sharp"})):U("",!0)],4),n("div",xs,[n("div",er,[ar,n("p",null,b(`${V.value}`),1)]),n("div",sr,[rr,n("p",{class:_([f.value===12&&"animatePulse"])},b(`${v.value}`),3)]),n("div",lr,[tr,n("p",null,b(`${q.value}`),1)]),n("div",or,[ir,n("p",null,b(`${ye.value}`),1)]),n("div",nr,[ur,n("p",{class:_([f.value===1&&"scalePlus"])},b(`${ce.value}`),3)]),n("div",cr,[dr,n("p",{class:_([f.value===3&&"scalePlus"])},b(`${ee.value}`),3)]),n("div",vr,[pr,n("p",{class:_([f.value===5&&"scalePlus"])},b(`${D.value}`),3)]),n("div",hr,[yr,n("p",{class:_([f.value===7&&"scalePlus"])},b(`${N.value}`),3)]),n("div",fr,[wr,n("p",{class:_([(f.value===9||f.value>=11)&&"animatePulse"])},b(`${o.value}`),3)])]),n("p",{style:ae(f.value===10||f.value===13?"font-weight: bold;":"")},[He(b(`${e(r).user.displayName||e(r).user.email}`),1),f.value===10||f.value===13?(p(),M(P,{key:0,class:"animateHand marginLeft",name:"thumbs-up-sharp"})):U("",!0)],4),n("div",mr,[n("div",Cr,[kr,n("p",null,b(`${Ae.value}`),1)]),n("div",gr,[br,n("p",{class:_([f.value===13&&"animatePulse"])},b(`${Be.value}`),3)]),n("div",Ir,[Pr,n("p",null,b(`${B.value}`),1)]),n("div",_r,[Br,n("p",null,b(`${Je.value}`),1)]),n("div",$r,[Gr,n("p",{class:_([f.value===2&&"scalePlus"])},b(`${F.value}`),3)]),n("div",Tr,[Wr,n("p",{class:_([f.value===4&&"scalePlus"])},b(`${de.value}`),3)]),n("div",Ar,[Sr,n("p",{class:_([f.value===6&&"scalePlus"])},b(`${le.value}`),3)]),n("div",Dr,[Or,n("p",{class:_([f.value===8&&"scalePlus"])},b(`${Ee.value}`),3)]),n("div",Mr,[Fr,n("p",{class:_([(f.value===10||f.value>=11)&&"animatePulse"])},b(`${i.value}`),3)])])])}}});const Er=_e(Rr,[["__scopeId","data-v-d29fcd10"]]),Vr={class:"wrapper"},Nr={key:0,class:"loading"},Lr={key:1,class:"cards cardsWonderPrepre"},Hr={key:0,class:"pickWonders"},jr={key:1,class:"pickWonders"},Ur={key:2,class:"cards cardsTier"},Xr={key:3,class:"cards cardsTier"},Yr={key:4,class:"cards cardsTier"},Kr={key:6,class:"playerAction"},zr=["disabled"],qr=["disabled"],Qr=["disabled"],Jr={key:7,class:"playerAction"},Zr={style:"font-weight: bold;"},xr={key:8,class:"playerAction"},el={style:"font-weight: bold;"},al={key:9,class:"playerAction"},sl={style:"font-weight: bold;"},rl={key:10,class:"playerAction"},ll={style:"font-weight: bold;"},tl={key:11,class:"playerAction"},ol={key:12,class:"playerAction"},il={key:13,class:"playerAction"},nl={key:14,class:"playerAction"},ul={key:15,class:"playerAction"},cl={key:16,class:"playerAction"},dl={key:17,class:"playerAction"},vl={key:18,class:"playerAction"},pl={key:19,class:"playerAction"},hl={key:0},yl={key:1},fl=Pe({__name:"TheDuelGameBoard",setup(s){Xa("wonderCardSelected",Aa);const c=h("Buy for"),a=h("Sell for"),t=h("Build Wonder"),r=h("Go Back"),u=h("Who Starts?"),k=h("Pick Coin!"),m=h("Pick one Coin of three!"),d=h("Pick card from graveyard!"),l=h("Pick Wonder!"),o=h("Opponent Need To Pick Wonder..."),i=h("Destroy Enemy Card!"),I=h("Winner By Artefacts: "),f=h("Winner By Aggressive: "),$=h("Winner By Surrender: "),X=h("Winner By Points: "),V=h("Opponent's move..."),v=h(new Audio(Qa)),q=h(new Audio(Ia)),ye=h(new Audio(Pa));v.value.volume=.66,q.value.volume=.66,ye.value.volume=.66;const be=h(20),ce=h(Ja(function(){Ne.push("/feed")},be.value*1e3)),R=h(!1),ee=h(!1),re=Za(),{duel:D}=We(re),A=Oe(),{tierOneCards:N,tierTwoCards:Ae,tierThreeCards:Be,wonderCards:B,graveyard:Je,player1:W,player2:F,board:je,turn:de,tier:fe,move:le,theRestOfCoins:Se,pickCoin:Ee,pickCoinOfThree:Ve,pickCardFromGraveyard:Ue,destroyBrown:Xe,destroyGrey:Ye,selectWondersForPlayers:Ke,selectWondersForPlayersMove:J,chooseWhoWillStart:Me,wonByArt:me,wonByAggressive:te,wonBySurr:Ce,wonByPoints:ke,selectedCard:T,selectedWonder:O,isLoading:P,endGameAnimationEnd:H}=We(A),Y=ze(Qe,"users"),_a=ze(Qe,"gameStatus"),Ba=qe(_a,"Duel"),$a=ze(Qe,"gameDuel"),Z=qe($a,"table1"),x=h({}),Ne=Ya(),E=Ze(()=>de.value===x.value.uid),ua=Ze(()=>{var w,y,S,ve;return((w=B.value[0])==null?void 0:w.taken)&&((y=B.value[1])==null?void 0:y.taken)&&((S=B.value[2])==null?void 0:S.taken)&&((ve=B.value[3])==null?void 0:ve.taken)}),Le=Ze(()=>{var w;return(w=T.value)!=null&&w.id?he(T.value,`${x.value.uid}`):-1}),Ga=Ze(()=>{if(!E.value||!T.value.id)return!1;if(x.value.uid===W.value.user.uid)if(W.value.wonderCards.find(w=>w.activated==="none")){let w=!1;return W.value.wonderCards.forEach(y=>{let S=he(y,`${x.value.uid}`);y.activated==="none"&&S<=W.value.resources.cash&&(w=!0)}),w}else return!1;else if(F.value.wonderCards.find(w=>w.activated==="none")){let w=!1;return F.value.wonderCards.forEach(y=>{let S=he(y,`${x.value.uid}`);y.activated==="none"&&S<=F.value.resources.cash&&(w=!0)}),w}else return!1});Ge([()=>O.value,()=>T.value],()=>{var w,y;(!((w=O.value)!=null&&w.id)||!((y=T.value)!=null&&y.id))&&(ee.value=!1)}),Ge([()=>F.value.wonderCards],async()=>{P.value=!0,F.value.wonderCards.length===4&&le.value===0&&(await C(Z,{tier:"I"}),R.value=!0),P.value=!1}),Ge([()=>J.value],async([w])=>{if((w===3||w===7)&&E.value){const y=B.value.find(S=>S.taken===!1);y&&await $e(y.id)}}),Ge(le,async()=>{R.value=!0,E.value&&v.value.play(),le.value>=20&&le.value<40&&(P.value=!0,Ce.value===""&&await C(Z,{tier:"II"}),Me.value&&E.value&&(R.value=!1),P.value=!1),le.value>=40&&le.value<60&&(P.value=!0,te.value===""&&me.value===""&&Ce.value===""&&await C(Z,{tier:"III"}),Me.value&&E.value&&(R.value=!1),P.value=!1),le.value===60&&(P.value=!0,R.value=!1,te.value===""&&me.value===""&&Ce.value===""&&await C(Z,{tier:"end"}),P.value=!1)}),Ge([()=>me.value,()=>te.value,()=>Ce.value,()=>ke.value],async([w,y,S,ve])=>{(S!==""||w!==""||y!==""||ve!=="")&&(S!==""&&(S===x.value.uid?q.value.play():ye.value.play()),w!==""&&(w===x.value.uid?q.value.play():ye.value.play()),y!==""&&(y===x.value.uid?q.value.play():ye.value.play()),await re.deleteGameDuel(),ce.value())}),Ge([()=>H.value],([w])=>{w&&(ke.value==="draw"?q.value.play():ke.value!==""&&(ke.value===x.value.uid?q.value.play():ye.value.play()))}),ha(async()=>{var j,ie,ge;P.value=!0;let w=!1;await re.subFirebaseConnect();const y=await xe(Ba);if(await Ka().then(async ne=>{if(ne)if(y.exists()){const L=y.data().players.find(Ra=>Ra.uid===ne.uid);L?(x.value={uid:L.uid,email:L.email,displayName:L.displayName,game:L.game,readyToGame:L.readyToGame,timestamp:L.timestamp,online:L.online},(L.game!=="Duel"||!L.readyToGame)&&(P.value=!1,w=!0)):(P.value=!1,w=!0)}else{const L=await xe(qe(Y,ne.uid));L.exists()?L.data().game!=="Duel"&&(P.value=!1,w=!0):(P.value=!1,w=!0)}}),w)return Ne.push("/feed"),null;const S=Fe(Ca,10),ve=Fe(ka,8),pe=await xe(Z);if(pe.exists())console.log("Document data:",pe.data()),!((j=pe.data())!=null&&j.player2.user.uid)&&((ie=pe.data())==null||ie.player1.user.uid,x.value.uid);else{if(y.exists()&&y.data().players[0].uid===x.value.uid){const L=y.data().players;await za(Z,{player1:{...new sa,user:L[0]},player2:{...new sa,user:L[1]},selectWondersForPlayers:[L[0].uid,L[1].uid,L[1].uid,L[0].uid,L[1].uid,L[0].uid,L[0].uid,L[1].uid,L[0].uid],selectWondersForPlayersMove:0,chooseWhoWillStart:!1,turn:x.value.uid,gameBoard:{...new ba,coins:[S[0],S[1],S[2],S[3],S[4]]},tierICards:oa(Fe(ya,20),"I"),tierIICards:oa(Fe(fa,20),"II"),tierIIICards:oa(Fe([...Fe(wa,17),...Fe(ma,3)],20),"III"),wonderCards:ve,graveyard:[],theRestOfCoins:[S[5],S[6],S[7],S[8],S[9]],tier:"prepare",move:0,pickCoin:"",pickCoinOfThree:"",pickCardFromGraveyard:"",destroyBrown:"",destroyGrey:"",wonByArt:"",wonByAggressive:"",wonBySurr:"",wonByPoints:""})}const ne=await xe(Z);ne.exists()?console.log("Document data second time:",ne.data()):console.log("No such document!")}await A.subFirebaseConnect(`${x.value.uid}`),(fe.value!=="prepare"||((ge=pe.data())==null?void 0:ge.tier)!=="prepare")&&(R.value=!0),Ee.value!==""&&E.value?(R.value=!1,T.value={}):Ve.value!==""&&E.value?(R.value=!1,T.value={}):Ue.value!==""&&E.value?(R.value=!1,T.value={}):(Xe.value!==""||Ye.value!=="")&&E.value?(R.value=!1,T.value={}):(me.value!==""||te.value!==""||Ce.value!==""||ke.value!=="")&&(R.value=!1,T.value={}),P.value=!1}),qa(async()=>{ce.value.cancel(),A.unSubFirebaseConnect(),re.unSubFirebaseConnect()});const $e=async w=>{if(!E.value||Ce.value!=="")return null;P.value=!0;const y=setTimeout(()=>{clearTimeout(y),Ta(w),P.value=!0},500)};async function Ta(w){var ve;if((ve=B.value.find(pe=>pe.id===w))!=null&&ve.taken)return;let y={};const S=B.value.map(pe=>pe.id===w?(y={...pe,taken:!0},y):pe);de.value===W.value.user.uid?await C(Z,{player1:{...W.value,wonderCards:[...W.value.wonderCards,{...y}]},wonderCards:S,selectWondersForPlayersMove:K(1),turn:`${Ke.value[J.value+1]}`}):await C(Z,{player2:{...F.value,wonderCards:[...F.value.wonderCards,{...y}]},wonderCards:S,selectWondersForPlayersMove:K(1),turn:`${Ke.value[J.value+1]}`})}async function ca(w){P.value=!0,await A.upgradeTurnAndMove(`${w}`,!0),await C(Z,{chooseWhoWillStart:!1}),R.value=!0,P.value=!1}const ta=w=>{if(!E.value||Me.value||me.value||te.value)return null;if(T.value={},O.value={},ee.value=!1,!(w.coversBy&&w.coversBy.length>0)){if(w.taken!=="inGame")return;T.value=w}},Wa=()=>{if(!E.value)return null;ee.value=!0};function Aa(w,y){if(!E.value)return null;let S=he(w,`${x.value.uid}`);if(S>y)return null;O.value=w,R.value=!1,A.setCardToWonder(S)}const Sa=async w=>{P.value=!0,R.value=!1;let y=0;switch(w){case"point4n6cash":y+=6;break;case"cash6n4special":y+=6;break}de.value===W.value.user.uid?(await C(Z,{"gameBoard.coins":Te(w),"player1.resources.coins":ea(w),pickCoin:""}),y!==0&&await C(Z,{"player1.resources.cash":K(6)})):(await C(Z,{"gameBoard.coins":Te(w),"player2.resources.coins":ea(w),pickCoin:""}),y!==0&&await C(Z,{"player2.resources.cash":K(6)})),A.countArtefacts(de.value),me.value===""&&te.value===""&&Ee.value===""&&A.upgradeTurnAndMove(de.value===W.value.user.uid?`${F.value.user.uid}`:`${W.value.user.uid}`),P.value=!1},Da=async w=>{P.value=!0,R.value=!1;let y=0;switch(w){case"point4n6cash":y+=6;break;case"cash6n4special":y+=6;break}de.value===W.value.user.uid?(await C(Z,{"gameBoard.coins":Te(w),"player1.resources.coins":ea(w),pickCoinOfThree:""}),y!==0&&await C(Z,{"player1.resources.cash":K(6)})):(await C(Z,{"gameBoard.coins":Te(w),"player2.resources.coins":ea(w),pickCoinOfThree:""}),y!==0&&await C(Z,{"player2.resources.cash":K(6)})),A.countArtefacts(de.value),me.value===""&&te.value===""&&Ve.value===""&&(de.value===W.value.user.uid?w==="repeatWonder"?A.upgradeTurnAndMove(`${F.value.user.uid}`):W.value.resources.coins.find(S=>S==="repeatWonder")&&(le.value+1!==20||le.value+1!==40)?A.upgradeTurnAndMove(`${W.value.user.uid}`):A.upgradeTurnAndMove(`${F.value.user.uid}`):w==="repeatWonder"?A.upgradeTurnAndMove(`${W.value.user.uid}`):F.value.resources.coins.find(S=>S==="repeatWonder")&&(le.value+1!==20||le.value+1!==40)?A.upgradeTurnAndMove(`${F.value.user.uid}`):A.upgradeTurnAndMove(`${W.value.user.uid}`)),P.value=!1},Oa=async w=>{P.value=!0,R.value=!1,await C(Z,{graveyard:Te(w),pickCardFromGraveyard:""}),T.value=w,await A.setCardTaken(0,w.tier),P.value=!1},Ma=async(w,y)=>{P.value=!0,R.value=!1,y==="brown"?await C(Z,{destroyBrown:""}):await C(Z,{destroyGrey:""}),T.value=w,await A.setCardGraveyard(w.tier),P.value=!1};async function Fa(w){var S;const y=(S=D.value.players.find(ve=>ve.uid!==w.uid))==null?void 0:S.uid;await C(Z,{wonBySurr:y}),R.value=!1}return(w,y)=>{var ve,pe;const S=la("ion-icon");return p(),g("main",null,[n("section",Vr,[e(P)?(p(),g("div",Nr,[ue(xa)])):U("",!0),ue(fs,{user:x.value,isMyTurn:E.value,onCoinSelected:Sa},null,8,["user","isMyTurn"]),ue(Cs,{isMyTurn:E.value,onPickCardFromGraveyard:Oa},null,8,["isMyTurn"]),ue($s,{user:x.value,onPrepareGameToRemoveFromDb:Fa},null,8,["user"]),ue(Js,{user:x.value,isMyTurn:E.value,selectWonderCard:ee.value,onDestrooyEnemyCardSelected:Ma},null,8,["user","isMyTurn","selectWonderCard"]),e(fe)==="prepare"?(p(),g("section",Lr,[ua.value?U("",!0):(p(),g("div",Hr,[e(B)[0]&&!e(B)[0].taken?(p(),M(Ie,{key:0,card:e(B)[0],onClick:y[0]||(y[0]=()=>e(B)[0].taken||e(J)===3||e(J)===7?null:$e(e(B)[0].id))},null,8,["card"])):U("",!0),e(B)[1]&&!e(B)[1].taken?(p(),M(Ie,{key:1,card:e(B)[1],onClick:y[1]||(y[1]=()=>e(B)[1].taken||e(J)===3||e(J)===7?null:$e(e(B)[1].id))},null,8,["card"])):U("",!0),e(B)[2]&&!e(B)[2].taken?(p(),M(Ie,{key:2,card:e(B)[2],onClick:y[2]||(y[2]=()=>e(B)[2].taken||e(J)===3||e(J)===7?null:$e(e(B)[2].id))},null,8,["card"])):U("",!0),e(B)[3]&&!e(B)[3].taken?(p(),M(Ie,{key:3,card:e(B)[3],onClick:y[3]||(y[3]=()=>e(B)[3].taken||e(J)===3||e(J)===7?null:$e(e(B)[3].id))},null,8,["card"])):U("",!0)])),ua.value?(p(),g("div",jr,[e(B)[4]&&!e(B)[4].taken?(p(),M(Ie,{key:0,card:e(B)[4],onClick:y[4]||(y[4]=()=>e(B)[4].taken||e(J)===3||e(J)===7?null:$e(e(B)[4].id))},null,8,["card"])):U("",!0),e(B)[5]&&!e(B)[5].taken?(p(),M(Ie,{key:1,card:e(B)[5],onClick:y[5]||(y[5]=()=>e(B)[5].taken||e(J)===3||e(J)===7?null:$e(e(B)[5].id))},null,8,["card"])):U("",!0),e(B)[6]&&!e(B)[6].taken?(p(),M(Ie,{key:2,card:e(B)[6],onClick:y[6]||(y[6]=()=>e(B)[6].taken||e(J)===3||e(J)===7?null:$e(e(B)[6].id))},null,8,["card"])):U("",!0),e(B)[7]&&!e(B)[7].taken?(p(),M(Ie,{key:3,card:e(B)[7],onClick:y[7]||(y[7]=()=>e(B)[7].taken||e(J)===3||e(J)===7?null:$e(e(B)[7].id))},null,8,["card"])):U("",!0)])):U("",!0)])):U("",!0),e(fe)==="I"?(p(),g("section",Ur,[(p(!0),g(z,null,Q(e(N),(j,ie)=>{var ge,ne;return p(),M(ia,{key:ie,card:j,user:x.value,x:e(ga)[ie],y:e(es)[ie],cash1P:((ge=j.coversBy)==null?void 0:ge.length)===0?e(he)(j,`${e(W).user.uid}`):-1,cash2P:((ne=j.coversBy)==null?void 0:ne.length)===0?e(he)(j,`${e(F).user.uid}`):-1,onClick:L=>ta(j)},null,8,["card","user","x","y","cash1P","cash2P","onClick"])}),128))])):U("",!0),e(fe)==="II"?(p(),g("section",Xr,[(p(!0),g(z,null,Q(e(Ae),(j,ie)=>{var ge,ne;return p(),M(ia,{key:ie,card:j,user:x.value,x:e(ss)[ie],y:e(as)[ie],cash1P:((ge=j.coversBy)==null?void 0:ge.length)===0?e(he)(j,`${e(W).user.uid}`):-1,cash2P:((ne=j.coversBy)==null?void 0:ne.length)===0?e(he)(j,`${e(F).user.uid}`):-1,onClick:L=>ta(j)},null,8,["card","user","x","y","cash1P","cash2P","onClick"])}),128))])):U("",!0),e(fe)==="III"?(p(),g("section",Yr,[(p(!0),g(z,null,Q(e(Be),(j,ie)=>{var ge,ne;return p(),M(ia,{key:ie,card:j,user:x.value,x:e(ls)[ie],y:e(rs)[ie],cash1P:((ge=j.coversBy)==null?void 0:ge.length)===0?e(he)(j,`${e(W).user.uid}`):-1,cash2P:((ne=j.coversBy)==null?void 0:ne.length)===0?e(he)(j,`${e(F).user.uid}`):-1,onClick:L=>ta(j)},null,8,["card","user","x","y","cash1P","cash2P","onClick"])}),128))])):U("",!0),e(fe)==="end"?(p(),M(Er,{key:5,class:"cards",user:x.value},null,8,["user"])):U("",!0),R.value&&((ve=e(T))!=null&&ve.id)&&!e(P)?(p(),g("section",Kr,[n("button",{disabled:Le.value<0||!E.value||(e(de)===e(W).user.uid?Le.value>e(W).resources.cash:Le.value>e(F).resources.cash),class:"customButton",onClick:y[8]||(y[8]=()=>E.value?(e(A).setCardTaken(Le.value),ee.value=!1,R.value=!1):null)},b(`${c.value} ${Le.value>=0?Le.value:""}`),9,zr),n("button",{disabled:!((pe=e(T))!=null&&pe.id),class:"customButton",onClick:y[9]||(y[9]=()=>E.value?(e(A).setCardGraveyard(),ee.value=!1,R.value=!1):null)},b(a.value+` ${e(de)===e(W).user.uid?e(W).cards.yellow.length+2:e(F).cards.yellow.length+2}`),9,qr),n("button",{disabled:!Ga.value,class:"customButton",onClick:y[10]||(y[10]=()=>E.value?Wa():null)},b(t.value),9,Qr)])):e(me)!==""?(p(),g("section",Jr,[n("p",Zr,[He(b(I.value+`${e(me)===e(W).user.uid?e(W).user.displayName||e(W).user.email:e(F).user.displayName||e(F).user.email}`),1),ue(S,{class:"animateHand",name:"thumbs-up-sharp"})]),n("button",{class:"customButton",onClick:y[11]||(y[11]=()=>(ce.value.cancel(),e(Ne).push("/feed")))},b(r.value),1)])):e(te)!==""?(p(),g("section",xr,[n("p",el,[He(b(f.value+`${e(te)===e(W).user.uid?e(W).user.displayName||e(W).user.email:e(F).user.displayName||e(F).user.email}`),1),ue(S,{class:"animateHand",name:"thumbs-up-sharp"})]),n("button",{class:"customButton",onClick:y[12]||(y[12]=()=>(ce.value.cancel(),e(Ne).push("/feed")))},b(r.value),1)])):e(Ce)!==""?(p(),g("section",al,[n("p",sl,[He(b($.value+`${e(Ce)===e(W).user.uid?e(W).user.displayName||e(W).user.email:e(F).user.displayName||e(F).user.email}`),1),ue(S,{class:"animateHand",name:"thumbs-up-sharp"})]),n("button",{class:"customButton",onClick:y[13]||(y[13]=()=>(ce.value.cancel(),e(Ne).push("/feed")))},b(r.value),1)])):e(ke)!==""&&e(H)?(p(),g("section",rl,[n("p",ll,[He(b(X.value+`${e(ke)==="draw"?"DRAW":e(ke)===e(W).user.uid?e(W).user.displayName||e(W).user.email:e(F).user.displayName||e(F).user.email}`),1),ue(S,{class:"animateHand",name:"thumbs-up-sharp"})]),n("button",{class:"customButton",onClick:y[14]||(y[14]=()=>(ce.value.cancel(),e(Ne).push("/feed")))},b(r.value),1)])):E.value&&e(Me)&&!e(P)?(p(),g("section",tl,[n("button",{class:"customButton",onClick:y[15]||(y[15]=async()=>await ca(`${e(W).user.uid}`))},b(e(W).user.displayName),1),n("p",null,b(` ${u.value} `),1),n("button",{class:"customButton",onClick:y[16]||(y[16]=async()=>await ca(`${e(F).user.uid}`))},b(e(F).user.displayName),1)])):E.value&&e(Ee)!==""&&!e(P)?(p(),g("section",ol,[n("p",null,b(k.value),1)])):E.value&&e(Ve)!==""&&!e(P)?(p(),g("section",il,[n("p",null,b(m.value),1),(p(),g(z,null,Q(3,j=>ue(ra,{class:_("selectCardOfThreeBorder"),key:e(Se)[j],coin:e(Se)[j],onClick:ie=>Da(e(Se)[j])},null,8,["coin","onClick"])),64))])):E.value&&e(Ue)!==""&&!e(P)?(p(),g("section",nl,[n("p",null,b(d.value),1)])):E.value&&e(Xe)!==""&&!e(P)?(p(),g("section",ul,[n("p",null,b(i.value),1)])):E.value&&e(Ye)!==""&&!e(P)?(p(),g("section",cl,[n("p",null,b(i.value),1)])):E.value&&e(fe)==="prepare"&&!e(P)?(p(),g("section",dl,[n("p",null,b(l.value),1)])):!E.value&&e(fe)==="prepare"&&!e(P)?(p(),g("section",vl,[n("p",null,b(o.value),1)])):(p(),g("section",pl,[e(Ve)&&!E.value?(p(),g("p",hl,b("Opponent: "+m.value),1)):E.value?U("",!0):(p(),g("p",yl,b(V.value),1))]))])])}}});const kl=_e(fl,[["__scopeId","data-v-93efa84d"]]);export{kl as default};
