import{d as R,r,g as J,s as q,t as Q,w as I,c as b,a as o,b as i,n as D,u as p,e as x,f as X,o as m,p as Y,h as Z,_ as B,i as z,j as V,k as F,l as E,m as g,q as ee,v as ae,x as se,y as C,z as w,A as h,B as te,C as O,D as j,E as K,F as le,G as re,H as ne,I as oe,J as ue,K as ce,L as ie,M as de}from"./index-e4763767.js";import{b as pe,d as me,L as W}from"./debounce-79f0d2df.js";const ye=y=>(Y("data-v-3ebfeb81"),y=y(),Z(),y),ve=ye(()=>o("div",{class:"box"},null,-1)),fe={class:"box"},he=["disabled"],ge={class:"circle"},be=R({__name:"TheCardComponent",props:{header:{},currentUser:{},video:{},desc:{},color:{},routeTo:{},maxPlayers:{}},emits:["click-lobby"],setup(y,{emit:n}){const u=y,d=r("Go to Lobby"),v=r("Exit Lobby"),_=J(),{duel:T,gems:P,reflex:U}=q(_),{currentUser:s}=Q(u),a=r({id:u.header,status:"Free",players:[]});return I(()=>T.value.players,e=>{a.value.id==="Duel"&&(a.value.players=e,e.length===0?a.value.status="Free":e.length===u.maxPlayers?a.value.status="Busy":a.value.status="Lobby")}),I(()=>P.value.players,e=>{a.value.id==="Gems"&&(a.value.players=e,e.length===0?a.value.status="Free":e.length===u.maxPlayers?a.value.status="Busy":a.value.status="Lobby")}),I(()=>U.value.players,e=>{a.value.id==="Reflex"&&(a.value.players=e,e.length===0?a.value.status="Free":e.length===u.maxPlayers?a.value.status="Busy":a.value.status="Lobby")}),(e,f)=>(m(),b("div",{class:D(["card"]),style:X(`${e.color}`)},[ve,o("div",fe,[o("h2",null,i(a.value.id),1),o("p",null,i(e.desc),1),a.value.players.length<u.maxPlayers||e.maxPlayers===0?(m(),b("button",{key:0,disabled:e.maxPlayers===0,class:D(["cardButton",a.value.players.find(G=>G.uid===p(s).uid)?"cardButtonLobby":""]),onClick:f[0]||(f[0]=()=>n("click-lobby"))},i(e.maxPlayers===0?"Soon":a.value.players.find(G=>G.uid===p(s).uid)?v.value:d.value),11,he)):x("",!0)]),o("div",ge,[o("h2",null,i(u.header),1),o("p",null,i(e.maxPlayers===0?"-":a.value.status),1),o("p",null,i(e.maxPlayers===0?"-":`${a.value.players.length}/${e.maxPlayers}`),1)])],4))}}),A=B(be,[["__scopeId","data-v-3ebfeb81"]]),_e="/vue-project/assets/bell-notification-79064171.mp3",Ue={class:"gameContainer"},Ge={key:0,class:"infoAboutPlayers"},Se={key:0,class:"containerApproveButtons"},Ce=R({__name:"TheGame",props:{header:{},currentUser:{}},setup(y){const n=y,u=z(),{colors:d}=V("indicatorNavi"),v=r("Accept"),_=r("Cancel"),T=r("Redirect to"),P=r("Approval"),U=J(),{duel:s}=q(U),a=F(E,"gameStatus"),e=g(a,"Duel"),f=F(E,"users"),G=r(new Audio(_e)),N=r(new Audio(pe)),c=r(me(function(){u.push("/feed/duel-game")},2*1e3));I(()=>s.value.players,async(t,l)=>{t.length===2&&l.length!==t.length&&G.value.play(),t.length===2&&t.find(k=>k.uid===n.currentUser.uid)&&!t.find(k=>!k.readyToGame)&&await h(e,{isStarted:!0})}),I(()=>s.value.isStarted,async t=>{s.value.players.find(l=>l.uid===n.currentUser.uid)&&!s.value.players.find(l=>!l.readyToGame)&&(N.value.play(),c.value())}),ee(async()=>{await U.subFirebaseConnect()}),ae(async()=>{U.unSubFirebaseConnect(),c.value.cancel()});async function S(){if(s.value.players.find(t=>t.uid===n.currentUser.uid)){await h(g(f,n.currentUser.uid),{game:"",readyToGame:!1,online:"online",timestamp:O()});const t=s.value.players.filter(l=>l.uid!==n.currentUser.uid?l:null);await h(e,{players:t})}else await h(g(f,n.currentUser.uid),{game:"Duel",readyToGame:!1,online:"online",timestamp:O()}),await h(e,{players:te({...n.currentUser,game:"Duel",readyToGame:!1})})}async function L(){if(s.value.players.length===2&&s.value.players.find(t=>t.uid===n.currentUser.uid)){await h(g(f,n.currentUser.uid),{readyToGame:!0});const t=s.value.players.map(l=>l.uid===n.currentUser.uid?{...l,readyToGame:!0}:{...l});await h(e,{players:t})}}async function H(){if(s.value.players.length===2&&s.value.players.find(t=>t.uid===n.currentUser.uid)){s.value.players.forEach(async({uid:l})=>{l===n.currentUser.uid?await h(g(f,l),{game:"",readyToGame:!1}):await h(g(f,l),{readyToGame:!1})});const t=s.value.players.filter(l=>l.uid!==n.currentUser.uid?l:null).map(l=>({...l,readyToGame:!1}));await h(e,{players:t})}}return(t,l)=>{var M;const k=se("ion-icon");return m(),b("section",Ue,[p(s).players.length===2&&p(s).players.find($=>$.uid===t.currentUser.uid)?(m(),b("div",Ge,[o("p",null,i(p(s).isStarted?T.value+": Duel":P.value+": Duel"),1),o("div",null,[o("p",null,i(p(s).players[0].displayName||p(s).players[0].email)+i(": "),1),p(s).players[0].readyToGame?(m(),C(k,{key:1,class:"animateHand",name:"thumbs-up-sharp",style:"margin-left: 10px;"})):(m(),C(W,{key:0,small:"",style:"margin-left: 10px;"}))]),o("div",null,[o("p",null,i(p(s).players[1].displayName||p(s).players[1].email)+i(": "),1),p(s).players[1].readyToGame?(m(),C(k,{key:1,class:"animateHand",name:"thumbs-up-sharp",style:"margin-left: 10px;"})):(m(),C(W,{key:0,small:"",style:"margin-left: 10px;"}))]),(M=p(s).players.find($=>$.uid===t.currentUser.uid))!=null&&M.readyToGame?x("",!0):(m(),b("div",Se,[o("button",{onClick:L},i(v.value),1),o("button",{onClick:H},i(_.value),1)]))])):x("",!0),w(A,{header:"Duel",currentUser:t.currentUser,desc:"A board game inspired by a strategy game called '7 Wonders of the World'",video:"Video soon!",color:p(d)[0],"route-to":"/feed/duel-game","max-players":2,onClickLobby:S,onClickAccept:L,onClickCancel:H},null,8,["currentUser","color"]),w(A,{header:"Gems",currentUser:t.currentUser,desc:"A board game inspired by a strategy game called 'Splendor'",video:"'IN PROGRESS - Video soon!'",color:p(d)[1],"route-to":"/feed/splendor-game","max-players":0},null,8,["currentUser","color"]),w(A,{header:"Reflex",currentUser:t.currentUser,desc:"Game written from 0 in canvasJS. Cooperation against zombies",video:"'IN PROGRESS - Video soon!'",color:p(d)[2],"route-to":"/feed/reflex-game","max-players":0},null,8,["currentUser","desc","color"])])}}}),Te=B(Ce,[["__scopeId","data-v-7eaff5fe"]]),ke=R({__name:"TheSettings",props:{header:{}},setup(y){const n=y,u=r(!1);let d;return j(()=>{d=K(),le(d,v=>{v?u.value=!0:u.value=!1})}),(v,_)=>(m(),b("h2",null,i(n.header),1))}}),xe=B(ke,[["__scopeId","data-v-9a33a386"]]),Pe=R({__name:"TheLogout",props:{header:{}},setup(y){const n=y,u=z();let d;j(()=>{d=K()});const v=()=>{ne(d).then(()=>{u.push("/")})};return(_,T)=>(m(),b(re,null,[o("h2",null,i(n.header),1),o("button",{class:D("customButton"),onClick:v},"log out")],64))}}),Le=B(Pe,[["__scopeId","data-v-4b372c8a"]]),Ie={class:"header"},Re={class:"wrapper"},Be=R({__name:"FeedPanel",setup(y){const n=r("Feed Panel"),u=r("Games"),d=r("Settings"),v=r("log Out"),_=r("game-controller-outline"),T=r("settings-outline"),P=r("log-out-outline"),U=z(),s=F(E,"users"),a=r({}),e=r(u.value),f=r([{name:`${u.value}`,ionIconClass:_.value,to:"/feed/games"},{name:`${d.value}`,ionIconClass:T.value,to:"/feed/settings"},{name:`${v.value}`,ionIconClass:P.value,to:"/feed/logout"}]),G=c=>e.value=c,N=r(["--clr:#2196f3;","--clr:#008a1b;","--clr:#dc1dff;","--clr:#f3218b;","--clr:#d56f1d;"]);return oe("indicatorNavi",{activeLink:e,routes:f,updateActiveLink:G,colors:N}),j(async()=>{await ue().then(async c=>{a.value={uid:c.uid,email:c.email||"",displayName:c.displayName||""};const S=await ce(g(s,c.uid));if(S.exists())a.value=S.data();else{const L={uid:c.uid,email:c.email||"",displayName:c.displayName||"",game:"",readyToGame:!1,online:"online",timestamp:O()};a.value=L,await ie(g(s,c.uid),{...L})}}),f.value.find(({name:c,to:S})=>S===U.currentRoute.value.path?(e.value=c,!0):!1)}),(c,S)=>(m(),b("main",null,[o("header",Ie,[o("h1",null,i(n.value),1)]),o("section",Re,[e.value===u.value?(m(),C(Te,{key:0,header:u.value,currentUser:a.value},null,8,["header","currentUser"])):x("",!0),e.value===d.value?(m(),C(xe,{key:1,header:d.value,currentUser:a.value},null,8,["header","currentUser"])):x("",!0),e.value===v.value?(m(),C(Le,{key:2,header:v.value,currentUser:a.value},null,8,["header","currentUser"])):x("",!0)]),w(de)]))}}),$e=B(Be,[["__scopeId","data-v-5fe8a4ef"]]);export{$e as default};
